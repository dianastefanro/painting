/*!CK:460311683!*//*1457982925,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["shDif"]); }

__d("CanvasCreationEvent",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SAVE:"save",PUBLISH:"publish",CREATE:"create",VIDEO_UPLOAD_SUCCESS:"editor.video_upload_success",VIDEO_UPLOAD_ERROR:"editor.video_upload_error",VIDEO_POST_SUCCESS:"editor.video_post_success",VIDEO_POST_ERROR:"editor.video_post_error",VIDEO_ENCODE_SUCCESS:"editor.video_encode_success",VIDEO_ENCODE_ERROR:"editor.video_encode_error",PREVIEW_SUCCESS:"editor.preview_success",PREVIEW_FAILURE:"editor.preview_failure",SAVE_FAILURE:"editor.save_failure",PUBLISH_FAILURE:"editor.publish_failure",ADD_ELEMENT:"editor.add_element",EDITOR_LINE_HEIGHT_TOUCH:"editor.editor_line_height_touch",EDITOR_LINE_HEIGHT_SAVE:"editor.editor_line_height_save",EDITOR_PHOTO_ASPECT_RATIO_WARNING:"editor.editor_photo_aspect_ratio_warning"};},null);
__d("CanvasSource",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CREATE_FLOW:"create_flow",PAGE_COMPOSER:"page_composer",POWER_EDITOR:"power_editor",PAGE_PUBLISHING_TOOLS:"page_publishing_tools"};},null);
__d("ComposedBlockType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={UNSTYLED:0,PARAGRAPH:1,UNORDERED_LIST_ITEM:2,ORDERED_LIST_ITEM:3,BLOCKQUOTE:4,HEADER_ONE:5,HEADER_TWO:6,CODE:7,MEDIA:8,PULLQUOTE:9,HEADER_THREE:10,HEADER_FOUR:11,HEADER_FIVE:12,HEADER_SIX:13};},null);
__d("ComposedEntityType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={MENTION:0,LINK:1,IMAGE:2,VIDEO:3,EMOTICON:4,TOKEN:5,HASHTAG:6,IMPLICIT_LINK:7,EMBED:8};},null);
__d("ComposedInlineStyle",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={NONE:0,BOLD:1,ITALIC:2,UNDERLINE:4,CODE:8,STRIKETHROUGH:16,SUBSCRIPT:32,SUPERSCRIPT:64};},null);
__d("InstantShoppingDocumentElementType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={RICH_TEXT:1,PHOTO:2,BUTTON:3,SLIDESHOW:4,DIVIDER:5,EXPANDABLE_SECTION:6,STATEFUL:7,VIDEO:8,COLOR_SELECTOR:9,TOGGLE_BUTTON:10,HEADER:11,COMPOSITE_BLOCK:12,FOOTER:13,ELEMENT_GROUP:14};},null);
__d("ProductItemAvailabilities",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={IN_STOCK:"in stock",OUT_OF_STOCK:"out of stock",PREORDER:"preorder",AVAILABLE_FOR_ORDER:"available for order",DISCONTINUED:"discontinued"};},null);
__d("ProductItemFilterFieldsExternal",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={AGE_GROUP:"age_group",AVAILABILITY:"availability",BRAND:"brand",CAPABILITY:"capability",CATEGORY:"category",COLOR:"color",CONDITION:"condition",CURRENCY:"currency",CUSTOM_LABEL_0:"custom_label_0",CUSTOM_LABEL_1:"custom_label_1",CUSTOM_LABEL_2:"custom_label_2",CUSTOM_LABEL_3:"custom_label_3",CUSTOM_LABEL_4:"custom_label_4",GENDER:"gender",MATERIAL:"material",NAME:"name",PATTERN:"pattern",PRICE_AMOUNT:"price_amount",PRODUCT_EXPIRATION_TIME:"product_expiration_time",PRODUCT_FEED_ID:"product_feed_id",PRODUCT_ITEM_ID:"product_item_id",PRODUCT_GROUP_ID:"product_group_id",PRODUCT_TYPE:"product_type",RETAILER_ID:"retailer_id",RETAILER_PRODUCT_GROUP_ID:"retailer_product_group_id",SALE_PRICE_AMOUNT:"sale_price_amount",SIZE:"size"};},null);
__d("VideoContainerType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={LEGACY:0,CONTAINED_POST_ATTACHMENT:1,SAY_THANKS:2,LOOK_NOW:3,BROADCAST:4,ALBUM_MULTIMEDIA_POST:5,UNLISTED:6,VIDEO_LIBRARY:7,GOODWILL_ANNIVERSARY:8,PROFILE_VIDEO:9,BACKSTAGE:10,BACKSTAGE_REACTION:11,STORYLINE:12,GROUP_POST:14,ATLAS_VIDEO:15,LIVE_PHOTO:16,TEMP_MULTIMEDIA_POST:17,GOODWILL_ANNIVERSARY_PROMOTION:18,GOODWILL_VIDEO_SHARE:19,GOODWILL_VIDEO_PROMOTION:20,COPYRIGHT_REFERENCE_VIDEO:21,CANVAS:22,MOMENTS_VIDEO:23,APP_REVIEW_SCREENCAST:25,VIDEO_COMMENT:26,COPYRIGHT_REFERENCE_BROADCAST:27};},null);
__d('AdsCanvasEditorEnums',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={SAVED:0,SAVING:1,UNSAVED:2};f.exports={SaveStateEnum:h};},null);
__d('RichMediaEditorUtil',['ads-lib-urllib'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={isValidURL:function(i){return c('ads-lib-urllib').isUrl(i);},normalizeURL:function(i){return c('ads-lib-urllib').normalize(i);}};f.exports=h;},null);
__d('RichMediaEditorConstants',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports={EDITOR_HEIGHT:666,EDITOR_ELEMENT_ID_PREFIX:'editor_element',EDITOR_ELEMENT_CONTAINER_ID:'editor_element_container',EDITOR_FONT_FAMILIIES:['sans-serif','serif','HelveticaNeue-Regular','HelveticaNeue-Light','HelveticaNeue-Medium','HelveticaNeue-UltraLight','HelveticaNeue-CondensedBold','Georgia'],EDITOR_LINE_HEIGHT:['0.8','1.0','1.1','1.5','2.0'],EDITOR_DEFAULT_LINE_HEIGHT:'1.0'};},null);
__d('createCharacterList',['CharacterMetadata','immutable'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('immutable').List;function i(j,k){var l=j.map(function(m,n){var o=k[n];return c('CharacterMetadata').create({style:m,entity:o});});return h(l);}f.exports=i;},null);
__d('decodeEntityRanges',['UnicodeUtils'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('UnicodeUtils').substr;function i(j,k){var l=Array(j.length).fill(null);if(k)k.forEach(function(m){var n=h(j,0,m.offset).length,o=n+h(j,m.offset,m.length).length;for(var p=n;p<o;p++)l[p]=m.key;});return l;}f.exports=i;},null);
__d('decodeInlineStyleRanges',['UnicodeUtils','immutable'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('immutable').OrderedSet,i=c('UnicodeUtils').substr,j=h();function k(l,m){var n=Array(l.length).fill(j);if(m)m.forEach(function(o){var p=i(l,0,o.offset).length,q=p+i(l,o.offset,o.length).length;while(p<q){n[p]=n[p].add(o.style);p++;}});return n;}f.exports=k;},null);
__d('convertFromRawToDraftState',['ContentBlock','DraftEntity','createCharacterList','decodeEntityRanges','decodeInlineStyleRanges','generateRandomKey'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=i.blocks,k=i.entityMap,l={};Object.keys(k).forEach(function(m){var n=k[m],o=n.type,p=n.mutability,q=n.data,r=c('DraftEntity').create(o,p,q||{});l[m]=r;});return j.map(function(m){var n=m.key,o=m.type,p=m.text,q=m.depth,r=m.inlineStyleRanges,s=m.entityRanges;n=n||c('generateRandomKey')();q=q||0;r=r||[];s=s||[];var t=c('decodeInlineStyleRanges')(p,r),u=s.filter(function(x){return l.hasOwnProperty(x.key);}).map(function(x){return babelHelpers['extends']({},x,{key:l[x.key]});}),v=c('decodeEntityRanges')(p,u),w=c('createCharacterList')(t,v);return new (c('ContentBlock'))({key:n,type:o,text:p,depth:q,characterList:w});});}f.exports=h;},null);
__d('decodeBlocks',['ComposedBlockType','ComposedInlineStyle','convertFromRawToDraftState','mapObject'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(k,l){var m=k.map(function(o){var p=o.type,q=o.inlineStyleRanges,r=babelHelpers.objectWithoutProperties(o,['type','inlineStyleRanges']);return babelHelpers['extends']({type:i[p],inlineStyleRanges:(q||[]).map(function(s){return babelHelpers['extends']({},s,{style:j[s.style]});})},r);}),n=c('mapObject')(l,function(o){return {type:o.getType(),mutability:o.getMutability(),data:o.getData()};});return c('convertFromRawToDraftState')({blocks:m,entityMap:n});}var i={};i[c('ComposedBlockType').UNSTYLED]='unstyled';i[c('ComposedBlockType').PARAGRAPH]='paragraph';i[c('ComposedBlockType').BLOCKQUOTE]='blockquote';i[c('ComposedBlockType').ORDERED_LIST_ITEM]='ordered-list-item';i[c('ComposedBlockType').UNORDERED_LIST_ITEM]='unordered-list-item';i[c('ComposedBlockType').CODE]='code-block';i[c('ComposedBlockType').HEADER_ONE]='header-one';i[c('ComposedBlockType').HEADER_TWO]='header-two';i[c('ComposedBlockType').MEDIA]='media';i[c('ComposedBlockType').PULLQUOTE]='pullquote';var j={};j[c('ComposedInlineStyle').BOLD]='BOLD';j[c('ComposedInlineStyle').CODE]='CODE';j[c('ComposedInlineStyle').ITALIC]='ITALIC';j[c('ComposedInlineStyle').STRIKETHROUGH]='STRIKETHROUGH';j[c('ComposedInlineStyle').UNDERLINE]='UNDERLINE';f.exports=h;},null);
__d('DraftStringKey',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={stringify:function(i){return '_'+String(i);},unstringify:function(i){return i.slice(1);}};f.exports=h;},null);
__d('encodeEntityRanges',['DraftStringKey','UnicodeUtils'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('UnicodeUtils').strlen;function i(j,k){var l=[];j.findEntityRanges(function(m){return !!m.getEntity();},function(m,n){var o=j.getText(),p=j.getEntityAt(m);l.push({offset:h(o.slice(0,m)),length:h(o.slice(m,n)),key:Number(k[c('DraftStringKey').stringify(p)])});});return l;}f.exports=i;},null);
__d('encodeInlineStyleRanges',['DefaultDraftInlineStyle','UnicodeUtils','findRangesImmutable'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=function(m,n){return m===n;},i=function(m){return !!m;},j=[];function k(m,n,o){var p=[],q=n.map(function(r){return r.has(o);}).toList();c('findRangesImmutable')(q,h,i,function(r,s){var t=m.getText();p.push({offset:c('UnicodeUtils').strlen(t.slice(0,r)),length:c('UnicodeUtils').strlen(t.slice(r,s)),style:o});});return p;}function l(m){var n=m.getCharacterList().map(function(q){return q.getStyle();}).toList(),o=Object.keys(c('DefaultDraftInlineStyle')),p=o.map(function(q){return k(m,n,q);});return Array.prototype.concat.apply(j,p);}f.exports=l;},null);
__d('convertFromDraftStateToRaw',['DraftEntity','DraftStringKey','encodeEntityRanges','encodeInlineStyleRanges'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(j){var k=0,l={},m=[];j.getBlockMap().forEach(function(p,q){p.findEntityRanges(function(r){return r.getEntity()!==null;},function(r){var s=c('DraftStringKey').stringify(p.getEntityAt(r));if(!l.hasOwnProperty(s))l[s]=''+k++;});m.push({key:q,text:p.getText(),type:p.getType(),depth:i(p)?p.getDepth():0,inlineStyleRanges:c('encodeInlineStyleRanges')(p),entityRanges:c('encodeEntityRanges')(p,l)});});var n=Object.keys(l),o={};n.forEach(function(p,q){var r=c('DraftEntity').get(c('DraftStringKey').unstringify(p));o[q]={type:r.getType(),mutability:r.getMutability(),data:r.getData()};});return {entityMap:o,blocks:m};}function i(j){var k=j.getType();return k==='ordered-list-item'||k==='unordered-list-item';}f.exports=h;},null);
__d('encodeBlocks',['ComposedBlockType','ComposedEntityType','ComposedInlineStyle','convertFromDraftStateToRaw','mapObject','nullthrows'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(k){var l=c('convertFromDraftStateToRaw')(k),m=l.blocks,n=l.entityMap,o=m.map(function(q){var r=q.key,s=q.type,t=q.text,u=q.depth,v=q.inlineStyleRanges,w=q.entityRanges;return {key:c('nullthrows')(r),type:i[s],text:t,depth:c('nullthrows')(u),inlineStyleRanges:c('nullthrows')(v).map(function(x){return babelHelpers['extends']({},x,{style:j[x.style]});}),entityRanges:c('nullthrows')(w)};}),p=c('mapObject')(n,function(q){var r=q.data,s=null,t=undefined;if(typeof r==='object'){s=r.id;t=babelHelpers.objectWithoutProperties(r,['id']);if(Object.keys(t).length===0){t=undefined;}else t=c('mapObject')(t,function(u){return u==null?'':String(u);});}return {id:s||null,type:c('ComposedEntityType')[q.type],data:t};});return {blocks:o,entityMap:p};}var i={unstyled:c('ComposedBlockType').UNSTYLED,paragraph:c('ComposedBlockType').PARAGRAPH,blockquote:c('ComposedBlockType').BLOCKQUOTE,'ordered-list-item':c('ComposedBlockType').ORDERED_LIST_ITEM,'unordered-list-item':c('ComposedBlockType').UNORDERED_LIST_ITEM,'code-block':c('ComposedBlockType').CODE,'header-one':c('ComposedBlockType').HEADER_ONE,'header-two':c('ComposedBlockType').HEADER_TWO,media:c('ComposedBlockType').MEDIA,pullquote:c('ComposedBlockType').PULLQUOTE,'header-three':c('ComposedBlockType').HEADER_TWO,'header-four':c('ComposedBlockType').HEADER_TWO,'header-five':c('ComposedBlockType').HEADER_TWO,'header-six':c('ComposedBlockType').HEADER_TWO},j={BOLD:c('ComposedInlineStyle').BOLD,CODE:c('ComposedInlineStyle').CODE,ITALIC:c('ComposedInlineStyle').ITALIC,STRIKETHROUGH:c('ComposedInlineStyle').STRIKETHROUGH,UNDERLINE:c('ComposedInlineStyle').UNDERLINE};f.exports=h;},null);
__d('RichMediaRichFormatText',['ContentState','immutable','decodeBlocks','encodeBlocks','RichMediaEditorConstants'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('immutable').Record,k=c('RichMediaEditorConstants').EDITOR_FONT_FAMILIIES,l=c('RichMediaEditorConstants').EDITOR_LINE_HEIGHT,m=c('RichMediaEditorConstants').EDITOR_DEFAULT_LINE_HEIGHT,n={id:'',composedText:{entityMap:{},blocks:[]},textAlignment:'center',textColor:'#000',fontSize:15,fontFamily:k[0],lineHeight:m},o=j(n);h=babelHelpers.inherits(p,o);i=h&&h.prototype;p.create=function(q,r,s,t,u,v){return new p({composedText:c('encodeBlocks')(q),textAlignment:r,textColor:s,fontSize:t,fontFamily:u,lineHeight:v});};p.createDefault=function(){return p.create(c('ContentState').createFromText('Write something...'),'center','#777',15,k[0],m);};p.createFromObject=function(q){var r=q.fontFamily;if(k.indexOf(r)===-1)r=k[0];var s=q.lineHeight;if(l.indexOf(s)===-1)s=m;return new p({composedText:q.composedText,textAlignment:q.textAlignment,textColor:q.textColor,fontSize:q.fontSize,fontFamily:r,lineHeight:s});};p.getPlainTextFromComposedText=function(q){var r=c('decodeBlocks')(q.blocks,q.entityMap);return r.map(function(s){return s.text;}).join();};function p(){h.apply(this,arguments);}f.exports=p;},null);
__d('RichMediaButtonElement',['immutable','InstantShoppingDocumentElementType','RichMediaEditorUtil','RichMediaRichFormatText'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('immutable').Record,k=40,l={id:'',name:'',type:c('InstantShoppingDocumentElementType').BUTTON,index:0,expanded:false,buttonColor:'#000',isFilled:false,isFixedToBottom:false,link:'',richFormatText:c('RichMediaRichFormatText').createDefault()},m=j(l);h=babelHelpers.inherits(n,m);i=h&&h.prototype;n.create=function(o,p,q,r,s,t,u,v){return new n({index:o,name:p,type:c('InstantShoppingDocumentElementType').BUTTON,expanded:q,buttonColor:r,isFilled:s,isFixedToBottom:t,link:u,richFormatText:v});};n.createDefault=function(o){return n.create(o,'Button',true,'#000',false,false,'',c('RichMediaRichFormatText').createDefault());};n.createFromObject=function(o){return n.create(o.index,o.name,o.expanded,o.buttonColor,o.isFilled,o.isFixedToBottom,o.link,c('RichMediaRichFormatText').createFromObject(o.richFormatText));};n.validate=function(o){if(!o.link||!c('RichMediaEditorUtil').isValidURL(o.link))return {isValid:false,errorMsg:'Invalid Link URL'};var p=c('RichMediaRichFormatText').getPlainTextFromComposedText(o.richFormatText.composedText);if(p.length>k)return {isValid:false,errorMsg:'Button text too long'};return {isValid:true,errorMsg:''};};function n(){h.apply(this,arguments);}f.exports=n;},null);
__d('RichMediaCarouselItem',['immutable','RichMediaEditorUtil','AsyncUploadRequest'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('immutable').Record,k={id:'',index:0,photo:null,name:'',description:null,link:null,uploadStatus:null,uploadRequest:null},l=j(k);h=babelHelpers.inherits(m,l);i=h&&h.prototype;m.create=function(n,o,p,q,r,s,t,u){return new m({id:n,index:o,photo:p,name:q,description:r,link:s,uploadStatus:t,uploadRequest:u});};m.createDefault=function(n,o,p){return m.create(n,o,null,'',null,null,null,p);};m.createFromObject=function(n){return m.create(n.id||n.name+'_'+Date.now(),n.index,n.photo,n.name,n.description,n.link,n.uploadRequest);};m.validate=function(n){if(!n.photo)return {isValid:false,errorMsg:'Missing photo'};if(n.link&&!c('RichMediaEditorUtil').isValidURL(n.link))return {isValid:false,errorMsg:'Invalid Link URL'};if(n.uploadStatus&&n.uploadStatus.isUploading!==false)return {isValid:false,errorMsg:''};return {isValid:true,errorMsg:''};};function m(){h.apply(this,arguments);}f.exports=m;},null);
__d('RichMediaElement',['immutable'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('immutable').Record;h=babelHelpers.inherits(k,j({id:'',index:-1,name:'',type:-1,expanded:false}));i=h&&h.prototype;function k(){h.apply(this,arguments);}f.exports=k;},null);
__d('RichMediaCarouselElement',['immutable','InstantShoppingDocumentElementType','RichMediaCarouselItem','AsyncUploadRequest','RichMediaElement'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('immutable').Record,k={id:'',name:'',type:c('InstantShoppingDocumentElementType').SLIDESHOW,index:0,expanded:false,layout:'fit_to_width',items:[],selectedItemIndex:0,addFile:function(){return null;},onFileProgress:function(){},onFileSuccess:function(){},onFileError:function(){}},l=j(k);h=babelHelpers.inherits(m,l);i=h&&h.prototype;m.create=function(n,o,p,q,r,s){return new m({index:n,name:o,type:c('InstantShoppingDocumentElementType').SLIDESHOW,expanded:p,layout:q,items:r,selectedItemIndex:s});};m.createDefault=function(n){return m.create(n,'Carousel',true,'fit_to_width',[],0);};m.createFromObject=function(n){var o=[],p=0;n.items.forEach(function(r){if(r){var s=c('RichMediaCarouselItem').createFromObject(r);o.push(s.set('index',p));p++;}});var q=n.selectedItemIndex||n.selectedItemIndex===0?n.selectedItemIndex:0;q=Math.min(Math.max(0,q),o.length-1);return m.create(n.index,n.name,n.expanded,n.layout,o,q);};m.validate=function(n){if(n.items.length<=1)return {isValid:false,errorMsg:'Upload at least 2 images to create a carousel'};for(var o=0;o<n.items.length;++o){var p=n.items[o],q=c('RichMediaCarouselItem').validate(p);if(!q.isValid)return {isValid:false,errorMsg:'Item '+(o+1)+' '+q.errorMsg};}var r=n.items[0].photo.height,s=n.items[0].photo.width;for(o=0;o<n.items.length;++o){var t=n.items[o].photo;if(t.height!=r||t.width!=s)return {isValid:false,errorMsg:'Images must be the same size'};}return {isValid:true,errorMsg:''};};m.prototype.addFile=function(n,o){this.items.push(c('RichMediaCarouselItem').createDefault(n,this.items.length,o));return this;};m.prototype.replaceFile=function(n,o){var p=this.items.findIndex(function(q){return q.id===n;});if(p<0)return this;this.items[p]=this.items[p].set('uploadStatus',{isUploading:true,percentage:0});return this;};m.prototype.onFileProgress=function(n,o){var p=this.items.findIndex(function(q){return q.id===n;});this.items[p]=this.items[p].set('uploadStatus',{isUploading:true,percentage:o});return this;};m.prototype.onFileSuccess=function(n,o){var p=this.items.findIndex(function(q){return q.id===n;});this.items[p]=this.items[p].set('uploadStatus',{isUploading:false}).set('photo',o.payload.photo);return this;};m.prototype.onFileError=function(n){var o=this.items.findIndex(function(p){return p.id===n;});this.items[o]=this.items[o].set('uploadStatus',{isUploading:false});return this;};function m(){h.apply(this,arguments);}f.exports=m;},null);
__d('RichMediaEditorActionTypes',['keyMirror'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirror')({SET_DOCUMENT_NAME:true,SET_DOCUMENT_THEME:true,SET_DOCUMENT_EDIT_STATE:true,ADD_DOCUMENT_ELEMENT:true,ADD_FILES_TO_DOCUMENT_ELEMENT:true,REPLACE_FILE_IN_DOCUMENT:true,EDIT_DOCUMENT_ELEMENT:true,MOVE_ELEMENT_UP:true,MOVE_ELEMENT_DOWN:true,DELETE_ELEMENT:true,CREATE_DEFAULT_DOCUMENT:true,SET_PREVIEW_FAILED:true,SET_SAVE_FAILED:true,SET_SENDING_PREVIEW:true,SET_DIALOG_SHOWN:true,SET_DIALOG_CANVAS:true,SET_DOCUMENT_URL_DIALOG_SHOWN:true,LOAD_DOCUMENT:true,SELECT_ELEMENT_TO_ADD:true,DESELECT_ELEMENT_TO_ADD:true,ADD_ELEMENTS_SELECTED:true,SET_ADD_COMPONENT_DIALOG_SHOWN:true,SET_USE_CUSTOMIZE_THEME_COLOR:true,SET_CUSTOMIZE_THEME_COLOR:true,SET_SELECTED_CANVAS:true,SET_UNPUBLISHED_CANVAS:true,RESET_UNPUBLISHED_CANVAS:true});},null);
__d('RichMediaEditorDispatcher',['ReactDispatcher_DEPRECATED'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ReactDispatcher_DEPRECATED'));i=h&&h.prototype;function j(){i.constructor.call(this);this.dispatch=this.dispatch.bind(this);}f.exports=new j();},null);
__d('RichMediaEditorActions',['RichMediaEditorActionTypes','RichMediaEditorDispatcher'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports={setDocumentName:function(h){c('RichMediaEditorDispatcher').dispatch({data:{name:h},type:c('RichMediaEditorActionTypes').SET_DOCUMENT_NAME});},setDocumentTheme:function(h){c('RichMediaEditorDispatcher').dispatch({data:{theme:h},type:c('RichMediaEditorActionTypes').SET_DOCUMENT_THEME});},setDocumentEditState:function(h){c('RichMediaEditorDispatcher').dispatch({data:{editState:h},type:c('RichMediaEditorActionTypes').SET_DOCUMENT_EDIT_STATE});},addDocumentElement:function(h){c('RichMediaEditorDispatcher').dispatch({data:{element:h},type:c('RichMediaEditorActionTypes').ADD_DOCUMENT_ELEMENT});},addFilesToDocumentElement:function(h,i,j){c('RichMediaEditorDispatcher').dispatch({data:{element:h,pageID:i,files:j},type:c('RichMediaEditorActionTypes').ADD_FILES_TO_DOCUMENT_ELEMENT});},replaceFileInDocumentElement:function(h,i,j,k){c('RichMediaEditorDispatcher').dispatch({data:{element:h,pageID:i,itemID:j,files:k},type:c('RichMediaEditorActionTypes').REPLACE_FILE_IN_DOCUMENT});},editDocumentElement:function(h){c('RichMediaEditorDispatcher').dispatch({data:{element:h},type:c('RichMediaEditorActionTypes').EDIT_DOCUMENT_ELEMENT});},moveElementUp:function(h){c('RichMediaEditorDispatcher').dispatch({data:{element:h},type:c('RichMediaEditorActionTypes').MOVE_ELEMENT_UP});},moveElementDown:function(h){c('RichMediaEditorDispatcher').dispatch({data:{element:h},type:c('RichMediaEditorActionTypes').MOVE_ELEMENT_DOWN});},deleteElement:function(h){c('RichMediaEditorDispatcher').dispatch({data:{element:h},type:c('RichMediaEditorActionTypes').DELETE_ELEMENT});},createDefaultDocument:function(){c('RichMediaEditorDispatcher').dispatch({data:{},type:c('RichMediaEditorActionTypes').CREATE_DEFAULT_DOCUMENT});},setPreviewFailed:function(h){c('RichMediaEditorDispatcher').dispatch({data:{previewFailed:h},type:c('RichMediaEditorActionTypes').SET_PREVIEW_FAILED});},setSendingPreview:function(h){c('RichMediaEditorDispatcher').dispatch({data:{sendingPreview:h},type:c('RichMediaEditorActionTypes').SET_SENDING_PREVIEW});},setSaveFailed:function(h){c('RichMediaEditorDispatcher').dispatch({data:{saveFailed:h},type:c('RichMediaEditorActionTypes').SET_SAVE_FAILED});},setDialogShown:function(h,i){c('RichMediaEditorDispatcher').dispatch({data:{dialogID:h,dialogShown:i},type:c('RichMediaEditorActionTypes').SET_DIALOG_SHOWN});},setDialogCanvas:function(h,i){c('RichMediaEditorDispatcher').dispatch({data:{dialogID:h,canvas:i},type:c('RichMediaEditorActionTypes').SET_DIALOG_CANVAS});},setDocumentURLDialogShown:function(h){c('RichMediaEditorDispatcher').dispatch({data:{dialogShown:h},type:c('RichMediaEditorActionTypes').SET_DOCUMENT_URL_DIALOG_SHOWN});},loadDocument:function(h,i,j){c('RichMediaEditorDispatcher').dispatch({data:{documentName:h,documentTheme:i,elementsPayload:j},type:c('RichMediaEditorActionTypes').LOAD_DOCUMENT});},selectElementToAdd:function(h){c('RichMediaEditorDispatcher').dispatch({data:{elementTypeName:h},type:c('RichMediaEditorActionTypes').SELECT_ELEMENT_TO_ADD});},deselectElementToAdd:function(h){c('RichMediaEditorDispatcher').dispatch({data:{elementTypeName:h},type:c('RichMediaEditorActionTypes').DESELECT_ELEMENT_TO_ADD});},addElementsSelected:function(){c('RichMediaEditorDispatcher').dispatch({data:{},type:c('RichMediaEditorActionTypes').ADD_ELEMENTS_SELECTED});},setAddComponentDialogShown:function(h){c('RichMediaEditorDispatcher').dispatch({data:{dialogShown:h},type:c('RichMediaEditorActionTypes').SET_ADD_COMPONENT_DIALOG_SHOWN});},setUseCustomizeThemeColor:function(h){c('RichMediaEditorDispatcher').dispatch({data:{useCustomizeThemeColor:h},type:c('RichMediaEditorActionTypes').SET_USE_CUSTOMIZE_THEME_COLOR});},setCustomizeThemeColor:function(h){c('RichMediaEditorDispatcher').dispatch({data:{customizeThemeColor:h},type:c('RichMediaEditorActionTypes').SET_CUSTOMIZE_THEME_COLOR});},setUnpublishedCanvas:function(h){c('RichMediaEditorDispatcher').dispatch({data:{unpublishedCanvas:h},type:c('RichMediaEditorActionTypes').SET_UNPUBLISHED_CANVAS});},resetUnpublishedCanvas:function(){c('RichMediaEditorDispatcher').dispatch({type:c('RichMediaEditorActionTypes').RESET_UNPUBLISHED_CANVAS});},setSelectedCanvas:function(h){c('RichMediaEditorDispatcher').dispatch({data:{selectedCanvas:h},type:c('RichMediaEditorActionTypes').SET_SELECTED_CANVAS});}};},null);
__d('RichMediaElementTypeConstant',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports={TYPE_NAMES:{BUTTON:'button',CAROUSEL:'carousel',HEADER:'header',PHOTO:'photo',TEXT:'text',VIDEO:'video',PRODUCT_SET:'product_set'}};},null);
__d('RichMediaEditorAddComponentDialog.react',['cx','fbt','Grid.react','LayerFadeOnHide','React','ReactLayeredComponentMixin','XUIDialog.react','XUIDialogBody.react','XUIDialogCancelButton.react','XUIDialogFooter.react','XUIDialogOkayButton.react','XUIDialogTitle.react','RichMediaElementTypeConstant'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('RichMediaElementTypeConstant').TYPE_NAMES,l=494,m=c('React').createClass({displayName:'RichMediaEditorAddComponentDialog',mixins:[c('ReactLayeredComponentMixin')],propTypes:{canAddHeader:j.bool.isRequired,selectedElementToAdd:j.object.isRequired,onAddSelectedElement:j.func.isRequired,onDeselectElementToAdd:j.func.isRequired,onSelectElementToAdd:j.func.isRequired,onToggle:j.func.isRequired,canAddProductSet:j.bool},renderLayers:function(){var n=[{typeName:k.BUTTON,icon:'button',text:i._("Button"),selected:false},{typeName:k.CAROUSEL,icon:'carousel',text:i._("Carousel"),selected:false},{typeName:k.PHOTO,icon:'photo',text:i._("Photo"),selected:false},{typeName:k.TEXT,icon:'text',text:i._("Text block"),selected:false},{typeName:k.VIDEO,icon:'video',text:i._("Video"),selected:false}];if(this.props.canAddHeader)n.push({typeName:k.HEADER,icon:'header',text:i._("Header"),selected:false});if(this.props.canAddProductSet)n.push({typeName:k.PRODUCT_SET,icon:'product_set',text:i._("Product Set"),selected:false});n.map(function(o){if(o.typeName in this.props.selectedElementToAdd&&this.props.selectedElementToAdd[o.typeName]>0)o.selected=true;}.bind(this));return {dialog:c('React').createElement(c('XUIDialog.react'),{behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},shown:this.props.dialogShown,width:l,onToggle:this.props.onToggle},c('React').createElement(c('XUIDialogTitle.react'),null,c('React').createElement('span',null,i._("Select components to add"))),c('React').createElement(c('XUIDialogBody.react'),{className:"_3lxq",useCustomPadding:true},c('React').createElement(c('Grid.react'),{alignh:'center',cols:3},n.map(function(o){return (c('React').createElement('div',{className:"_3lxs",key:o.typeName,onClick:o.selected?function(p){return this.props.onDeselectElementToAdd(o.typeName);}.bind(this):function(p){return this.props.onSelectElementToAdd(o.typeName);}.bind(this)},c('React').createElement('div',{className:(o.selected?"_4qyh":'')+(!o.selected?' '+"_4qyi":'')},c('React').createElement('img',{height:48,src:'/images/ads/rich_media/icons/'+o.icon+(o.selected?'_selected.png':'_unselected.png'),width:64}),c('React').createElement('div',{className:(o.selected?"_4qyj":'')+(!o.selected?' '+"_4qyk":'')},o.text))));}.bind(this)))),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogCancelButton.react'),null),c('React').createElement(c('XUIDialogOkayButton.react'),{action:'button',use:'confirm',onClick:this.props.onAddSelectedElement})))};},render:function(){return null;}});f.exports=m;},null);
__d('CanvasCreationWaterfallTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:CanvasCreationWaterfallLoggerConfig',this.$CanvasCreationWaterfallTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:CanvasCreationWaterfallLoggerConfig',this.$CanvasCreationWaterfallTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$CanvasCreationWaterfallTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$CanvasCreationWaterfallTypedLogger1=babelHelpers['extends']({},this.$CanvasCreationWaterfallTypedLogger1,j);return this;};h.prototype.setCanvasID=function(j){this.$CanvasCreationWaterfallTypedLogger1.canvas_id=j;return this;};h.prototype.setCanvasName=function(j){this.$CanvasCreationWaterfallTypedLogger1.canvas_name=j;return this;};h.prototype.setEditorLineHeight=function(j){this.$CanvasCreationWaterfallTypedLogger1.editor_line_height=j;return this;};h.prototype.setEditorPhotoHeight=function(j){this.$CanvasCreationWaterfallTypedLogger1.editor_photo_height=j;return this;};h.prototype.setEditorPhotoWidth=function(j){this.$CanvasCreationWaterfallTypedLogger1.editor_photo_width=j;return this;};h.prototype.setEditorURL=function(j){this.$CanvasCreationWaterfallTypedLogger1.editor_url=j;return this;};h.prototype.setElementPayload=function(j){this.$CanvasCreationWaterfallTypedLogger1.element_payload=j;return this;};h.prototype.setElementType=function(j){this.$CanvasCreationWaterfallTypedLogger1.element_type=j;return this;};h.prototype.setErrorCode=function(j){this.$CanvasCreationWaterfallTypedLogger1.error_code=j;return this;};h.prototype.setEventName=function(j){this.$CanvasCreationWaterfallTypedLogger1.event_name=j;return this;};h.prototype.setPageID=function(j){this.$CanvasCreationWaterfallTypedLogger1.page_id=j;return this;};h.prototype.setPageName=function(j){this.$CanvasCreationWaterfallTypedLogger1.page_name=j;return this;};h.prototype.setPublishedURL=function(j){this.$CanvasCreationWaterfallTypedLogger1.published_url=j;return this;};h.prototype.setSource=function(j){this.$CanvasCreationWaterfallTypedLogger1.source=j;return this;};h.prototype.setVC=function(j){this.$CanvasCreationWaterfallTypedLogger1.vc=j;return this;};h.prototype.setVideoID=function(j){this.$CanvasCreationWaterfallTypedLogger1.video_id=j;return this;};h.prototype.setViewerID=function(j){this.$CanvasCreationWaterfallTypedLogger1.viewer_id=j;return this;};var i={canvas_id:true,canvas_name:true,editor_line_height:true,editor_photo_height:true,editor_photo_width:true,editor_url:true,element_payload:true,element_type:true,error_code:true,event_name:true,page_id:true,page_name:true,published_url:true,source:true,vc:true,video_id:true,viewer_id:true};f.exports=h;},null);
__d('RichMediaDocumentThemeConstants',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports={WHITE:'FFFFFFFF',BLACK:'FF000000'};},null);
__d('RichMediaEditorUploader',['ActorURI','AsyncUploadRequest','XCanvasPhotoUploadController'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={upload:function(i,j,k){var l=c('ActorURI').create(c('XCanvasPhotoUploadController').getURIBuilder().getURI(),i),m=new (c('AsyncUploadRequest'))(l).setAllowCrossOrigin(false).setFiles({file:j}),n=[];n.push(m.subscribe('progress',function(o,p){var event=p.getProgressEvent();if(event.lengthComputable)k.onProgress(p.getFile(),event.loaded/event.total*100);}));n.push(m.subscribe('success',function(o,p){k.onSuccess(p.getFile(),p.getResponse());}));n.push(m.subscribe('error',function(o,p){k.onError(p.getFile());}));n.push(m.subscribe('complete',function(o,p){while(n.length)n.pop().unsubscribe();}));m.send();return m;}};f.exports=h;},null);
__d('CanvasColorUtils',['Assert'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(j){var k=Math.floor(j*255/100).toString(16);if(k.length===1)k='0'+k;return k;}function i(j){c('Assert').isTrue(j.length<=2,'invalid hex string: '+j);return Math.ceil(parseInt(j,16)/255*100);}f.exports={convertColorWithOpacityToARGB:function(j){var k=j.color;c('Assert').isTrue(6===k.length,'unexpected length string: '+k);var l=h(j.opacity)+k;c('Assert').isTrue(l.length===8,'generated invalid argb: '+l);return l;},convertARGBToColorWithOpacity:function(j){c('Assert').isTrue(j.length===8,'Got argb: '+j);return {color:j.slice(2),opacity:i(j.slice(0,2))};},convertRGBtoCSSColorWithOpacity:function(j,k){c('Assert').isTrue(6===j.length,'unexpected length string: '+j);return 'rgba('+parseInt(j.slice(0,2),16)+','+parseInt(j.slice(2,4),16)+','+parseInt(j.slice(4,6),16)+','+k+')';}};},null);
__d('RichMediaHeaderElement',['CanvasColorUtils','immutable','InstantShoppingDocumentElementType'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('immutable').Record,k={id:'',name:'',type:c('InstantShoppingDocumentElementType').HEADER,index:0,expanded:false,fixToTop:true,photo:null,backgroundColor:null,uploadStatus:null},l=j(k);h=babelHelpers.inherits(m,l);i=h&&h.prototype;m.create=function(n,o,p,q,r,s){return new m({name:n,type:c('InstantShoppingDocumentElementType').HEADER,expanded:p,index:o,fixToTop:true,photo:q,backgroundColor:r,uploadStatus:s});};m.createDefault=function(n){return m.create('Header',n,true,null,'FFFFFFFF',null);};m.createFromObject=function(n){return m.create(n.name,n.index,n.expanded,n.photo,n.backgroundColor);};m.validate=function(n){if(!n.photo)return {isValid:false,errorMsg:'Missing photo'};if(!n.backgroundColor)return {isValid:false,errorMsg:'Missing background color'};if(n.uploadStatus&&n.uploadStatus.isUploading!==false)return {isValid:false,errorMsg:''};return {isValid:true,errorMsg:''};};m.prototype.isOpaque=function(){if(!this.backgroundColor)return true;var n=c('CanvasColorUtils').convertARGBToColorWithOpacity(this.backgroundColor);if(n.opacity===100)return true;return false;};function m(){h.apply(this,arguments);}f.exports=m;},null);
__d('RichMediaPhotoElement',['immutable','InstantShoppingDocumentElementType','RichMediaEditorUtil'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('immutable').Record,k={id:'',name:'',type:c('InstantShoppingDocumentElementType').PHOTO,index:0,expanded:false,layout:'fit_to_width',description:null,link:null,photo:null,uploadStatus:null},l=j(k);h=babelHelpers.inherits(m,l);i=h&&h.prototype;m.create=function(n,o,p,q,r,s,t,u){return new m({name:n,type:c('InstantShoppingDocumentElementType').PHOTO,index:o,expanded:p,layout:q,description:r,link:s,photo:t,uploadStatus:u});};m.createDefault=function(n){return m.create('Photo',n,true,'fit_to_width',null,null,null,null);};m.createFromObject=function(n){return m.create(n.name,n.index,n.expanded,n.layout,n.description,n.link,n.photo);};m.validate=function(n){if(!n.photo)return {isValid:false,errorMsg:'Missing photo'};if(n.link&&!c('RichMediaEditorUtil').isValidURL(n.link))return {isValid:false,errorMsg:'Invalid Link URL'};if(n.uploadStatus&&n.uploadStatus.isUploading!==false)return {isValid:false,errorMsg:''};return {isValid:true,errorMsg:''};};function m(){h.apply(this,arguments);}f.exports=m;},null);
__d('RichMediaProductSetElement',['immutable','InstantShoppingDocumentElementType'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('immutable').Record,k={id:'',name:'',type:c('InstantShoppingDocumentElementType').ELEMENT_GROUP,index:0,expanded:false,catalogID:null,setID:null,limit:0},l=j(k);h=babelHelpers.inherits(m,l);i=h&&h.prototype;m.create=function(n,o,p,q,r,s){return new m({name:n,index:o,type:c('InstantShoppingDocumentElementType').ELEMENT_GROUP,expanded:p,catalogID:q,setID:r,limit:s});};m.createDefault=function(n){return m.create('Product',n,true,null,null,40);};m.createFromObject=function(n){return m.create(n.name,n.index,n.expanded,n.catalogID,n.setID,n.limit);};m.validate=function(n){if(n.catalogID==null)return {isValid:false,errorMsg:'Missing catalog ID'};if(n.setID==null)return {isValid:false,errorMsg:'Please choose or create a Product Set from your Product Catalog'};if(n.limit<=0)return {isValid:false,errorMsg:'Invalid maximum products count'};return {isValid:true,errorMsg:''};};function m(){h.apply(this,arguments);}f.exports=m;},null);
__d('RichMediaTextElement',['immutable','InstantShoppingDocumentElementType','RichMediaRichFormatText','RichMediaEditorConstants'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('RichMediaEditorConstants').EDITOR_DEFAULT_LINE_HEIGHT,k=c('immutable').Record,l={id:'',name:'',type:c('InstantShoppingDocumentElementType').RICH_TEXT,index:0,expanded:false,richFormatText:{composedText:{entityMap:{},blocks:[]},textAlignment:'center',textColor:'#000',fontSize:12,fontFamily:'sans-serif',lineHeight:j}},m=k(l);h=babelHelpers.inherits(n,m);i=h&&h.prototype;n.create=function(o,p,q,r){return new n({index:o,name:p,type:c('InstantShoppingDocumentElementType').RICH_TEXT,expanded:q,richFormatText:r});};n.createDefault=function(o){return n.create(o,'Text',true,c('RichMediaRichFormatText').createDefault());};n.createFromObject=function(o){return n.create(o.index,o.name,o.expanded,c('RichMediaRichFormatText').createFromObject(o.richFormatText));};n.validate=function(o){var p=c('RichMediaRichFormatText').getPlainTextFromComposedText(o.richFormatText.composedText);if(p.length==0)return {isValid:false,errorMsg:'Empty text block is not allowed'};return {isValid:true,errorMsg:''};};function n(){h.apply(this,arguments);}f.exports=n;},null);
__d('RichMediaVideoElement',['immutable','InstantShoppingDocumentElementType'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('immutable').Record,k={id:'',name:'',type:c('InstantShoppingDocumentElementType').VIDEO,index:0,expanded:false,layout:'fit_to_width',video:null,uploadStatus:null},l=j(k);h=babelHelpers.inherits(m,l);i=h&&h.prototype;m.create=function(n,o,p,q,r,s){return new m({name:n,type:c('InstantShoppingDocumentElementType').VIDEO,expanded:p,index:o,layout:q?q:'fit_to_width',video:r,uploadStatus:s});};m.createDefault=function(n){return m.create('Video',n,true,'fit_to_width',null,null);};m.createFromObject=function(n){return m.create(n.name,n.index,n.expanded,n.layout,n.video);};m.validate=function(n){if(!n.video)return {isValid:false,errorMsg:'Missing video'};if(n.uploadStatus&&(n.uploadStatus.isUploading!==false||n.uploadStatus.isEncoding!==false))return {isValid:false,errorMsg:''};return {isValid:true,errorMsg:''};};function m(){h.apply(this,arguments);}f.exports=m;},null);
__d('RichMediaEditorStore',['fbt','invariant','CanvasCreationEvent','CanvasCreationWaterfallTypedLogger','FluxStore','InstantShoppingDocumentElementType','RichMediaEditorActionTypes','RichMediaEditorDispatcher','RichMediaEditorActions','RichMediaEditorUploader','RichMediaButtonElement','RichMediaCarouselElement','RichMediaHeaderElement','RichMediaPhotoElement','RichMediaProductSetElement','RichMediaTextElement','RichMediaVideoElement','AdsCanvasEditorEnums','RichMediaDocumentThemeConstants','RichMediaElementTypeConstant','Map'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('AdsCanvasEditorEnums').SaveStateEnum,m=c('RichMediaDocumentThemeConstants').WHITE,n=c('RichMediaDocumentThemeConstants').BLACK,o=c('RichMediaElementTypeConstant').TYPE_NAMES;j=babelHelpers.inherits(p,c('FluxStore'));k=j&&j.prototype;function p(q){k.constructor.call(this,q);this.$RichMediaEditorStore1='';this.$RichMediaEditorStore2=m;this.$RichMediaEditorStore3=[];this.$RichMediaEditorStore4=l.SAVED;this.$RichMediaEditorStore5=false;this.$RichMediaEditorStore6=false;this.$RichMediaEditorStore7=false;this.$RichMediaEditorStore8=false;this.$RichMediaEditorStore9=-1;this.$RichMediaEditorStore10={};this.$RichMediaEditorStore11=false;this.$RichMediaEditorStore12=false;this.$RichMediaEditorStore13=n;this.$RichMediaEditorStore14=0;}p.prototype.__onDispatch=function(q){var r=q.data,s;switch(q.type){case c('RichMediaEditorActionTypes').SET_DOCUMENT_NAME:this.$RichMediaEditorStore1=r.name;this.$RichMediaEditorStore4=l.UNSAVED;this.$RichMediaEditorStore9=-1;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_DOCUMENT_THEME:this.$RichMediaEditorStore2=r.theme;this.$RichMediaEditorStore4=l.UNSAVED;this.$RichMediaEditorStore9=-1;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_DOCUMENT_EDIT_STATE:this.$RichMediaEditorStore4=r.editState;this.__emitChange();break;case c('RichMediaEditorActionTypes').ADD_DOCUMENT_ELEMENT:if(r.element.type===c('InstantShoppingDocumentElementType').HEADER){var t=this.$RichMediaEditorStore3;for(var u=0;u<t.length;++u)t[u]=t[u].set('index',u+1);t.unshift(r.element.set('index',0));this.$RichMediaEditorStore9=0;}else{this.$RichMediaEditorStore3.push(r.element);this.$RichMediaEditorStore9=r.element.index;}this.$RichMediaEditorStore4=l.UNSAVED;this.__emitChange();break;case c('RichMediaEditorActionTypes').ADD_FILES_TO_DOCUMENT_ELEMENT:s=this.$RichMediaEditorStore15(r.files,r.pageID,this.getDocumentElement(r.element.id));this.$RichMediaEditorStore3[s.index]=s;this.$RichMediaEditorStore9=s.index;this.__emitChange();break;case c('RichMediaEditorActionTypes').REPLACE_FILE_IN_DOCUMENT:s=this.getDocumentElement(r.element.id);!(s.type===c('InstantShoppingDocumentElementType').SLIDESHOW)?i(0):undefined;var v=new (c('Map'))();v[r.files[0].name]=r.itemID;var w=c('RichMediaEditorUploader').upload(r.pageID,[r.files[0]],this.$RichMediaEditorStore16(s.id,v));s=s.replaceFile(r.itemID,w);this.$RichMediaEditorStore3[s.index]=s;this.$RichMediaEditorStore9=s.index;this.__emitChange();break;case c('RichMediaEditorActionTypes').EDIT_DOCUMENT_ELEMENT:var x=this.$RichMediaEditorStore3[r.element.index];if(x!=r.element&&x.expanded===r.element.expanded)this.$RichMediaEditorStore4=l.UNSAVED;this.$RichMediaEditorStore3[r.element.index]=r.element;this.$RichMediaEditorStore9=r.element.index;this.__emitChange();break;case c('RichMediaEditorActionTypes').MOVE_ELEMENT_UP:if(r.element.index>0){t=this.$RichMediaEditorStore3;var y=r.element.index,z=t[y].set('index',y-1),aa=t[y-1].set('index',y);if(aa.type!==c('InstantShoppingDocumentElementType').HEADER){t[y]=aa;t[y-1]=z;}this.$RichMediaEditorStore4=l.UNSAVED;this.$RichMediaEditorStore9=y-1;this.__emitChange();}break;case c('RichMediaEditorActionTypes').MOVE_ELEMENT_DOWN:if(r.element.index<this.$RichMediaEditorStore3.length-1&&r.element.type!==c('InstantShoppingDocumentElementType').HEADER){t=this.$RichMediaEditorStore3;y=r.element.index;z=t[y];var ba=t[y+1];t[y]=ba.set('index',y);t[y+1]=z.set('index',y+1);this.$RichMediaEditorStore4=l.UNSAVED;this.$RichMediaEditorStore9=y+1;this.__emitChange();}break;case c('RichMediaEditorActionTypes').DELETE_ELEMENT:t=this.$RichMediaEditorStore3;y=r.element.index;t.splice(y,1);for(u=y;u<t.length;++u)t[u]=t[u].set('index',u);this.$RichMediaEditorStore4=l.UNSAVED;this.$RichMediaEditorStore9=y>0?y-1:0;this.__emitChange();break;case c('RichMediaEditorActionTypes').CREATE_DEFAULT_DOCUMENT:this.$RichMediaEditorStore1=h._("Untitled Canvas");this.$RichMediaEditorStore3=[this.$RichMediaEditorStore17(c('RichMediaHeaderElement').createDefault(0)),this.$RichMediaEditorStore17(c('RichMediaPhotoElement').createDefault(1)),this.$RichMediaEditorStore17(c('RichMediaButtonElement').createDefault(2))];this.$RichMediaEditorStore4=l.UNSAVED;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_PREVIEW_FAILED:this.$RichMediaEditorStore5=r.previewFailed;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_SENDING_PREVIEW:this.$RichMediaEditorStore7=r.sendingPreview;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_SAVE_FAILED:this.$RichMediaEditorStore6=r.saveFailed;this.__emitChange();break;case c('RichMediaEditorActionTypes').LOAD_DOCUMENT:if(r.documentName)this.$RichMediaEditorStore1=r.documentName;if(r.documentTheme){this.$RichMediaEditorStore2=r.documentTheme;this.$RichMediaEditorStore12=r.documentTheme!==m&&r.documentTheme!==n;this.$RichMediaEditorStore13=this.$RichMediaEditorStore12?r.documentTheme:n;}if(r.elementsPayload)this.$RichMediaEditorStore18(r.elementsPayload);this.$RichMediaEditorStore4=l.SAVED;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_DOCUMENT_URL_DIALOG_SHOWN:this.$RichMediaEditorStore8=r.dialogShown;this.__emitChange();break;case c('RichMediaEditorActionTypes').SELECT_ELEMENT_TO_ADD:var ca=r.elementTypeName;if(ca in this.$RichMediaEditorStore10){this.$RichMediaEditorStore10[ca]++;}else this.$RichMediaEditorStore10[ca]=1;this.__emitChange();break;case c('RichMediaEditorActionTypes').DESELECT_ELEMENT_TO_ADD:ca=r.elementTypeName;if(ca in this.$RichMediaEditorStore10){this.$RichMediaEditorStore10[ca]--;if(this.$RichMediaEditorStore10[ca]<=0)delete this.$RichMediaEditorStore10[ca];}this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_ADD_COMPONENT_DIALOG_SHOWN:this.$RichMediaEditorStore11=r.dialogShown;this.__emitChange();break;case c('RichMediaEditorActionTypes').ADD_ELEMENTS_SELECTED:for(var da in o){ca=o[da];if(ca in this.$RichMediaEditorStore10&&this.$RichMediaEditorStore10[ca]>0){this.$RichMediaEditorStore19(ca);this.$RichMediaEditorStore4=l.UNSAVED;new (c('CanvasCreationWaterfallTypedLogger'))().setEventName(c('CanvasCreationEvent').ADD_ELEMENT).setPageID(r.pageID).setElementType(ca).log();}}this.$RichMediaEditorStore10={};this.$RichMediaEditorStore11=false;this.$RichMediaEditorStore9=this.$RichMediaEditorStore3.length-1;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_USE_CUSTOMIZE_THEME_COLOR:this.$RichMediaEditorStore12=r.useCustomizeThemeColor;if(r.useCustomizeThemeColor&&this.$RichMediaEditorStore1!==this.$RichMediaEditorStore13){this.$RichMediaEditorStore2=this.$RichMediaEditorStore13;this.$RichMediaEditorStore4=l.UNSAVED;}this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_CUSTOMIZE_THEME_COLOR:if(this.$RichMediaEditorStore12===false||this.$RichMediaEditorStore13!==r.customizeThemeColor){this.$RichMediaEditorStore13=r.customizeThemeColor;this.$RichMediaEditorStore2=r.customizeThemeColor;this.$RichMediaEditorStore12=true;this.$RichMediaEditorStore4=l.UNSAVED;}this.__emitChange();break;}};p.prototype.getDocumentName=function(){return this.$RichMediaEditorStore1;};p.prototype.getDocumentTheme=function(){return this.$RichMediaEditorStore2;};p.prototype.getDocumentEditState=function(){return this.$RichMediaEditorStore4;};p.prototype.getDocumentElement=function(q){return this.$RichMediaEditorStore3.find(function(r){return r.id===q;});};p.prototype.getDocumentElements=function(){return this.$RichMediaEditorStore3.slice();};p.prototype.getPreviewFailed=function(){return this.$RichMediaEditorStore5;};p.prototype.getSendingPreview=function(){return this.$RichMediaEditorStore7;};p.prototype.getSaveFailed=function(){return this.$RichMediaEditorStore6;};p.prototype.getDocumentURLDialogShown=function(){return this.$RichMediaEditorStore8;};p.prototype.getCurrentEditingElementIndex=function(){return this.$RichMediaEditorStore9;};p.prototype.getSelectedElementsToAdd=function(){return babelHelpers['extends']({},this.$RichMediaEditorStore10);};p.prototype.getShowAddComponentDialog=function(){return this.$RichMediaEditorStore11;};p.prototype.getHasHeaderElement=function(){var q=this.$RichMediaEditorStore3.filter(function(r){return r.type===c('InstantShoppingDocumentElementType').HEADER;});return q.length!==0;};p.prototype.getUseCustomizeThemeColor=function(){return this.$RichMediaEditorStore12;};p.prototype.getCustomizeThemeColor=function(){return this.$RichMediaEditorStore13;};p.prototype.$RichMediaEditorStore19=function(q){var r=this.$RichMediaEditorStore3,s=r.length,t=null;switch(q){case o.BUTTON:t=c('RichMediaButtonElement').createDefault(s);break;case o.CAROUSEL:t=c('RichMediaCarouselElement').createDefault(s);break;case o.HEADER:t=c('RichMediaHeaderElement').createDefault(s);break;case o.PHOTO:t=c('RichMediaPhotoElement').createDefault(s);break;case o.TEXT:t=c('RichMediaTextElement').createDefault(s);break;case o.VIDEO:t=c('RichMediaVideoElement').createDefault(s);break;case o.PRODUCT_SET:t=c('RichMediaProductSetElement').createDefault(s);break;}if(!t)return;t=this.$RichMediaEditorStore17(t);if(q===o.HEADER){for(var u=0;u<r.length;++u)r[u]=r[u].set('index',u+1);r.unshift(t.set('index',0));}else this.$RichMediaEditorStore3.push(t);};p.prototype.$RichMediaEditorStore18=function(q){this.$RichMediaEditorStore3=[];var r=JSON.parse(q);this.$RichMediaEditorStore14=r.length;for(var s=0;s<r.length;++s){var t=r[s];if(!t.expanded)t.expanded=false;switch(t.type){case c('InstantShoppingDocumentElementType').RICH_TEXT:t=c('RichMediaTextElement').createFromObject(t);break;case c('InstantShoppingDocumentElementType').PHOTO:t=c('RichMediaPhotoElement').createFromObject(t);break;case c('InstantShoppingDocumentElementType').VIDEO:t=c('RichMediaVideoElement').createFromObject(t);break;case c('InstantShoppingDocumentElementType').BUTTON:t=c('RichMediaButtonElement').createFromObject(t);break;case c('InstantShoppingDocumentElementType').SLIDESHOW:t=c('RichMediaCarouselElement').createFromObject(t);break;case c('InstantShoppingDocumentElementType').HEADER:t=c('RichMediaHeaderElement').createFromObject(t);break;case c('InstantShoppingDocumentElementType').ELEMENT_GROUP:t=c('RichMediaProductSetElement').createFromObject(t);break;}this.$RichMediaEditorStore3.push(this.$RichMediaEditorStore17(t));}};p.prototype.$RichMediaEditorStore17=function(q){return q.set('id',(++this.$RichMediaEditorStore14).toString());};p.prototype.$RichMediaEditorStore15=function(q,r,s){!(s.type===c('InstantShoppingDocumentElementType').SLIDESHOW)?i(0):undefined;var t,u=new (c('Map'))();for(var v=0,w=q.length;v<w;++v){t=q[v];u[t.name]=t.name+'_'+Date.now();}var x=this.$RichMediaEditorStore16(s.id,u);for(v=0;v<w;++v){t=q[v];var y=c('RichMediaEditorUploader').upload(r,[t],x);s=s.addFile(u[t.name],y);}return s;};p.prototype.$RichMediaEditorStore16=function(q,r){return {onProgress:function(s,t){var u=this.getDocumentElement(q);if(u&&u.onFileProgress){u=u.onFileProgress(r[s.name],t);if(u)c('RichMediaEditorActions').editDocumentElement(u);}}.bind(this),onSuccess:function(s,t){var u=this.getDocumentElement(q);if(u&&u.onFileSuccess){u=u.onFileSuccess(r[s.name],t);if(u)c('RichMediaEditorActions').editDocumentElement(u);}}.bind(this),onError:function(s){var t=this.getDocumentElement(q);if(t&&t.onFileError){t=t.onFileError(r[s.name]);if(t)c('RichMediaEditorActions').editDocumentElement(t);}}.bind(this)};};f.exports=new p(c('RichMediaEditorDispatcher'));},null);
__d('RichMediaEditorAddComponentDialogContainer.react',['FluxContainer','FluxStore','React','RichMediaEditorActions','RichMediaEditorAddComponentDialog.react','RichMediaEditorStore'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.getStores=function(){return [c('RichMediaEditorStore')];};j.calculateState=function(){return {dialogShown:c('RichMediaEditorStore').getShowAddComponentDialog(),hasHeaderElement:c('RichMediaEditorStore').getHasHeaderElement(),selectedElementToAdd:c('RichMediaEditorStore').getSelectedElementsToAdd()};};j.prototype.render=function(){return (c('React').createElement(c('RichMediaEditorAddComponentDialog.react'),{canAddHeader:!this.state.hasHeaderElement,canAddProductSet:this.props.canAddProductSet,dialogShown:this.state.dialogShown,selectedElementToAdd:this.state.selectedElementToAdd,onAddSelectedElement:this.$RichMediaEditorAddComponentDialogContainer1,onDeselectElementToAdd:this.$RichMediaEditorAddComponentDialogContainer2,onSelectElementToAdd:this.$RichMediaEditorAddComponentDialogContainer3,onToggle:this.props.onToggle}));};j.prototype.$RichMediaEditorAddComponentDialogContainer3=function(k){c('RichMediaEditorActions').selectElementToAdd(k);};j.prototype.$RichMediaEditorAddComponentDialogContainer2=function(k){c('RichMediaEditorActions').deselectElementToAdd(k);};j.prototype.$RichMediaEditorAddComponentDialogContainer1=function(){c('RichMediaEditorActions').addElementsSelected();};function j(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(j);},null);
/**
 * @providesModule color-picker-clamp
 * @preserve-header
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2014 Nick Williams
 * Copyright (c) 2014 George Czabania
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 */__d("color-picker-clamp",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();function h(i,j,k){return i<j?j:(i>k?k:i);}f.exports=h;},null);
/**
 * @providesModule color-picker-draggable-mixin
 * @preserve-header
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2014 Nick Williams
 * Copyright (c) 2014 George Czabania
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 */__d("color-picker-draggable-mixin",["React","color-picker-clamp"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h=c("React"),i=c("color-picker-clamp");function j(){}var k={propTypes:{onChange:h.PropTypes.func,max:h.PropTypes.number},getDefaultProps:function(){return {onChange:j,max:1};},getInitialState:function(){return {active:false};},componentDidMount:function(){document.addEventListener("mousemove",this.handleUpdate);document.addEventListener("touchmove",this.handleUpdate);document.addEventListener("mouseup",this.stopUpdates);document.addEventListener("touchend",this.stopUpdates);},componentWillUnmount:function(){document.removeEventListener("mousemove",this.handleUpdate);document.removeEventListener("touchmove",this.handleUpdate);document.removeEventListener("mouseup",this.stopUpdates);document.removeEventListener("touchend",this.stopUpdates);},startUpdates:function(l){l.preventDefault();var m=this.getPosition(l);this.setState({active:true});this.updatePosition(m.x,m.y);},handleUpdate:function(l){if(this.state.active){l.preventDefault();var m=this.getPosition(l);this.updatePosition(m.x,m.y);}},stopUpdates:function(){if(this.state.active)this.setState({active:false});},getPosition:function(l){if(l.touches)l=l.touches[0];return {x:l.clientX,y:l.clientY};},getPercentageValue:function(l){return (l/this.props.max)*100+"%";},getScaledValue:function(l){return i(l,0,1)*this.props.max;}};f.exports=k;},null);
/**
 * @providesModule color-picker-map
 * @preserve-header
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2014 Nick Williams
 * Copyright (c) 2014 George Czabania
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * @fullSyntaxTransform
 */__d("color-picker-map",["cx","React","ReactDOM","ReactComponentWithPureRenderMixin","color-picker-draggable-mixin"],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c("React").createClass({displayName:"Map",mixins:[c("color-picker-draggable-mixin"),c("ReactComponentWithPureRenderMixin")],propTypes:{x:c("React").PropTypes.number,y:c("React").PropTypes.number,backgroundColor:c("React").PropTypes.string},getDefaultProps:function(){return {x:0,y:0,backgroundColor:"transparent"};},updatePosition:function(j,k){var l=c("ReactDOM").findDOMNode(this).getBoundingClientRect(),m=(j-l.left)/l.width,n=(l.bottom-k)/l.height;m=this.getScaledValue(m);n=this.getScaledValue(n);this.props.onChange(m,n);},render:function(){var j="map"+(this.state.active?" "+"active":"");return (c("React").createElement("div",{className:"_4uwo"+" "+this.props.className+" "+j,onMouseDown:this.startUpdates,onTouchStart:this.startUpdates},c("React").createElement("div",{className:"background",style:{backgroundColor:this.props.backgroundColor}}),c("React").createElement("div",{className:"pointer",style:{left:this.getPercentageValue(this.props.x),bottom:this.getPercentageValue(this.props.y)}})));}});f.exports=i;},null);
/**
 * @providesModule colr-convert
 * @preserve-header
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2014 George Czabania
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 */__d("colr-convert",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();'use strict';f.exports={grayscale:{rgb:q},hex:{rgb:i},rgb:{hsl:k,hsv:l,hex:j,grayscale:r},hsl:{rgb:m,hsv:n},hsv:{rgb:o,hsl:p}};function h(s){return (s<58?s-48:s<71?s-55:s-87);}function i(s){var t=s[0]==='#'?1:0,u=s.length;if(u-t<3)throw new Error('hex input must be at least three chars long');var v,w,x,y=h(s.charCodeAt(0+t)),z=h(s.charCodeAt(1+t)),aa=h(s.charCodeAt(2+t));if(u-t>=6){v=(y<<4)+z;w=(aa<<4)+h(s.charCodeAt(3+t));x=(h(s.charCodeAt(4+t))<<4)+h(s.charCodeAt(5+t));}else{v=(y<<4)+y;w=(z<<4)+z;x=(aa<<4)+aa;}if(v<0||v>255||w<0||w>255||x<0||x>255)throw new Error('hex input is invalid');return [v,w,x];}function j(s){return '#'+('000000'+((s[0]<<16)+(s[1]<<8)+s[2]).toString(16)).slice(-6);}function k(s){var t=s[0]/255,u=s[1]/255,v=s[2]/255,w=Math.min(t,u,v),x=Math.max(t,u,v),y=x-w,z,aa,ba;if(x===w){z=0;}else if(t===x){z=(u-v)/y;}else if(u===x){z=2+(v-t)/y;}else if(v===x)z=4+(t-u)/y;z=Math.min(z*60,360);if(z<0)z+=360;ba=(w+x)/2;if(x===w){aa=0;}else if(ba<=.5){aa=y/(x+w);}else aa=y/(2-x-w);return [z,aa*100,ba*100];}function l(s){var t=s[0],u=s[1],v=s[2],w=Math.min(t,u,v),x=Math.max(t,u,v),y=x-w,z,aa,ba;if(x===0){aa=0;}else aa=(y/x*1000)/10;if(x===w){z=0;}else if(t===x){z=(u-v)/y;}else if(u===x){z=2+(v-t)/y;}else if(v===x)z=4+(t-u)/y;z=Math.min(z*60,360);if(z<0)z+=360;ba=((x/255)*1000)/10;return [z,aa,ba];}function m(s){var t=s[0]/360,u=s[1]/100,v=s[2]/100,w,x,y;if(u===0){w=x=y=v;}else{var z=v<.5?v*(u+1):v+u-v*u,aa=2*v-z,ba;ba=t+1/3;if(ba<0){ba+=1;}else if(ba>1)ba-=1;if(ba<1/6){w=aa+(z-aa)*ba*6;}else if(ba<1/2){w=z;}else if(ba<2/3){w=aa+(z-aa)*(2/3-ba)*6;}else w=aa;ba=t;if(ba<0){ba+=1;}else if(ba>1)ba-=1;if(ba<1/6){x=aa+(z-aa)*ba*6;}else if(ba<1/2){x=z;}else if(ba<2/3){x=aa+(z-aa)*(2/3-ba)*6;}else x=aa;ba=t-1/3;if(ba<0){ba+=1;}else if(ba>1)ba-=1;if(ba<1/6){y=aa+(z-aa)*ba*6;}else if(ba<1/2){y=z;}else if(ba<2/3){y=aa+(z-aa)*(2/3-ba)*6;}else y=aa;}return [w*255,x*255,y*255];}function n(s){var t=s[0],u=s[1]/100,v=s[2]/100,w,x;if(u===0)return [t,0,v*100];if(v===0)return [t,0,0];v*=2;u*=(v<=1)?v:2-v;x=(v+u)/2;w=(2*u)/(v+u);return [t,w*100,x*100];}function o(s){var t=s[0]/60,u=s[1]/100,v=s[2]/100,w=Math.floor(t)%6,x=t-Math.floor(t),y=255*v*(1-u),z=255*v*(1-(u*x)),aa=255*v*(1-(u*(1-x)));v=255*v;switch(w){case 0:return [v,aa,y];case 1:return [z,v,y];case 2:return [y,v,aa];case 3:return [y,z,v];case 4:return [aa,y,v];case 5:return [v,y,z];}}function p(s){var t=s[0],u=s[1]/100,v=s[2]/100,w,x;if(u===0)return [t,0,v*100];if(v===0)return [t,0,0];x=(2-u)*v;w=u*v;w/=(x<=1)?x:2-x;x/=2;return [t,w*100,x*100];}function q(s){return [s,s,s];}function r(s){return (s[0]*299+s[1]*587+s[2]*114)/1000;}},null);
/**
 * @providesModule colr
 * @preserve-header
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2014 George Czabania
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 */__d("colr",["colr-convert"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();'use strict';var h=c('colr-convert');function i(){if((this instanceof i)===false)return new i();this._={};}i.fromHex=function(n){return (new i()).fromHex(n);};i.fromGrayscale=function(n){return (new i()).fromGrayscale(n);};i.fromRgb=function(n,o,p){return (new i()).fromRgb(n,o,p);};i.fromRgbArray=function(n){return (new i()).fromRgb(n[0],n[1],n[2]);};i.fromRgbObject=function(n){return (new i()).fromRgb(n.r,n.g,n.b);};i.fromHsl=function(n,o,p){return (new i()).fromHsl(n,o,p);};i.fromHslArray=function(n){return (new i()).fromHsl(n[0],n[1],n[2]);};i.fromHslObject=function(n){return (new i()).fromHsl(n.h,n.s,n.l);};i.fromHsv=function(n,o,p){return (new i()).fromHsv(n,o,p);};i.fromHsvArray=function(n){return (new i()).fromHsv(n[0],n[1],n[2]);};i.fromHsvObject=function(n){return (new i()).fromHsv(n.h,n.s,n.v);};i.prototype.fromHex=function(n){var o=h.hex.rgb(n);this._={rgb:o};return this;};i.prototype.fromGrayscale=function(n){n=k(n);var o=h.grayscale.rgb(n);this._={rgb:o};return this;};i.prototype.fromRgb=function(n,o,p){if(typeof(n)!=='number'||typeof(o)!=='number'||typeof(p)!=='number')throw new Error('Arguments must be numbers');var q=l(n,o,p);this._={rgb:q};return this;};i.prototype.fromRgbArray=function(n){return this.fromRgb(n[0],n[1],n[2]);};i.prototype.fromRgbObject=function(n){return this.fromRgb(n.r,n.g,n.b);};i.prototype.fromHsl=function(n,o,p){if(typeof(n)!=='number'||typeof(o)!=='number'||typeof(p)!=='number')throw new Error('Arguments must be numbers');this._={hsl:m(n,o,p)};return this;};i.prototype.fromHslArray=function(n){return this.fromHsl(n[0],n[1],n[2]);};i.prototype.fromHslObject=function(n){return this.fromHsl(n.h,n.s,n.l);};i.prototype.fromHsv=function(n,o,p){if(typeof(n)!=='number'||typeof(o)!=='number'||typeof(p)!=='number')throw new Error('Arguments must be numbers');this._={hsv:m(n,o,p)};return this;};i.prototype.fromHsvArray=function(n){return this.fromHsv(n[0],n[1],n[2]);};i.prototype.fromHsvObject=function(n){return this.fromHsv(n.h,n.s,n.v);};i.prototype.toHex=function(){var n=this._.hex;if(n!==undefined)return n;var o,p=this._.rgb;if(p!==undefined){o=p;}else o=this.toRawRgbArray();o[0]=Math.round(o[0]);o[1]=Math.round(o[1]);o[2]=Math.round(o[2]);var q=h.rgb.hex(o);this._.hex=q;return q;};i.prototype.toGrayscale=function(){var n=this._.grayscale;if(n!==undefined)return n;var o,p=this._.rgb;if(p!==undefined){o=p;}else o=this.toRawRgbArray();var q=h.rgb.grayscale(o);this._.grayscale=q;return q;};i.prototype.toRawRgbArray=function(){var n=this._.rgb;if(n!==undefined)return n;var o;if((o=this._.hsv)!==undefined){o=h.hsv.rgb(o);}else if((o=this._.hsl)!==undefined){o=h.hsl.rgb(o);}else throw new Error('No data to convert');this._.rgb=o;return o;};i.prototype.toRawRgbObject=function(){var n=this.toRawRgbArray();return {r:n[0],g:n[1],b:n[2]};};i.prototype.toRgbArray=function(){var n=this.toRawRgbArray();return [Math.round(n[0]),Math.round(n[1]),Math.round(n[2])];};i.prototype.toRgbObject=function(){var n=this.toRgbArray();return {r:n[0],g:n[1],b:n[2]};};i.prototype.toRawHslArray=function(){var n=this._.hsl;if(n!==undefined)return n;var o;if((o=this._.hsv)!==undefined){o=h.hsv.hsl(o);}else if((o=this._.rgb)!==undefined){o=h.rgb.hsl(o);}else throw new Error('No data to convert');this._.hsl=o;return o;};i.prototype.toRawHslObject=function(){var n=this.toRawHslArray();return {h:n[0],s:n[1],l:n[2]};};i.prototype.toHslArray=function(){var n=this.toRawHslArray();return [Math.round(n[0]),Math.round(n[1]),Math.round(n[2])];};i.prototype.toHslObject=function(){var n=this.toHslArray();return {h:n[0],s:n[1],l:n[2]};};i.prototype.toRawHsvArray=function(){var n=this._.hsv;if(n!==undefined)return n;var o;if((o=this._.hsl)!==undefined){o=h.hsl.hsv(o);}else if((o=this._.rgb)!==undefined){o=h.rgb.hsv(o);}else throw new Error('No data to convert');this._.hsv=o;return o;};i.prototype.toRawHsvObject=function(){var n=this.toRawHsvArray();return {h:n[0],s:n[1],v:n[2]};};i.prototype.toHsvArray=function(){var n=this.toRawHsvArray();return [Math.round(n[0]),Math.round(n[1]),Math.round(n[2])];};i.prototype.toHsvObject=function(){var n=this.toHsvArray();return {h:n[0],s:n[1],v:n[2]};};i.prototype.lighten=function(n){var o=this.toRawHslArray();o[2]=j(o[2]+n);this._={hsl:o};return this;};i.prototype.darken=function(n){var o=this.toRawHslArray();o[2]=j(o[2]-n);this._={hsl:o};return this;};i.prototype.clone=function(){var n=new i();n._.hex=this._.hex;n._.grayscale=this._.grayscale;if(this._.rgb!==undefined)n._.rgb=this._.rgb.slice(0);if(this._.hsv!==undefined)n._.hsv=this._.hsv.slice(0);if(this._.hsl!==undefined)n._.hsl=this._.hsl.slice(0);return n;};function j(n){return Math.max(Math.min(n,100),0);}function k(n){return Math.max(Math.min(n,255),0);}function l(n,o,p){return [Math.max(Math.min(n,255),0),Math.max(Math.min(o,255),0),Math.max(Math.min(p,255),0),];}function m(n,o,p){return [Math.max(Math.min(n,360),0),Math.max(Math.min(o,100),0),Math.max(Math.min(p,100),0),];}f.exports=i;},null);
/**
 * @providesModule color-picker
 * @preserve-header
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2014 Nick Williams
 * Copyright (c) 2014 George Czabania
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * @fullSyntaxTransform
 */__d("color-picker",["cx","React","ReactComponentWithPureRenderMixin","color-picker-map","color-picker-slider","colr"],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c("React").createClass({displayName:"ColorPicker",mixins:[c("ReactComponentWithPureRenderMixin")],getDefaultProps:function(){return {color:"#000000"};},getInitialState:function(){return this.getStateFrom(this.props.color);},componentWillReceiveProps:function(j){var k=j.color,l=c("colr").fromHsvObject(this.state.hsv).toHex();if(k.toLowerCase()!==l.toLowerCase())this.setState(this.getStateFrom(k));},getStateFrom:function(j){j=c("colr").fromHex(j);return {hsv:j.toHsvObject()};},render:function(){var j=this.getLuminosity(),k=this.getBackgroundHue(),l=(j<=.5?"dark":"")+(j>.5?" "+"light":"");return (c("React").createElement("div",{className:"_f4e"},c("React").createElement("div",{className:"_2ppf"},c("React").createElement(c("color-picker-slider"),{vertical:true,value:this.state.hsv.h,max:360,onChange:this.handleHueChange})),c("React").createElement(c("color-picker-map"),{x:this.state.hsv.s,y:this.state.hsv.v,max:100,className:l,backgroundColor:k,onChange:this.handleSaturationValueChange})));},getLuminosity:function(){return c("colr").fromHsvObject(this.state.hsv).toGrayscale()/255;},getBackgroundHue:function(){return c("colr").fromHsv(this.state.hsv.h,100,100).toHex();},handleHueChange:function(j){this.update({h:j,s:this.state.hsv.s,v:this.state.hsv.v});},handleSaturationValueChange:function(j,k){this.update({h:this.state.hsv.h,s:j,v:k});},update:function(j){var k=c("colr").fromHsvObject(j);this.props.onChange(k.toHex());this.setState({hsv:j});}});f.exports=i;},null);
__d('RichMediaEditorColorInput.react',['cx','invariant','colr','color-picker','ContextualLayerAutoFlip','ContextualLayerUpdateOnScroll','Keys','LayerHideOnBlur','React','ReactLayeredComponentMixin','XUIContextualDialog.react','XUIContextualDialogBody.react','XUIContextualDialogFooter.react','XUIDialogCloseButton.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k={ContextualLayerAutoFlip:c('ContextualLayerAutoFlip'),ContextualLayerUpdateOnScroll:c('ContextualLayerUpdateOnScroll'),LayerHideOnBlur:c('LayerHideOnBlur')},l=c('React').createClass({displayName:'RichMediaEditorColorInput',mixins:[c('ReactLayeredComponentMixin')],propTypes:{color:j.string.isRequired,disabled:j.bool,onChange:j.func.isRequired},getInitialState:function(){return {inputValue:this.props.color,showColorPicker:false};},render:function(){return (c('React').createElement('button',{className:"_18dg",disabled:this.props.disabled,ref:'nub',style:{backgroundColor:this.props.color},onClick:this.showDialog}));},showDialog:function(){this._onToggle(true);},hideDialog:function(){this._onToggle(false);},_onKeyUp:function(event){if(event.keyCode===c('Keys').ESC)this._onToggle(false);},renderLayers:function(){return {contextualDialog:c('React').createElement(c('XUIContextualDialog.react'),{behaviors:k,context:this.refs.nub,position:'below',shown:this.state.showColorPicker,width:c('XUIContextualDialog.react').WIDTH.NORMAL,onToggle:this._onToggle},c('React').createElement(c('XUIContextualDialogBody.react'),null,c('React').createElement('div',{className:"_19_t"},c('React').createElement(c('color-picker'),{color:this.props.color,onChange:this._onColorChange})),c('React').createElement('div',{className:"_1tgk"},c('React').createElement('input',{className:"_1tgl",height:this.props.height,maxLength:7,ref:'textInput',style:this._calculateInputStyle(),value:this.state.inputValue,onChange:this._onInputChange,onKeyUp:this._onKeyUp}))),c('React').createElement(c('XUIContextualDialogFooter.react'),null,c('React').createElement(c('XUIDialogCloseButton.react'),{label:'Close',use:'confirm',onClick:this._unfocusInput})))};},_unfocusInput:function(){this._onToggle(false);},_onToggle:function(m){if(m!==this.state.showColorPicker)this.setState({showColorPicker:m});},_calculateInputStyle:function(){var m=c('colr').fromHex(this.props.color).toGrayscale()/255,n=m>.5?'#000':'#FFF';return {color:n,backgroundColor:this.props.color};},_onInputChange:function(m){var n=m.target;!(n instanceof HTMLInputElement)?i(0):undefined;this.setState({inputValue:n.value});var o;try{o=c('colr').fromHex(n.value).toHex();}catch(p){}if(o)this.props.onChange(o);},_onColorChange:function(m){this.setState({inputValue:m});this.props.onChange(m);}});f.exports=l;},null);
__d('adjustBlockDepthForContentState',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j,k,l){var m=j.getStartKey(),n=j.getEndKey(),o=i.getBlockMap(),p=o.toSeq().skipUntil(function(q,r){return r===m;}).takeUntil(function(q,r){return r===n;}).concat([[n,o.get(n)]]).map(function(q){var r=q.getDepth()+k;r=Math.max(0,Math.min(r,l));return q.set('depth',r);});o=o.merge(p);return i.merge({blockMap:o,selectionBefore:j,selectionAfter:j});}f.exports=h;},null);
__d('RichTextEditorUtil',['DraftEntity','DraftModifier','EditorState','adjustBlockDepthForContentState','nullthrows'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={currentBlockContainsLink:function(i){var j=i.getSelection();return i.getCurrentContent().getBlockForKey(j.getAnchorKey()).getCharacterList().slice(j.getStartOffset(),j.getEndOffset()).some(function(k){var l=k.getEntity();return !!l&&c('DraftEntity').get(l).getType()==='LINK';});},getCurrentBlockType:function(i){var j=i.getSelection();return i.getCurrentContent().getBlockForKey(j.getStartKey()).getType();},getDataObjectForLinkURL:function(i){return {url:i.toString()};},handleKeyCommand:function(i,j){switch(j){case 'bold':return h.toggleInlineStyle(i,'BOLD');case 'italic':return h.toggleInlineStyle(i,'ITALIC');case 'underline':return h.toggleInlineStyle(i,'UNDERLINE');case 'code':return h.toggleCode(i);case 'backspace':case 'backspace-word':case 'backspace-to-start-of-line':return h.onBackspace(i);case 'delete':case 'delete-word':case 'delete-to-end-of-block':return h.onDelete(i);default:return null;}},insertSoftNewline:function(i){var j=c('DraftModifier').insertText(i.getCurrentContent(),i.getSelection(),'\n',i.getCurrentInlineStyle(),null);return c('EditorState').push(i,j,'insert-characters');},onBackspace:function(i){var j=i.getSelection();if(!j.isCollapsed()||j.getAnchorOffset()||j.getFocusOffset())return null;var k=i.getCurrentContent(),l=j.getStartKey(),m=k.getBlockAfter(l);if(m&&k.getBlockForKey(l).getLength()===0)return null;var n=k.getBlockBefore(l);if(n&&n.getType()==='media'){var o=j.merge({anchorKey:n.getKey(),anchorOffset:0}),p=c('DraftModifier').setBlockType(k,o,k.getBlockForKey(l).getType()),q=c('DraftModifier').removeRange(p,o,'backward');if(q!==k)return c('EditorState').push(i,q,'remove-range');}var r=h.tryToRemoveBlockStyle(i);if(r)return c('EditorState').push(i,r,'change-block-type');return null;},onDelete:function(i){var j=i.getSelection();if(!j.isCollapsed())return null;var k=i.getCurrentContent(),l=j.getStartKey(),m=k.getBlockForKey(l),n=m.getLength();if(j.getStartOffset()<n)return null;var o=k.getBlockAfter(l);if(!o||o.getType()!=='media')return null;if(n===0){var p=j.merge({focusKey:o.getKey(),focusOffset:0}),q=c('DraftModifier').removeRange(k,p,'forward'),r=c('DraftModifier').setBlockType(q,q.getSelectionAfter(),'media');return c('EditorState').push(i,r,'remove-range');}var s=j.merge({focusKey:o.getKey(),focusOffset:o.getLength()}),t=c('DraftModifier').removeRange(k,s,'forward');if(t!==k)return c('EditorState').push(i,t,'remove-range');return null;},onTab:function(event,i,j){var k=i.getSelection(),l=k.getAnchorKey();if(l!==k.getFocusKey())return i;var m=i.getCurrentContent(),n=m.getBlockForKey(l),o=n.getType();if(o!=='unordered-list-item'&&o!=='ordered-list-item')return i;event.preventDefault();var p=m.getBlockBefore(l);if(!p)return i;var q=p.getType();if(q!=='unordered-list-item'&&q!=='ordered-list-item')return i;var r=n.getDepth();if(!event.shiftKey&&r===j)return i;j=Math.min(p.getDepth()+1,j);var s=c('adjustBlockDepthForContentState')(m,k,event.shiftKey?-1:1,j);return c('EditorState').push(i,s,'adjust-depth');},toggleBlockType:function(i,j){var k=i.getSelection(),l=k.getStartKey(),m=k.getEndKey(),n=i.getCurrentContent(),o=k;if(l!==m&&k.getEndOffset()===0){var p=c('nullthrows')(n.getBlockBefore(m));m=p.getKey();o=o.merge({anchorKey:l,anchorOffset:k.getStartOffset(),focusKey:m,focusOffset:p.getLength(),isBackward:false});}var q=n.getBlockMap().skipWhile(function(s,t){return t!==l;}).takeWhile(function(s,t){return t!==m;}).some(function(s){return s.getType()==='media';});if(q)return i;var r=n.getBlockForKey(l).getType()===j?'unstyled':j;return c('EditorState').push(i,c('DraftModifier').setBlockType(n,o,r),'change-block-type');},toggleCode:function(i){var j=i.getSelection(),k=j.getAnchorKey(),l=j.getFocusKey();if(j.isCollapsed()||k!==l)return h.toggleBlockType(i,'code-block');return h.toggleInlineStyle(i,'CODE');},toggleInlineStyle:function(i,j){var k=i.getSelection(),l=i.getCurrentInlineStyle();if(k.isCollapsed())return c('EditorState').set(i,{inlineStyleOverride:l.has(j)?l.remove(j):l.add(j)});var m=i.getCurrentContent(),n;if(l.has(j)){n=c('DraftModifier').removeInlineStyle(m,k,j);}else n=c('DraftModifier').applyInlineStyle(m,k,j);return c('EditorState').push(i,n,'change-inline-style');},toggleLink:function(i,j,k){var l=c('DraftModifier').applyEntity(i.getCurrentContent(),j,k);return c('EditorState').push(i,l,'apply-entity');},tryToRemoveBlockStyle:function(i){var j=i.getSelection(),k=j.getAnchorOffset();if(j.isCollapsed()&&k===0){var l=j.getAnchorKey(),m=i.getCurrentContent(),n=m.getBlockForKey(l);if(n.getLength()>0)return null;var o=n.getType(),p=m.getBlockBefore(l);if(o==='code-block'&&p&&p.getType()==='code-block')return null;if(o!=='unstyled')return c('DraftModifier').setBlockType(m,j,'unstyled');}return null;}};f.exports=h;},null);
__d('RichMediaEditorTextEditor.react',['ix','cx','xuiglyph','AdsCanvasEditorFeature','CanvasCreationEvent','CanvasCreationWaterfallTypedLogger','colr','ContentState','DraftEditor.react','EditorState','Image.react','React','PopoverMenu.react','ReactXUIMenu','RichTextEditorUtil','RichMediaEditorColorInput.react','RichMediaRichFormatText','XUISelector.react','XUISelectorButton.react','decodeBlocks','encodeBlocks','RichMediaEditorConstants'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('ReactXUIMenu').SelectableItem,l=c('ReactXUIMenu').SelectableMenu,m=c('XUISelector.react').Option,n=c('RichMediaEditorConstants').EDITOR_FONT_FAMILIIES,o=c('RichMediaEditorConstants').EDITOR_LINE_HEIGHT,p=c('React').PropTypes,q=c('React').createClass({displayName:'StyleButton',propTypes:{active:p.bool.isRequired,disabled:p.bool,label:p.string.isRequired,style:p.string.isRequired,onToggle:p.func.isRequired},_onToggle:function(ca){ca.preventDefault();this.props.onToggle(this.props.style);},render:function(){var ca=this.props.style;return (c('React').createElement('div',{className:"_1fp0"+(ca==='BOLD'?' '+"_v1g":'')+(ca==='ITALIC'?' '+"_v1n":'')+(ca==='UNDERLINE'?' '+"_v1o":'')+(this.props.active?' '+"_v1p":''),onClick:this.props.disabled?null:this._onToggle},this.props.label));}}),r=[{label:'B',style:'BOLD'},{label:'I',style:'ITALIC'},{label:'U',style:'UNDERLINE'}],s=c('React').createClass({displayName:'InlineStyleControls',propTypes:{disabled:p.bool,editorState:p.object.isRequired,onToggle:p.func.isRequired},render:function(){var ca=this.props.editorState.getCurrentInlineStyle();return (c('React').createElement('div',{className:"_v1q"},r.map(function(da){return (c('React').createElement(q,{active:ca.has(da.style),disabled:this.props.disabled,key:da.style,label:da.label,style:da.style,onToggle:this.props.onToggle}));}.bind(this))));}}),t=c('React').createClass({displayName:'TextAlignmentButton',propTypes:{active:p.bool.isRequired,disabled:p.bool,textAlignment:p.string.isRequired,onToggle:p.func.isRequired},_onToggle:function(ca){ca.preventDefault();this.props.onToggle(this.props.textAlignment);},render:function(){return (c('React').createElement('div',{className:"_1fp0"+(this.props.active?' '+"_v1p":''),onClick:this.props.disabled?null:this._onToggle},c('React').createElement('div',{className:"_5p-"+(this.props.textAlignment==='left'?' '+"_1fp1":'')+(this.props.textAlignment=='center'?' '+"_1fp2":'')+(this.props.textAlignment=='right'?' '+"_1fp3":'')})));}}),u=['left','center','right'],v=c('React').createClass({displayName:'TextAlignmentControls',propTypes:{disabled:p.bool,textAlignment:p.string.isRequired,onToggle:p.func.isRequired},render:function(){return (c('React').createElement('div',{className:"_v1q"},u.map(function(ca){return (c('React').createElement(t,{active:this.props.textAlignment===ca,disabled:this.props.disabled,key:ca,textAlignment:ca,onToggle:this.props.onToggle}));}.bind(this))));}}),w=6,x=72,y=c('React').createClass({displayName:'FontSizeInput',propTypes:{disabled:p.bool,fontSize:p.number.isRequired,onChange:p.func.isRequired},render:function(){var ca=[];for(var da=w;da<=x;da++)ca.push(da);return (c('React').createElement(c('XUISelector.react'),{className:"_5p_",disabled:this.props.disabled,maxheight:120,name:'font_size_selector',value:this.props.fontSize,onChange:function(ea){return this._onSizeChange(ea.value);}.bind(this)},c('React').createElement(c('XUISelectorButton.react'),{className:"_5q0",haschevron:false,imageRight:c('React').createElement(c('Image.react'),{className:"_5q1",src:j({name:'triangle-down',shade:'dark',size:'small'})})}),ca.map(function(ea){return (c('React').createElement(m,{key:ea,value:ea},ea));})));},_onSizeChange:function(ca){var da=parseInt(ca,10);if(!isNaN(da))this.props.onChange(da);}}),z=c('React').createClass({displayName:'FontFamilySelector',propTypes:{disabled:p.bool,fontFamily:p.string.isRequired,onChange:p.func.isRequired},render:function(){return (c('React').createElement(c('XUISelector.react'),{className:"_1rsy",disabled:this.props.disabled,maxheight:120,maxwidth:174,name:'font_selector',value:this.props.fontFamily,onChange:this._onChangeFontFamily},c('React').createElement(c('XUISelectorButton.react'),{className:"_5r2",haschevron:true,maxwidth:150}),n.map(function(ca){return (c('React').createElement(m,{key:ca,value:ca},ca));})));},_onChangeFontFamily:function(event){this.props.onChange(event.value);}}),aa=c('React').createClass({displayName:'LineHeightInput',propTypes:{lineHeight:p.string.isRequired,onChange:p.func.isRequired},getInitialState:function(){return {selectedLineHeight:this.props.lineHeight};},render:function(){if(!c('AdsCanvasEditorFeature').line_height_enabled)return null;var ca=c('React').createElement(c('Image.react'),{alt:'line height',src:h('/images/ads/rich_media/icons/line_height.png')}),da=o.map(function(fa){return (c('React').createElement(k,{key:fa,selected:this.state.selectedLineHeight==fa,value:fa},fa));}.bind(this)),ea=c('React').createElement(l,{className:"_1k92",multiple:false,onChange:this._onSelectionChange},da);return (c('React').createElement(c('PopoverMenu.react'),{alignh:'right',className:"_3la2",menu:ea,name:'line_height'},c('React').createElement(c('XUISelectorButton.react'),{className:"_3la4",haschevron:true,image:ca})));},_onSelectionChange:function(ca,da){var ea=da.item.getValue();this.setState({selectedLineHeight:ea});this.props.onChange(ea);new (c('CanvasCreationWaterfallTypedLogger'))().setEventName(c('CanvasCreationEvent').EDITOR_LINE_HEIGHT_TOUCH).setEditorLineHeight(ea).log();}}),ba=c('React').createClass({displayName:'RichMediaEditorTextEditor',propTypes:{buttonPreview:p.bool,disableReturnHandler:p.bool,disabled:p.bool,hideTextAlignment:p.bool,oneLine:p.bool,richFormatText:p.instanceOf(c('RichMediaRichFormatText')).isRequired,textPreview:p.bool,onChange:p.func.isRequired},getDefaultProps:function(){return {buttonPreview:false,disableReturnHandler:false,hideTextAlignment:false,oneLine:false,textPreview:false};},getInitialState:function(){return {editorState:this._getEditorStateFromText(this.props.richFormatText)};},render:function(){var ca=null,da=this.state.editorState;if(!this.props.textPreview&&!this.props.buttonPreview){ca=c('React').createElement('div',{className:"_1fp4"},c('React').createElement(z,{disabled:this.props.disabled,fontFamily:this.props.richFormatText.fontFamily,onChange:this._onFontFamilyChange}),c('React').createElement(y,{disabled:this.props.disabled,fontSize:this.props.richFormatText.fontSize,onChange:this._onFontSizeChange}),c('React').createElement('div',{className:"_5r3"},c('React').createElement(c('RichMediaEditorColorInput.react'),{color:this.props.richFormatText.textColor,disabled:this.props.disabled,onChange:this._onFontColorChange})),c('React').createElement(s,{disabled:this.props.disabled,editorState:this.state.editorState,onToggle:this._toggleInlineStyle}),this.props.hideTextAlignment?null:c('React').createElement(v,{disabled:this.props.disabled,textAlignment:this.props.richFormatText.textAlignment,onToggle:this._toggleTextAlignment}),c('React').createElement(aa,{lineHeight:this.props.richFormatText.lineHeight,onChange:this._onLineHeightChange}));}else da=this._getEditorStateFromText(this.props.richFormatText);var ea=this.props.buttonPreview||this.props.textPreview;return (c('React').createElement('div',{className:(!ea?"_v1r":'')+(!!this.props.textPreview?' '+"_5mmf":'')+(!!this.props.buttonPreview?' '+"_5mmg":'')+(this.props.oneLine&&!ea?' '+"_1fj":'')+(!this.props.oneLine&&!ea?' '+"_1fk":'')},ca,c('React').createElement('div',{style:{transition:'background-color 325ms ease',backgroundColor:ea?'transparent':this._getBackgroundColor(this.props.richFormatText.textColor),color:this.props.richFormatText.textColor,fontFamily:this.props.richFormatText.fontFamily,fontSize:this.props.richFormatText.fontSize,lineHeight:this._calcLineHeight(this.props.richFormatText.fontSize,this.props.richFormatText.lineHeight)}},c('React').createElement(c('DraftEditor.react'),{editorState:da,handleReturn:this._handleReturn,readOnly:this.props.disabled,textAlignment:this.props.richFormatText.textAlignment,onChange:this._onChange}))));},_handleReturn:function(event){if(!c('AdsCanvasEditorFeature').line_break_enabled)return true;return this.props.disableReturnHandler==true;},_getEditorStateFromText:function(ca){var da=c('decodeBlocks')(ca.composedText.blocks,ca.composedText.entityMap),ea=c('ContentState').createFromBlockArray(da);return c('EditorState').createWithContent(ea);},_onChange:function(ca){if(this.props.preview)return;this.setState({editorState:ca});this.props.onChange(this.props.richFormatText.set('composedText',c('encodeBlocks')(ca.getCurrentContent())));},_toggleInlineStyle:function(ca){this._onChange(c('RichTextEditorUtil').toggleInlineStyle(this.state.editorState,ca));},_toggleTextAlignment:function(ca){this.props.onChange(this.props.richFormatText.set('textAlignment',ca));},_onFontColorChange:function(ca){this.props.onChange(this.props.richFormatText.set('textColor',ca));},_onFontSizeChange:function(ca){this.props.onChange(this.props.richFormatText.set('fontSize',ca));},_onFontFamilyChange:function(ca){this.props.onChange(this.props.richFormatText.set('fontFamily',ca));},_getBackgroundColor:function(ca){var da=c('colr').fromHex(ca).toGrayscale()/255;return da>.5?'#000':'#FFF';},_onLineHeightChange:function(ca){this.props.onChange(this.props.richFormatText.set('lineHeight',ca));},_calcLineHeight:function(ca,da){var ea=ca*parseFloat(da,10)/10;return ea.toString();}});f.exports=ba;},null);
__d('AdsIndexedTabBar.react',['cx','React','TabBar.react','TabBarItem.react','adsGKCheck'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'AdsIndexedTabBar',propTypes:{numItems:i.number.isRequired,onItemSelected:i.func.isRequired,selectedItem:i.number.isRequired,images:i.arrayOf(i.object)},render:function(){var k=[];for(var l=0;l<this.props.numItems;l++){var m=l+1;if(this.props.images&&this.props.images.length>l&&this.props.images[l])m=this.props.images[l];var n=c('adsGKCheck')('ads_cf_creative_mpa_tabicon'),o="_53th"+(n?' '+"_56vl":'')+(l>0?' '+"_53tj":'')+(l===this.props.selectedItem?' '+"_53tk":'')+(m!==l+1?' '+"_x5b":'');k.push(c('React').createElement(c('TabBarItem.react'),{className:n?"_2pih":'',key:l},c('React').createElement('div',{className:o},m),c('React').createElement('div',{className:"_1_d-"}),c('React').createElement('div',{className:"_1_d_"})));}return (c('React').createElement(c('TabBar.react'),{className:"_53tn",onTabClick:this._onItemSelected},k));},_onItemSelected:function(k){this.props.onItemSelected(+k);}});f.exports=j;},null);
__d('RichMediaEditorCarouselElementEditPanelItemSelectBar.react',['cx','xuiglyph','AdsIndexedTabBar.react','FileInput.react','Grid.react','React','Image.react','XUIButton.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('Grid.react').GridItem,k=c('React').PropTypes,l=10,m=c('React').createClass({displayName:'RichMediaEditorCarouselElementEditPanelItemSelectBar',propTypes:{disabled:k.bool,maxItems:k.number.isRequired,numItems:k.number.isRequired,selectedItem:k.number.isRequired,onItemSelected:k.func.isRequired,onItemsAdded:k.func.isRequired},getDefaultProps:function(){return {maxItems:10,numItems:0,selectedItem:-1};},render:function(){return (c('React').createElement('div',{className:"_48po _2p4u"},c('React').createElement(c('Grid.react'),{cols:2},c('React').createElement(j,{key:'tabBar'},c('React').createElement(c('AdsIndexedTabBar.react'),{numItems:this.props.numItems,selectedItem:this.props.selectedItem,onItemSelected:this.props.onItemSelected})),c('React').createElement(j,{key:'addButton'},this._renderAddButton()))));},_renderAddButton:function(){if(this.props.numItems>=l)return null;return (c('React').createElement(c('FileInput.react'),{accept:'image/*',disabled:this.props.disabled,multiple:true,onChange:this._onImagesAdded},c('React').createElement(c('XUIButton.react'),{className:"_3-9a",disabled:this.props.disabled,href:'#',image:c('React').createElement(c('Image.react'),{src:i({name:'plus',shade:'dark',size:'small'})})})));},_onImagesAdded:function(event){var n=event.target.files||[];if(n.length<=0)return;if(this.props.numItems+n.length>10){alert('Max of 10 images allowed');return;}this.props.onItemsAdded(n);}});f.exports=m;},null);
__d('RichMediaEditorCarouselPhotoUploader.react',['cx','fbt','AdsXUIProgressBar.react','FileInput.react','Image.react','React','XUIButton.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=72,l=324,m=c('React').createClass({displayName:'RichMediaEditorCarouselPhotoUploader',propTypes:{disabled:j.bool,pageID:j.string.isRequired,previewHeight:j.number,previewPhoto:j.shape({height:j.number.isRequired,src:j.string.isRequired,width:j.number.isRequired}),uploadStatus:j.shape({isUploading:j.bool,percentage:j.number}),onPhotoUpload:j.func.isRequired},render:function(){return (c('React').createElement('div',{className:"_e2_"},this._renderPhotoPreview(),this._renderPhotoUploadButton()));},_renderPhotoPreview:function(){if(this.props.previewPhoto){var n=this.props.previewPhoto.height,o=this.props.previewPhoto.width,p=this.props.previewHeight?this.props.previewHeight:k,q=p/n;if(q*o>l)q=l/o;return (c('React').createElement('div',{className:"_e30"},c('React').createElement(c('Image.react'),{className:"_1-89",height:n*q,src:this.props.previewPhoto.src,width:o*q})));}return (c('React').createElement('div',{className:"_e31"},c('React').createElement(c('Image.react'),{className:"_e32",src:'/images/ads/rich_media/photo_placeholder.png'})));},_renderPhotoUploadButton:function(){var n=this.props.uploadStatus;if(n&&n.isUploading){return (c('React').createElement('div',{className:"_e33"},c('React').createElement(c('AdsXUIProgressBar.react'),{className:"_e34",max:100,min:0,striped:true,value:n.percentage}),c('React').createElement('div',{className:"_e35"},'UPLOADING')));}else{var o=this.props.previewPhoto?i._("Replace Photo"):i._("Upload Photo");return (c('React').createElement('div',{className:"_e33"},c('React').createElement(c('FileInput.react'),{accept:'image/*',disabled:this.props.disabled,name:'file',onChange:this._onPhotoUpload},c('React').createElement(c('XUIButton.react'),{disabled:this.props.disabled,href:'#',label:o}))));}},_onPhotoUpload:function(event){if(event.target.files.length<=0)return;this.props.onPhotoUpload(event.target.files);}});f.exports=m;},null);
__d('RichMediaEditorLayoutSelector.react',['cx','fbt','React','Tooltip','XUIRadioList.react','FbtResult'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('XUIRadioList.react').Item,k=c('React').PropTypes,l={fit_to_width:{text:i._("Default"),iconURL:'/images/ads/rich_media/layout_fit_to_width.png'},fit_to_height:{text:i._("Tilt to Pan"),iconURL:'/images/ads/rich_media/layout_fit_to_height.png',imageTooltip:i._("Let people tilt their device to rotate the image side to side"),videoTooltip:i._("Great for videos that don't have a story arc, like ones that focus more on scenery or ambiance.")},expandable:{text:i._("Tap to Expand"),iconURL:'/images/ads/rich_media/layout_fit_to_width_expandable.png',imageTooltip:i._("Let people tap the image to see it full screen and zoom")}},m=c('React').createClass({displayName:'RichMediaEditorLayoutSelector',propTypes:{contentType:k.string.isRequired,disabled:k.bool,layout:k.string.isRequired,layoutOptions:k.arrayOf(k.string).isRequired,onLayoutChanged:k.func.isRequired},render:function(){return (c('React').createElement('div',{className:"_5afg"},c('React').createElement(c('XUIRadioList.react'),{selectedValue:this.props.layout,onValueChange:this.props.onLayoutChanged},this.props.layoutOptions.map(function(n){if(n in l){var o=l[n],p=null;if(this.props.contentType==='video'&&'videoTooltip' in o){p=o.videoTooltip;}else if(this.props.contentType==='image'&&'imageTooltip' in o)p=o.imageTooltip;return (c('React').createElement(j,{className:"_5afh",disabled:this.props.disabled,key:n,value:n},this._renderLayoutOption(n,this.props.layout===n,o.iconURL,o.text,p)));}}.bind(this)))));},_renderLayoutOption:function(n,o,p,q,r){var s=o?'/images/ads/rich_media/check.png':'/images/ads/rich_media/uncheck.png';return (c('React').createElement('div',null,c('React').createElement('div',{className:"_5afi"},c('React').createElement('img',{height:16,src:s,width:16})),c('React').createElement('div',babelHelpers['extends']({className:"_1wan"},c('Tooltip').propsFor(r)),c('React').createElement('div',{className:"_5afi"},c('React').createElement('img',{height:28,src:p,width:28})),c('React').createElement('div',{className:"_5afj"},c('React').createElement('span',null,q)))));}});f.exports=m;},null);
__d('RichMediaEditorCarouselElementEditPanel.react',['cx','fbt','xuiglyph','Grid.react','Image.react','Link.react','React','RichMediaCarouselElement','RichMediaCarouselItem','RichMediaEditorCarouselElementEditPanelItemSelectBar.react','RichMediaEditorCarouselItemEditPanel.react','RichMediaEditorLayoutSelector.react','XUIButton.react'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=10,m=c('React').createClass({displayName:'RichMediaEditorCarouselElementEditPanel',propTypes:{carouselElement:k.instanceOf(c('RichMediaCarouselElement')).isRequired,disabled:k.bool,pageID:k.string.isRequired,onAddFilesToDocumentElement:k.func.isRequired,onEditDocumentElement:k.func.isRequired,onReplaceFileInDocumentElement:k.func.isRequired},render:function(){return (c('React').createElement('div',{className:"_48pm"},c('React').createElement('div',{className:"_48pn"},i._("Use a carousel of images to tell a progressive story. Upload at least 2 images. Images must be the same size.")),c('React').createElement(c('RichMediaEditorCarouselElementEditPanelItemSelectBar.react'),{disabled:this.props.disabled,numItems:this.props.carouselElement.items.length,selectedItem:this.props.carouselElement.selectedItemIndex,onItemSelected:this._onItemSelected,onItemsAdded:this._onAddItems}),this._renderItemEditPanel(),c('React').createElement('div',{className:"_48pg"},c('React').createElement('div',{className:"_48pj"},i._("Carousel Scaling")),c('React').createElement('div',{className:"_48pk"},c('React').createElement(c('RichMediaEditorLayoutSelector.react'),{contentType:'image',disabled:this.props.disabled,layout:this.props.carouselElement.layout,layoutOptions:['fit_to_width','fit_to_height'],onLayoutChanged:this._onChangeLayout})))));},_renderItemEditPanel:function(){if(this.props.carouselElement.items.length<=0)return null;var n=this.props.carouselElement.items,o=n[this.props.carouselElement.selectedItemIndex];return (c('React').createElement('div',{background:'light-wash',className:"_4fme"},this.props.disabled?null:c('React').createElement(c('Link.react'),{className:"_2824",onClick:this._onRemoveItem},i._("Remove")),c('React').createElement(c('RichMediaEditorCarouselItemEditPanel.react'),{carouselItem:o,disabled:this.props.disabled,itemIndex:this.props.carouselElement.selectedItemIndex,layout:this.props.carouselElement.layout,pageID:this.props.pageID,ref:'editPanel',onEditCarouselItem:this._onEditCarouselItem,onPhotoUpload:this._onPhotoUpload})));},_getItemsCopy:function(){return this.props.carouselElement.items.map(function(n){return n;});},_onAddItems:function(n){this.props.onAddFilesToDocumentElement(this.props.carouselElement,this.props.pageID,n);},_onPhotoUpload:function(n){this.props.onReplaceFileInDocumentElement(this.props.carouselElement,this.props.pageID,this.props.carouselElement.items[this.props.carouselElement.selectedItemIndex].id,n);},_onRemoveItem:function(){var n=this._getItemsCopy(),o=this.props.carouselElement.selectedItemIndex,p=n.splice(o,1)[0];for(var q=o;q<n.length;++q)n[q]=n[q].set('index',n[q].index-1);if(o>=n.length){this.props.onEditDocumentElement(this.props.carouselElement.set('selectedItemIndex',Math.max(n.length-1,0)).set('items',n));}else this.props.onEditDocumentElement(this.props.carouselElement.set('items',n));if(p.uploadStatus.isUploading&&p.uploadRequest)p.uploadRequest.abort();},_onItemSelected:function(n){this.props.onEditDocumentElement(this.props.carouselElement.set('selectedItemIndex',n));},_onEditCarouselItem:function(n){var o=this.props.carouselElement.selectedItemIndex,p=this._getItemsCopy();p[o]=n;this.props.onEditDocumentElement(this.props.carouselElement.set('items',p));},_onChangeLayout:function(n){this.props.onEditDocumentElement(this.props.carouselElement.set('layout',n));}});f.exports=m;},null);
__d('RichMediaEditorDesignFormatEditPanel.react',['cx','fbt','React','RichMediaDocumentThemeConstants','RichMediaEditorColorInput.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('RichMediaDocumentThemeConstants').WHITE,l=c('RichMediaDocumentThemeConstants').BLACK,m=c('React').createClass({displayName:'RichMediaEditorThemeOption',propTypes:{disabled:j.bool,isChecked:j.bool.isRequired,isWhite:j.bool.isRequired,onClick:j.func.isRequired},render:function(){var o=this.props.isChecked?'/images/ads/rich_media/check.png':'/images/ads/rich_media/uncheck.png';return (c('React').createElement('div',{className:"_229q",onClick:this.props.disabled?null:this.props.onClick},c('React').createElement('div',{className:"_4koi"},c('React').createElement('img',{className:"_4koj",src:o})),c('React').createElement('div',{className:"_74s"+(this.props.isWhite?' '+"_229v":'')+(!this.props.isWhite?' '+"_229-":'')}),c('React').createElement('div',{className:"_229w"},c('React').createElement('h2',{className:"_229x"},this.props.isWhite?i._("White"):i._("Black")))));}}),n=c('React').createClass({displayName:'RichMediaEditorDesignFormatEditPanel',propTypes:{customizeThemeColor:j.string.isRequired,disabled:j.bool,documentTheme:j.string.isRequired,useCustomizeThemeColor:j.bool.isRequired,onSetCustomizeThemeColor:j.func.isRequired,onSetDocumentThemeBlack:j.func.isRequired,onSetDocumentThemeWhite:j.func.isRequired,onSetUseCustomizeThemeColor:j.func.isRequired},render:function(){var o=this.props.documentTheme===k,p=this.props.documentTheme===l,q=this.props.useCustomizeThemeColor?'/images/ads/rich_media/check.png':'/images/ads/rich_media/uncheck.png';return (c('React').createElement('div',{className:"_229n"},c('React').createElement('div',{className:"_229o"},c('React').createElement(m,{disabled:this.props.disabled,isChecked:o&&!this.props.useCustomizeThemeColor,isWhite:true,onClick:this.props.onSetDocumentThemeWhite}),c('React').createElement(m,{disabled:this.props.disabled,isChecked:p&&!this.props.useCustomizeThemeColor,isWhite:false,onClick:this.props.onSetDocumentThemeBlack}),c('React').createElement('div',{className:"_229q",onClick:this.props.disabled?null:this._onClickCustomizeColorChecker},c('React').createElement('div',{className:"_4koi"},c('React').createElement('img',{className:"_4koj",src:q})),c('React').createElement('div',{className:"_74s"},c('React').createElement(c('RichMediaEditorColorInput.react'),{color:'#'+this.props.customizeThemeColor.substr(2),disabled:this.props.disabled,onChange:this._onChangeCustomColor})),c('React').createElement('div',{className:"_229w"},c('React').createElement('h2',{className:"_229x"},i._("Custom")))))));},_onChangeCustomColor:function(o){this.props.onSetCustomizeThemeColor('FF'+o.substr(1));},_onClickCustomizeColorChecker:function(){this.props.onSetUseCustomizeThemeColor();}});f.exports=n;},null);
__d('RichMediaEditorDesignFormatEditPanelContainer.react',['FluxContainer','FluxStore','React','RichMediaEditorActions','RichMediaEditorDesignFormatEditPanel.react','RichMediaEditorStore','RichMediaDocumentThemeConstants'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('RichMediaDocumentThemeConstants').WHITE,k=c('RichMediaDocumentThemeConstants').BLACK;h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(m){i.constructor.call(this,m);}l.getStores=function(){return [c('RichMediaEditorStore')];};l.calculateState=function(){var m=c('RichMediaEditorStore').getDocumentTheme(),n=c('RichMediaEditorStore').getUseCustomizeThemeColor(),o=c('RichMediaEditorStore').getCustomizeThemeColor();return {customizeThemeColor:o,documentTheme:m,useCustomizeThemeColor:n};};l.prototype.render=function(){return (c('React').createElement(c('RichMediaEditorDesignFormatEditPanel.react'),{customizeThemeColor:this.state.customizeThemeColor,disabled:this.props.disabled,documentTheme:this.state.documentTheme,useCustomizeThemeColor:this.state.useCustomizeThemeColor,onSetCustomizeThemeColor:this.$RichMediaEditorDesignFormatEditPanelContainer1,onSetDocumentThemeBlack:this.$RichMediaEditorDesignFormatEditPanelContainer2,onSetDocumentThemeWhite:this.$RichMediaEditorDesignFormatEditPanelContainer3,onSetUseCustomizeThemeColor:this.$RichMediaEditorDesignFormatEditPanelContainer4}));};l.prototype.$RichMediaEditorDesignFormatEditPanelContainer2=function(){c('RichMediaEditorActions').setDocumentTheme(k);c('RichMediaEditorActions').setUseCustomizeThemeColor(false);};l.prototype.$RichMediaEditorDesignFormatEditPanelContainer3=function(){c('RichMediaEditorActions').setDocumentTheme(j);c('RichMediaEditorActions').setUseCustomizeThemeColor(false);};l.prototype.$RichMediaEditorDesignFormatEditPanelContainer1=function(m){c('RichMediaEditorActions').setCustomizeThemeColor(m);};l.prototype.$RichMediaEditorDesignFormatEditPanelContainer4=function(){c('RichMediaEditorActions').setUseCustomizeThemeColor(true);};f.exports=c('FluxContainer').create(l);},null);
__d('RichMediaEditorExpandableItemEditorBody.react',['cx','React'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'RichMediaEditorExpandableItemEditorBody',propTypes:{expanded:i.bool},render:function(){return (c('React').createElement('div',{className:(this.props.expanded?"_q25":'')+(!this.props.expanded?' '+"_q26":'')},this.props.children));}});f.exports=j;},null);
__d('RichMediaEditorExpandableItemEditorTitle.react',['ix','cx','Image.react','React','fbglyph'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=50,l=c('React').createClass({displayName:'RichMediaEditorExpandableItemEditorTitle',propTypes:{canEditTitle:j.bool.isRequired,expanded:j.bool.isRequired,moveElementDownEnabled:j.bool,moveElementUpEnabled:j.bool,showControls:j.bool.isRequired,title:j.string.isRequired,trashButtonEnabled:j.bool,validationInfo:j.object,onChangeExpanded:j.func.isRequired,onChangeTitle:j.func.isRequired,onDeleteElement:j.func.isRequired,onMoveElementDown:j.func.isRequired,onMoveElementUp:j.func.isRequired},getInitialState:function(){return {titleInputFocused:false};},render:function(){var m=null,n=null;if(this.props.showControls){if(this.props.validationInfo&&!this.props.validationInfo.isValid)n=c('React').createElement('div',{className:"_5drh"},this.props.validationInfo.errorMsg);var o=this.props.moveElementUpEnabled?h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/arrow-up-solid_20_bluegray-40.png"):h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/arrow-up-solid_20_bluegray-10.png"),p=this.props.moveElementDownEnabled?h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/arrow-down-solid_20_bluegray-40.png"):h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/arrow-down-solid_20_bluegray-10.png"),q=this.props.trashButtonEnabled?h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/trash_20_bluegray-40.png"):h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/trash_20_bluegray-10.png");m=c('React').createElement('div',{className:"_2m45"},c('React').createElement('div',{className:"_3-32"}),c('React').createElement('div',{className:"_2m46"+(this.props.moveElementUpEnabled?' '+"_1nym":'')},c('React').createElement(c('Image.react'),{src:o,onClick:this.props.moveElementUpEnabled?this.props.onMoveElementUp:null})),c('React').createElement('div',{className:"_2m46"+(this.props.moveElementDownEnabled?' '+"_1nym":'')},c('React').createElement(c('Image.react'),{src:p,onClick:this.props.moveElementDownEnabled?this.props.onMoveElementDown:null})),c('React').createElement('div',{className:"_2m46"+(this.props.trashButtonEnabled?' '+"_1nym":'')},c('React').createElement(c('Image.react'),{src:q,onClick:this.props.trashButtonEnabled?this.props.onDeleteElement:null})));}var r=this.props.expanded?h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/chevron-down_20_bluegray-40.png"):h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/chevron-right_20_bluegray-40.png"),s=this.props.canEditTitle?c('React').createElement('input',{className:"_45g7",disabled:!this.props.canEditTitle,size:this.props.title.length+3,type:'text',value:this.props.title,onBlur:this._onTitleInputBlur,onChange:this._onChangeTitle,onClick:this._onClickTitle}):c('React').createElement('span',null,this.props.title);return (c('React').createElement('div',{className:"_37pn"+(!this.props.expanded?' '+"_2m47":'')},c('React').createElement('div',{className:"_18ty",onClick:this._onClickExpandArea},c('React').createElement('div',{className:"_2m48"},c('React').createElement(c('Image.react'),{src:r})),c('React').createElement('div',{className:"_45g6"},s),n),m));},_onClickExpandArea:function(event){if(event.target.tagName.toUpperCase()=='INPUT')return;this.props.onChangeExpanded(!this.props.expanded);},_onTitleInputBlur:function(){this.setState({titleInputFocused:false});},_onClickTitle:function(event){if(this.state.titleInputFocused)return;event.target.select();this.setState({titleInputFocused:true});},_onChangeTitle:function(event){if(event.target.value.length>k)return;this.props.onChangeTitle(event.target.value);}});f.exports=l;},null);
__d('RichMediaElementUtil',['InstantShoppingDocumentElementType','RichMediaButtonElement','RichMediaCarouselElement','RichMediaHeaderElement','RichMediaPhotoElement','RichMediaProductSetElement','RichMediaTextElement','RichMediaVideoElement'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={validateElement:function(i){switch(i.type){case c('InstantShoppingDocumentElementType').RICH_TEXT:return c('RichMediaTextElement').validate(i);case c('InstantShoppingDocumentElementType').PHOTO:return c('RichMediaPhotoElement').validate(i);case c('InstantShoppingDocumentElementType').VIDEO:return c('RichMediaVideoElement').validate(i);case c('InstantShoppingDocumentElementType').BUTTON:return c('RichMediaButtonElement').validate(i);case c('InstantShoppingDocumentElementType').SLIDESHOW:return c('RichMediaCarouselElement').validate(i);case c('InstantShoppingDocumentElementType').HEADER:return c('RichMediaHeaderElement').validate(i);case c('InstantShoppingDocumentElementType').ELEMENT_GROUP:return c('RichMediaProductSetElement').validate(i);}return {isValid:true,errorMsg:''};},getFixToBottomButtonElement:function(i){for(var j=0;j<i.length;++j)if(i[j].type===c('InstantShoppingDocumentElementType').BUTTON&&i[j].isFixedToBottom)return i[j];return null;},getHeaderElement:function(i){if(i.length===0)return null;if(i[0].type===c('InstantShoppingDocumentElementType').HEADER)return c('RichMediaHeaderElement').createFromObject(i[0]);return null;},hasFixToTopHeaderElement:function(i){if(i.length===0)return false;if(i[0].type===c('InstantShoppingDocumentElementType').HEADER)return i[0].isOpaque();return false;},isContentUploadingInElement:function(i){if(i.uploadStatus){var j=i.uploadStatus;switch(i.type){case c('InstantShoppingDocumentElementType').PHOTO:if(j.isUploading)return true;break;case c('InstantShoppingDocumentElementType').VIDEO:if(j.isUploading||j.isEncoding)return true;break;default:break;}}else if(i.type===c('InstantShoppingDocumentElementType').SLIDESHOW){var k=i.items;for(var l=0;l<k.length;l++)if(k[l].uploadStatus&&k[l].uploadStatus.isUploading)return true;}return false;}};f.exports=h;},null);
__d('RichMediaEditorExpandableItemEditor.react',['React','RichMediaEditorExpandableItemEditorBody.react','RichMediaEditorExpandableItemEditorTitle.react','RichMediaButtonElement','RichMediaCarouselElement','RichMediaElementUtil','RichMediaHeaderElement','RichMediaPhotoElement','RichMediaProductSetElement','RichMediaTextElement','RichMediaVideoElement','RichMediaEditorConstants'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('RichMediaEditorConstants').EDITOR_ELEMENT_ID_PREFIX,j=c('React').createClass({displayName:'RichMediaEditorExpandableItemEditor',propTypes:{canEditTitle:h.bool.isRequired,element:h.oneOfType([h.objectOf(c('RichMediaButtonElement')),h.objectOf(c('RichMediaCarouselElement')),h.objectOf(c('RichMediaHeaderElement')),h.objectOf(c('RichMediaPhotoElement')),h.objectOf(c('RichMediaTextElement')),h.objectOf(c('RichMediaVideoElement')),h.objectOf(c('RichMediaProductSetElement'))]),expanded:h.bool.isRequired,moveElementDownEnabled:h.bool,moveElementUpEnabled:h.bool,title:h.string.isRequired,trashButtonEnabled:h.bool,validationInfo:h.object,onDeleteElement:h.func.isRequired,onEditDocumentElement:h.func.isRequired,onMoveElementDown:h.func.isRequired,onMoveElementUp:h.func.isRequired},getInitialState:function(){return {expanded:this.props.expanded};},render:function(){return (c('React').createElement('div',{id:this.props.element?i+this.props.element.index:null},c('React').createElement(c('RichMediaEditorExpandableItemEditorTitle.react'),{canEditTitle:this.props.canEditTitle,expanded:this.state.expanded,moveElementDownEnabled:this.props.moveElementDownEnabled,moveElementUpEnabled:this.props.moveElementUpEnabled,showControls:!!this.props.element,title:this.props.title,trashButtonEnabled:this.props.trashButtonEnabled,validationInfo:this.props.validationInfo,onChangeExpanded:this._onChangeExpanded,onChangeTitle:this._onChangeTitle,onDeleteElement:this._onDeleteElement,onMoveElementDown:this._onMoveElementDown,onMoveElementUp:this._onMoveElementUp}),c('React').createElement(c('RichMediaEditorExpandableItemEditorBody.react'),{expanded:this.state.expanded},this.props.children)));},_onChangeExpanded:function(k){var l=this.props.element;if(!!l&&c('RichMediaElementUtil').isContentUploadingInElement(l))return;this.setState({expanded:k});if(l)this.props.onEditDocumentElement(l.set('expanded',k));},_onChangeTitle:function(k){if(this.props.element)this.props.onEditDocumentElement(this.props.element.set('name',k));},_onMoveElementUp:function(){if(this.props.element)this.props.onMoveElementUp(this.props.element);},_onMoveElementDown:function(){if(this.props.element)this.props.onMoveElementDown(this.props.element);},_onDeleteElement:function(){if(this.props.element)this.props.onDeleteElement(this.props.element);}});f.exports=j;},null);
__d('RichMediaEditorUploadRequest',['invariant','ActorURI','FileInputUploader','XCanvasPhotoUploadController'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(j){this.$RichMediaEditorUploadRequest1=j;if(this.$RichMediaEditorUploadRequest1.files)!(this.$RichMediaEditorUploadRequest1.files.length===1||Object.keys(this.$RichMediaEditorUploadRequest1.files).length===1)?h(0):undefined;this.$RichMediaEditorUploadRequest2=new (c('FileInputUploader'))(this.$RichMediaEditorUploadRequest1.fileInput);if(this.$RichMediaEditorUploadRequest1.onProgress)this.$RichMediaEditorUploadRequest2.subscribe('progress',function(l,m){var event=m.event;if(event.lengthComputable)this.$RichMediaEditorUploadRequest1.onProgress(event.loaded/event.total*100);}.bind(this));if(this.$RichMediaEditorUploadRequest1.onSuccess)this.$RichMediaEditorUploadRequest2.subscribe('success',function(l,m){this.$RichMediaEditorUploadRequest1.onSuccess(m);}.bind(this));if(this.$RichMediaEditorUploadRequest1.onError)this.$RichMediaEditorUploadRequest2.subscribe('error',function(l,m){this.$RichMediaEditorUploadRequest1.onError(m);}.bind(this));var k=c('ActorURI').create(c('XCanvasPhotoUploadController').getURIBuilder().getURI(),this.$RichMediaEditorUploadRequest1.pageID);this.$RichMediaEditorUploadRequest2.setURI(k);}i.prototype.send=function(){this.$RichMediaEditorUploadRequest2.send();};f.exports=i;},null);
__d('RichMediaEditorPhotoUploader.react',['cx','fbt','AdsXUIProgressBar.react','CanvasCreationEvent','CanvasCreationWaterfallTypedLogger','AdsCanvasImageSizeWarning','FileInput.react','Image.react','Layout.react','React','RichMediaEditorUploadRequest','RichMediaPhotoElement','XUIButton.react','XUIDialog.react','XUIDialogTitle.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('Layout.react').FillColumn,l=72,m=324,n=2048,o=2048,p=2,q=function(s){if(!s.previewPhoto||!s.isNewlyUploadedImage||!c('AdsCanvasImageSizeWarning').enabled)return null;var t=s.previewPhoto.originalWidth?s.previewPhoto.originalWidth:0,u=s.previewPhoto.originalHeight?s.previewPhoto.originalHeight:0;if(t<n*p&&u<o*p){s.onDialogDismissed();return null;}new (c('CanvasCreationWaterfallTypedLogger'))().setEventName(c('CanvasCreationEvent').EDITOR_PHOTO_ASPECT_RATIO_WARNING).setEditorPhotoWidth(t).setEditorPhotoHeight(u).setPageID(s.pageID).log();return (c('React').createElement(c('XUIDialog.react'),{shown:true,width:450},c('React').createElement(c('XUIDialogTitle.react'),null,c('React').createElement('div',{className:"_2cde"},i._("Warning! Image Dimension too large"))),c('React').createElement(c('XUIDialogBody.react'),null,c('React').createElement(c('Layout.react'),null,c('React').createElement(k,{className:"_2cdf"},c('React').createElement('div',{className:"_2cdg"},i._("The dimensions of the image uploaded is too large and will be downsampled. To preserve image quality, consider reuploading a smaller image"))))),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',label:i._("Continue"),onClick:s.onDialogDismissed}))));},r=c('React').createClass({displayName:'RichMediaEditorPhotoUploader',propTypes:{disabled:j.bool,pageID:j.string.isRequired,photoElement:j.instanceOf(c('RichMediaPhotoElement')),previewHeight:j.number,previewPhoto:j.shape({height:j.number.isRequired,src:j.string.isRequired,width:j.number.isRequired,originalWidth:j.number,originalHeight:j.number}),uploadStatus:j.shape({isUploading:j.bool,percentage:j.number}),onPhotoUploaded:j.func.isRequired,onUploadStatusChanged:j.func.isRequired},getInitialState:function(){return {isNewlyUploadedImage:false};},render:function(){return (c('React').createElement('div',{className:"_e2_"},this._renderPhotoPreview(),this._renderPhotoUploadButton()));},_renderPhotoPreview:function(){if(this.props.previewPhoto){var s=this.props.previewPhoto.height,t=this.props.previewPhoto.width,u=this.props.previewHeight?this.props.previewHeight:l,v=u/s;if(v*t>m)v=m/t;return (c('React').createElement('div',{className:"_e30"},c('React').createElement(c('Image.react'),{className:"_1-89",height:s*v,src:this.props.previewPhoto.src,width:t*v})));}return (c('React').createElement('div',{className:"_e31"},c('React').createElement(c('Image.react'),{className:"_e32",src:'/images/ads/rich_media/photo_placeholder.png'})));},_renderPhotoUploadButton:function(){var s=this.props.uploadStatus;if(s&&s.isUploading){return (c('React').createElement('div',{className:"_e33"},c('React').createElement(c('AdsXUIProgressBar.react'),{className:"_e34",max:100,min:0,striped:true,value:s.percentage}),c('React').createElement('div',{className:"_e35"},'UPLOADING')));}else{var t=this.props.previewPhoto?i._("Replace Photo"):i._("Upload Photo");return (c('React').createElement('div',{className:"_e33"},c('React').createElement(c('FileInput.react'),{accept:'image/*',disabled:this.props.disabled,name:'file',onChange:this._onPhotoUpload},c('React').createElement(c('XUIButton.react'),{disabled:this.props.disabled,href:'#',label:t}),c('React').createElement(q,{isNewlyUploadedImage:this.state.isNewlyUploadedImage,previewPhoto:this.props.previewPhoto,onDialogDismissed:this._dismissPhotoSizeWarning,pageID:this.props.pageID}))));}},_dismissPhotoSizeWarning:function(){this.setState({isNewlyUploadedImage:false});},_onPhotoUpload:function(event){if(event.target.files.length<=0)return;var s={fileInput:event.target,files:event.target.files,pageID:this.props.pageID,onProgress:this._onUploadProgress,onSuccess:this._onUploadSuccess,onError:this._onUploadError};new (c('RichMediaEditorUploadRequest'))(s).send();event.target.value=null;this.props.onUploadStatusChanged({isUploading:true,percentage:0});},_onUploadSuccess:function(s){this.setState({isNewlyUploadedImage:true});this.props.onUploadStatusChanged({isUploading:false});this.props.onPhotoUploaded(s.response.payload.photo);},_onUploadError:function(s){this.props.onUploadStatusChanged({isUploading:false});},_onUploadProgress:function(s){this.props.onUploadStatusChanged({isUploading:true,percentage:s});}});f.exports=r;},null);
__d('RichMediaEditorHeaderElementEditPanel.react',['cx','fbt','invariant','CanvasColorUtils','colr','React','RichMediaEditorColorInput.react','RichMediaEditorPhotoUploader.react','RichMediaHeaderElement'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('React').createClass({displayName:'RichMediaEditorHeaderElementEditPanel',propTypes:{disabled:k.bool,headerElement:k.instanceOf(c('RichMediaHeaderElement')).isRequired,onEditDocumentElement:k.func.isRequired},render:function(){var m=this._getColorWithOpacityFromProps();return (c('React').createElement('div',{className:"_48pm"},c('React').createElement('div',{className:"_48pn"},i._("Upload a logo for your Canvas. For best results images should be 120 x 44 pixels")),c('React').createElement('div',{className:"_48po"},c('React').createElement(c('RichMediaEditorPhotoUploader.react'),{disabled:this.props.disabled,pageID:this.props.pageID,previewHeight:44,previewPhoto:this.props.headerElement.photo,uploadStatus:this.props.headerElement.uploadStatus,onPhotoUploaded:this._onPhotoUploaded,onUploadStatusChanged:this._onUploadStatusChanged})),c('React').createElement('div',{className:"_48pg"},c('React').createElement('div',{className:"_48pj"},i._("Background Color")),c('React').createElement('div',{className:"_48pk"},c('React').createElement(c('RichMediaEditorColorInput.react'),{color:'#'+m.color,disabled:this.props.disabled,onChange:this._onChangeBackgroundColor}))),c('React').createElement('div',{className:"_48pg"},c('React').createElement('div',{className:"_48pj"},i._("Background Opacity")),c('React').createElement('div',{className:"_48pk"},c('React').createElement('input',{disabled:this.props.disabled,max:'100',min:'0',type:'number',value:m.opacity,onChange:this._onOpacityChange})))));},_onPhotoUploaded:function(m){this.props.onEditDocumentElement(this.props.headerElement.set('photo',m));},_onUploadStatusChanged:function(m){this.props.onEditDocumentElement(this.props.headerElement.set('uploadStatus',m));},_getColorWithOpacityFromProps:function(){var m=this.props.headerElement.backgroundColor;if(m)return c('CanvasColorUtils').convertARGBToColorWithOpacity(m);return {color:'FFFFFF',opacity:100};},_onChangeBackgroundColor:function(m){var n=c('colr').fromHex(m).toHex();if(n.charAt(0)==='#')n=n.slice(1);this.props.onEditDocumentElement(this.props.headerElement.set('backgroundColor',c('CanvasColorUtils').convertColorWithOpacityToARGB({color:n,opacity:this._getColorWithOpacityFromProps().opacity})));},_onOpacityChange:function(m){var n=m.target;!(n instanceof HTMLInputElement)?j(0):undefined;this.props.onEditDocumentElement(this.props.headerElement.set('backgroundColor',c('CanvasColorUtils').convertColorWithOpacityToARGB({color:this._getColorWithOpacityFromProps().color,opacity:parseInt(n.value,10)})));}});f.exports=l;},null);
__d('RichMediaEditorPhotoElementEditPanel.react',['cx','fbt','React','RichMediaPhotoElement','RichMediaEditorLayoutSelector.react','RichMediaEditorPhotoUploader.react','RichMediaEditorUtil','Tooltip','XUITextInput.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'RichMediaEditorPhotoElementEditPanel',propTypes:{disabled:j.bool,pageID:j.string.isRequired,photoElement:j.instanceOf(c('RichMediaPhotoElement')).isRequired,onEditDocumentElement:j.func.isRequired},render:function(){var l=this.props.photoElement.layout==='fit_to_height'||this.props.photoElement.layout==='expandable';return (c('React').createElement('div',{className:"_48pm"},c('React').createElement('div',{className:"_48pn"},i._("Recommended image size: at least 640 pixels by 72 dpi")),c('React').createElement('div',{className:"_48po"},c('React').createElement(c('RichMediaEditorPhotoUploader.react'),{disabled:this.props.disabled,pageID:this.props.pageID,previewPhoto:this.props.photoElement.photo,uploadStatus:this.props.photoElement.uploadStatus,onPhotoUploaded:this._onPhotoUploaded,onUploadStatusChanged:this._onUploadStatusChanged})),c('React').createElement('div',babelHelpers['extends']({className:"_48pg"},c('Tooltip').propsFor(l?i._("Link target is not available when layout is fit to height"):null)),c('React').createElement('div',{className:"_48pj"+(l?' '+"_hv6":'')},i._("Destination URL (optional)")),c('React').createElement('div',{className:"_48pk"+(l?' '+"_hv6":'')},c('React').createElement(c('XUITextInput.react'),{className:"_48pl",disabled:l||this.props.disabled,height:'tall',placeholder:'http://',value:this.props.photoElement.link,onBlur:this._onBlurURLInput,onChange:this._onChangeURL}))),c('React').createElement('div',{className:"_48pg"},c('React').createElement('div',{className:"_48pj"},i._("Image Options")),c('React').createElement('div',{className:"_48pk"},c('React').createElement(c('RichMediaEditorLayoutSelector.react'),{disabled:this.props.disabled,layout:this.props.photoElement.layout,layoutOptions:['fit_to_width','expandable','fit_to_height'],onLayoutChanged:this._onChangeLayout,contentType:'image'})))));},_onPhotoUploaded:function(l){this.props.onEditDocumentElement(this.props.photoElement.set('photo',l));},_onUploadStatusChanged:function(l){this.props.onEditDocumentElement(this.props.photoElement.set('uploadStatus',l));},_onChangeLayout:function(l){this.props.onEditDocumentElement(this.props.photoElement.set('layout',l));},_onBlurURLInput:function(event){if(c('RichMediaEditorUtil').isValidURL(event.target.value)){var l=c('RichMediaEditorUtil').normalizeURL(event.target.value);this.props.onEditDocumentElement(this.props.photoElement.set('link',l));}},_onChangeURL:function(event){this.props.onEditDocumentElement(this.props.photoElement.set('link',event.target.value));}});f.exports=k;},null);
__d('AdsFluxMixinLegacy',['FluxMixinLegacy'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=arguments.length<=1||arguments[1]===undefined?{withProps:false}:arguments[1];return c('FluxMixinLegacy')(i.filter(function(k){return !!k;}),j);}f.exports=h;},null);
__d('AdsProductCatalogListActions',['AdsActionTypes','AdsDispatcher'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={productCatalogListPartialLoad:function(i,j){c('AdsDispatcher').handleUpdateFromServerResponse({businessID:i,productCatalogs:j,type:c('AdsActionTypes').PRODUCT_CATALOG.LIST.PARTIAL_LOAD});},productCatalogListLoaded:function(i,j){c('AdsDispatcher').handleUpdateFromServerResponse({businessID:i,productCatalogs:j,type:c('AdsActionTypes').PRODUCT_CATALOG.LIST.LOADED});},productCatalogListLoadError:function(i){c('AdsDispatcher').handleUpdateFromServerResponse({businessID:i,type:c('AdsActionTypes').PRODUCT_CATALOG.LIST.LOAD_ERROR});}};f.exports=h;},null);
__d('AdsProductCatalogListDataManager',['fbt','AdsBaseListDataManager','AdsGraphAPI','AdsProductCatalogListActions','GraphAPIPaging','Map'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=['id'];i=babelHelpers.inherits(l,c('AdsBaseListDataManager'));j=i&&i.prototype;l.prototype.loadFor=function(n){c('AdsGraphAPI').getWithGeneralMigration().object('business_id',n).edge('product_catalogs').batched().get({fields:k}).then(c('GraphAPIPaging').eachPage(function(o){return this.$AdsProductCatalogListDataManagerClass1(n,o.data);}.bind(this))).done(this.__handleSuccess.bind(this,['load'],n,null),this.__handleError.bind(this,['load'],n,null));};l.prototype.$AdsProductCatalogListDataManagerClass1=function(n,o){c('AdsProductCatalogListActions').productCatalogListPartialLoad(n,o);};l.prototype.__onBatchLoaded=function(n){n.forEach(function(o,p){c('AdsProductCatalogListActions').productCatalogListLoaded(p,o.data);});};l.prototype.__onBatchLoadError=function(n){n.forEach(function(o,p){c('AdsProductCatalogListActions').productCatalogListLoadError(p);});};l.prototype.__getObjectTypeLabel=function(){return h._("Business");};function l(){i.apply(this,arguments);}var m=new l();f.exports=m;},null);
__d('AdsProductCatalogListStore',['AdsActionTypes','AdsBaseListStore','AdsLoadState','AdsProductCatalogListDataManager'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('AdsBaseListStore'));i=h&&h.prototype;j.prototype.getDataManager=function(){return c('AdsProductCatalogListDataManager');};j.prototype.__onDispatch=function(l){var m=l.action;switch(m.actionType){case c('AdsActionTypes').PRODUCT_CATALOG.LIST.LOADED:this.__handleDataFor(m.businessID,m.productCatalogs,c('AdsLoadState').LOADED);break;case c('AdsActionTypes').PRODUCT_CATALOG.LIST.LOAD_ERROR:this.__handleDataFor(m.businessID,null,c('AdsLoadState').ERROR);break;case c('AdsActionTypes').PRODUCT_CATALOG.LIST.PARTIAL_LOAD:this.__handleDataFor(m.businessID,m.productCatalogs,c('AdsLoadState').LOADING);break;}};function j(){h.apply(this,arguments);}var k=new j();f.exports=k;},null);
__d('AdsProductCatalogSearchSource',['fbt','SearchableEntry','StaticSearchSource'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(){this.init();}i.prototype.init=function(){this.$AdsProductCatalogSearchSource1=null;this.$AdsProductCatalogSearchSource2=null;};i.prototype.getSearchSource=function(j){if(j.length===0)return null;if(this.$AdsProductCatalogSearchSource1&&this.$AdsProductCatalogSearchSource2===j.length)return this.$AdsProductCatalogSearchSource1;this.$AdsProductCatalogSearchSource2=j.map(function(k){return new (c('SearchableEntry'))({uniqueID:k.id,title:k.name,subtitle:h._("ID: {catalog id}",[h.param('catalog id',k.id)]),keywordString:k.id});});this.$AdsProductCatalogSearchSource1=new (c('StaticSearchSource'))(this.$AdsProductCatalogSearchSource2);return this.$AdsProductCatalogSearchSource1;};i.prototype.getProductCatalogEntry=function(j){if(!this.$AdsProductCatalogSearchSource2||!j||!this.$AdsProductCatalogSearchSource2)return null;return this.$AdsProductCatalogSearchSource2.find(function(k){return k.getUniqueID()===j;});};f.exports=new i();},null);
__d('AdsProductCatalogActions',['AdsActionTypes','AdsDispatcher'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={productCatalogBatchLoaded:function(i){c('AdsDispatcher').handleUpdateFromServerResponse({productCatalogs:i,type:c('AdsActionTypes').PRODUCT_CATALOG.BATCH_LOADED});},productCatalogBatchLoadError:function(i){c('AdsDispatcher').handleUpdateFromServerResponse({errors:i,type:c('AdsActionTypes').PRODUCT_CATALOG.BATCH_LOAD_ERROR});}};f.exports=h;},null);
__d('AdsProductCatalogDataManager',['fbt','AdsBaseDataManager','AdsGraphAPI','AdsProductCatalogActions','CurrentUser','Map','sprintf'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=['name','product_count',c('sprintf')('userpermissions.fields(role).user(%s)',c('CurrentUser').getAccountID())];i=babelHelpers.inherits(l,c('AdsBaseDataManager'));j=i&&i.prototype;l.prototype.loadAll=function(n){n.forEach(function(o){return this.load(o);}.bind(this));};l.prototype.load=function(n){c('AdsGraphAPI').getWithGeneralMigration().object('product_catalog',n).batched().get({fields:k}).done(this.__handleSuccess.bind(this,['load'],n,null),this.__handleError.bind(this,['load'],n,null));};l.prototype.__onBatchLoaded=function(n){c('AdsProductCatalogActions').productCatalogBatchLoaded(n);};l.prototype.__onBatchLoadError=function(n){c('AdsProductCatalogActions').productCatalogBatchLoadError(n);};l.prototype.__getObjectTypeLabel=function(){return h._("Product catalog");};function l(){i.apply(this,arguments);}var m=new l();f.exports=m;},null);
__d('AdsProductCatalogStore',['AdsActionTypes','AdsBaseDataManager','AdsBaseDataStore','AdsLoadState','AdsProductCatalogDataManager'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('AdsBaseDataStore'));i=h&&h.prototype;j.prototype.getDataManager=function(){return c('AdsProductCatalogDataManager');};j.prototype.__onDispatch=function(k){var l=k.action;switch(l.type){case c('AdsActionTypes').PRODUCT_CATALOG.BATCH_LOADED:this.__handleData(l.productCatalogs,c('AdsLoadState').LOADED);break;case c('AdsActionTypes').PRODUCT_CATALOG.BATCH_LOAD_ERROR:this.__handleData(l.errors,c('AdsLoadState').ERROR);break;}};function j(){h.apply(this,arguments);}f.exports=new j();},null);
__d('AdsRichSelector.react',['cx','invariant','ContextualLayer.react','ContextualLayerAutoFlip','ContextualLayerUpdateOnScroll','DOM','Image.react','InlineBlock.react','React','ReactDOM','ReactChildren','ReactLayeredComponentMixin','ScrollableArea','ScrollableArea.react','Style','SubscriptionsHandler','XUIError.react','XUIPopoverButton.react','XUISpinner.react','cloneWithProps_DEPRECATED','emptyFunction','joinClasses','requestAnimationFrame'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k={ContextualLayerAutoFlip:c('ContextualLayerAutoFlip'),ContextualLayerUpdateOnScroll:c('ContextualLayerUpdateOnScroll')};function l(r,s,t){!(c('ReactChildren').count(r.children)>0)?i(0):undefined;var u=null,v=c('ReactChildren').map(r.children,function(w){switch(w.type){default:case o:if(t==null&&!r.defaultLabel)t=w.props.value;if(t===w.props.value){u=w;s.selected=true;}else s.selected=false;return c('cloneWithProps_DEPRECATED')(w,s);case p:u=u||l(w.props,s,t).selectedItem;return c('cloneWithProps_DEPRECATED')(w,s);case q:return w;}});return {items:v,selectedItem:u};}var m=c('React').createClass({displayName:'AdsRichSelector',mixins:[c('ReactLayeredComponentMixin')],propTypes:babelHelpers['extends']({alignment:j.oneOf(['left','center','right']),createNewItem:j.node,defaultLabel:j.oneOfType([j.object,j.string]),disabled:j.bool,height:j.number,image:j.object,label:j.oneOfType([j.node,j.string]),maxheight:j.number,maxMenuWidth:j.number,maxwidth:j.number,noLabel:j.bool,onChange:j.func,onDropdown:j.func,requireSelection:j.bool,size:j.string,suppressed:j.bool,useMenuDividers:j.bool},c('XUIError.react').propTypes),_scrollableArea:null,getDefaultProps:function(){return {defaultLabel:'',onDropdown:c('emptyFunction'),requireSelection:true};},getInitialState:function(){!(!this.props.height||!this.props.maxheight)?i(0):undefined;return {preShowLayer:false,showLayer:false,value:this.props.defaultValue};},componentDidMount:function(){this.subscriptions=new (c('SubscriptionsHandler'))();this.subscriptions.addSubscriptions(this.refs.menu.layer.subscribe('blur',this._onBlur),this.refs.menu.layer.subscribe('hide',this._onBlur));this._setMaxHeight();},componentWillReceiveProps:function(r){!(!r.height||!r.maxheight)?i(0):undefined;if('defaultValue' in r)this.setState({value:r.defaultValue});},componentWillUnmount:function(){this.subscriptions.release();},componentDidUpdate:function(r){if(r.maxheight!==this.props.maxheight)this._setMaxHeight();},render:function(){var r={onSelect:this._onSelect},s=l(this.props,r,this.state.value),t=s.selectedItem,u=undefined;if(this.props.label){u=this.props.label;}else if(t){u=this.props.noLabel?'':t.props.label;}else u=this.props.defaultLabel;var v=undefined;if(this.props.image){v=this.props.image;}else if(t){v=t.props.icon;}else v=null;return (c('React').createElement(c('XUIError.react'),this.props,c('React').createElement(c('InlineBlock.react'),{alignv:'middle',className:c('joinClasses')(this.state.showLayer?"openToggler":'',this.props.className),name:null},c('React').createElement(c('XUIPopoverButton.react'),{className:"_5mhp"+(this.state.showLayer?' '+"selected":'')+(this.state.showLayer&&this.props.alignment!='right'?' '+"_nk":'')+(this.state.showLayer&&this.props.alignment=='right'?' '+"_nl":''),'data-hover':'tooltip','data-tooltip-alignh':this.props.alignh||'left','data-tooltip-alignv':this.props.alignv||'above','data-tooltip-content':this.props.tooltip||null,depressed:this.state.showLayer,disabled:this.props.disabled||false,image:v,label:u,maxwidth:this.props.maxwidth||0,ref:'selectorButton',size:this.props.size||'medium',suppressed:this.props.suppressed||false,theme:this.props.theme||'dark',onClick:this._toggleSelector}))));},_getBehaviors:function(){return babelHelpers['extends']({},k,this.props.behaviors);},renderLayers:function(){var r={onSelect:this._onSelect},s=null;if(this.state.showLayer||this.state.preShowLayer)s=l(this.props,r,this.state.value).items;if(this.state.showLayer)this.props.onDropdown();var t=c('React').createElement('ul',{className:"_54nf"+(this.props.useMenuDividers?' '+"_4fau":''),ref:'menuItems',role:'menu',style:{maxWidth:this.props.maxMenuWidth}},s),u=this.props.height?c('React').createElement(c('ScrollableArea.react'),{height:this.props.height},t):t;return {menu:c('React').createElement(c('ContextualLayer.react'),{alignment:this.props.alignment||'left',behaviors:this._getBehaviors(),contextRef:function(){return this.refs.selectorButton;}.bind(this),position:'below',ref:'menu',shown:this.state.showLayer},c('React').createElement('div',{className:"_54nq _575t _57di _558b"},this.props.createNewItem,c('React').createElement('div',{className:"_x4b",ref:'menuContainer'},u)))};},_setMaxHeight:function(){var r=c('ReactDOM').findDOMNode(this.refs.menuItems),s=c('ReactDOM').findDOMNode(this.refs.menuContainer);if(this.props.maxheight){var t=c('ScrollableArea').renderDOM();this._scrollableArea=t.root;c('DOM').setContent(t.content,r);c('Style').set(t.wrap,'max-height',this.props.maxheight+'px');c('DOM').setContent(s,this._scrollableArea);}else if(this._scrollableArea)c('DOM').setContent(s,r);},_toggleSelector:function(){if(!this.props.disabled)this._setLayerShownState(true);},_onBlur:function(){c('requestAnimationFrame')(function(){if(this.isMounted())this._setLayerShownState(false);}.bind(this));},_setLayerShownState:function(r,s){if(r&&r!==this.state.showLayer){this.setState(babelHelpers['extends']({preShowLayer:true},s),function(){this.setState({showLayer:r,preShowLayer:false});}.bind(this));}else this.setState(babelHelpers['extends']({showLayer:r,preShowLayer:false},s));},_onSelect:function(r){this._setLayerShownState(false,{image:r.icon,value:r.value});this.props.onChange&&this.props.onChange(r);}}),n=c('React').createClass({displayName:'AdsRichSelectorLoader',propTypes:{loadComplete:j.bool.isRequired},render:function(){return (c('React').createElement(c('XUISpinner.react'),{background:'light',className:this.props.loadComplete?"hidden_elem":'',size:'large'}));}}),o=c('React').createClass({displayName:'AdsRichSelectorOption',propTypes:{clickable:j.bool,href:j.string,label:j.oneOfType([j.object,j.string]),onSelect:j.func,selected:j.bool,value:j.oneOfType([j.string,j.number])},getDefaultProps:function(){return {clickable:true};},getInitialState:function(){return {highlighted:false};},render:function(){var r=this._renderMenuItemContainer(),s=this.props.clickable,t=null,u=null,v=null;if(s){!this.props.hasOwnProperty('value')?i(0):undefined;t=this._onSelect;u=this._onMouseEnter;v=this._onMouseLeave;r=c('React').createElement('a',{className:"_54nc _4faw",href:this.props.href,ref:'menuItemAnchor',role:'menuitem',tabIndex:'0'},c('React').createElement('div',{className:"_4fax _ftt"}),r);}var w=this.state.highlighted;return (c('React').createElement('li',{className:c('joinClasses')("_54ni"+(s&&w?' '+"_54ne":'')+(s&&this.props.selected?' '+"_4fav":''),this.props.className),onClick:t,onMouseEnter:u,onMouseLeave:v},r));},_renderMenuItemContainer:function(){var r=this.props.children,s=this.props.icon;if(s){!(s.type===c('Image.react'))?i(0):undefined;r=c('React').createElement('div',{className:"_52ps"},c('React').createElement('div',{className:"_52pt prs"},s),r);}return (c('React').createElement('div',{className:"_4fay"},r));},_onSelect:function(r){var s=r.nativeEvent;if(!s||!s.isMiddleClick()&&!s.getModifiers().any){s.preventDefault();this.props.onSelect&&this.props.onSelect({icon:this.props.icon,label:this.props.label,value:this.props.value});}},_onMouseEnter:function(){this.setState({highlighted:true});},_onMouseLeave:function(){this.setState({highlighted:false});}}),p=c('React').createClass({displayName:'AdsRichSelectorOptionGroup',propTypes:{onChange:j.func,onSelect:j.func},getInitialState:function(){return {value:this.props.defaultValue};},componentWillReceiveProps:function(r){if('defaultValue' in r)this.setState({value:r.defaultValue});},_onSelect:function(r){this.setState({value:r.value});this.props.onSelect&&this.props.onSelect(r);this.props.onChange&&this.props.onChange(r);},render:function(){var r=this.props,s=r.className,t=babelHelpers.objectWithoutProperties(r,['className']),u={onSelect:this._onSelect},v=l(t,u,this.state.value),w=v.items;return (c('React').createElement('li',{className:c('joinClasses')(s,"_b_x")},c('React').createElement('ul',null,w)));}}),q=c('React').createClass({displayName:'AdsRichSelectorSeparator',propTypes:{label:j.string,noBorder:j.bool},render:function(){!!(c('ReactChildren').count(this.props.children)&&this.props.label)?i(0):undefined;var r=this.props.children?this.props.children:this._renderSeparatorLabel();!(r||!this.props.noBorder)?i(0):undefined;return (c('React').createElement('li',{className:"_54ak"+(' '+"_52pu")+(!!this.props.noBorder?' '+"_52pv":'')},r));},_renderSeparatorLabel:function(){if(!this.props.label)return null;return (c('React').createElement('h4',{className:"_52ri"},this.props.label));}});m.Loader=n;m.Option=o;m.OptionGroup=p;m.Separator=q;f.exports=m;},null);
__d('Headline.atlas',['cx','PureRenderComponent.atlas','React','Typography.atlas','joinClasses'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l={color:'medium',display:'inline',size:'medium'};i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.defaultProps=l;m.propTypes={color:k.oneOf(['blue','dark','medium']).isRequired,display:k.oneOf(['inline','block']).isRequired,size:k.oneOf(['large','medium','small']).isRequired};m.prototype.render=function(){var n=this.props,o=n.color,p=n.size,q=babelHelpers.objectWithoutProperties(n,['color','size']),r=c('Typography.atlas').getClassName(null,null,o),s=(p==='large'?"_2ak3":'')+(p==='medium'?' '+"_2ak4":'')+(p==='small'?' '+"_2ak5":''),t=c('joinClasses')(this.props.className,"_3ma","_2ak6",r,s);if(this.props.display==='block')return (c('React').createElement('div',babelHelpers['extends']({},q,{className:t}),this.props.children));return (c('React').createElement('span',babelHelpers['extends']({},q,{className:t}),this.props.children));};function m(){i.apply(this,arguments);}f.exports=c('PureRenderComponent.atlas').create(m);},null);
__d('Card.atlas',['cx','FbtResult','Headline.atlas','PureRenderComponent.atlas','React','underscore.ads','joinClasses'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l={contentPadding:'normal',footerPadding:'normal',headerPadding:'normal'};i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.defaultProps=l;m.propTypes={contentPadding:k.oneOf(['none','normal']).isRequired,footerPadding:k.oneOf(['none','normal']).isRequired,headerPadding:k.oneOf(['none','normal']).isRequired,footer:k.node,hasFullHeaderBorder:k.bool,header:k.node};m.prototype.render=function(){var n=this.props.header||null;if(c('underscore.ads').isString(n)||n instanceof c('FbtResult'))n=c('React').createElement('div',{className:"_3ma _5c8h"},c('React').createElement(c('Headline.atlas'),{size:'small'},n));return (c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_5s4i"),'data-testid':this.props['data-testid']},this.props.header?c('React').createElement('div',{className:"_5s4j"+(!this.props.hasFullHeaderBorder&&this.props.headerPadding==='normal'?' '+"_fo7":'')+(this.props.hasFullHeaderBorder&&this.props.headerPadding==='normal'?' '+"_fo8":'')},n):null,c('React').createElement('div',{className:this.props.contentPadding==='normal'?"_5szr":''},this.props.children),this.props.footer?c('React').createElement('div',{className:"_5sfc"+(this.props.footerPadding==='normal'?' '+"_fo9":'')},this.props.footer):null));};function m(){i.apply(this,arguments);}f.exports=c('PureRenderComponent.atlas').create(m);},null);
__d('ContextualLayerHideOnScrollOverHeader.atlas',['csx','DOMQuery','Event','ExecutionEnvironment','SubscriptionsHandler'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(j){this.$ContextualLayerHideOnScrollOverHeader2=j;}i.prototype.enable=function(){if(!this.$ContextualLayerHideOnScrollOverHeader4){var j=new (c('SubscriptionsHandler'))();this.$ContextualLayerHideOnScrollOverHeader4=j;j.addSubscriptions(this.$ContextualLayerHideOnScrollOverHeader2.subscribe('contextchange',this.$ContextualLayerHideOnScrollOverHeader5.bind(this)),this.$ContextualLayerHideOnScrollOverHeader2.subscribe('show',this.$ContextualLayerHideOnScrollOverHeader6.bind(this)),this.$ContextualLayerHideOnScrollOverHeader2.subscribe('hide',this.$ContextualLayerHideOnScrollOverHeader7.bind(this)));}};i.prototype.disable=function(){if(this.$ContextualLayerHideOnScrollOverHeader4){this.$ContextualLayerHideOnScrollOverHeader4.release();this.$ContextualLayerHideOnScrollOverHeader4=undefined;}this.$ContextualLayerHideOnScrollOverHeader7();};i.prototype.$ContextualLayerHideOnScrollOverHeader6=function(){if(this.$ContextualLayerHideOnScrollOverHeader3||!c('ExecutionEnvironment').canUseDOM)return;var j=this.$ContextualLayerHideOnScrollOverHeader2.getContextScrollParent();if(j!==window)return;var k=c('DOMQuery').scry(document.body,"div._i2b");if(k.length!==1)return;var l=k[0].getBoundingClientRect();this.$ContextualLayerHideOnScrollOverHeader1=l.bottom;this.$ContextualLayerHideOnScrollOverHeader3=c('Event').listen(j,'scroll',this.$ContextualLayerHideOnScrollOverHeader8.bind(this));};i.prototype.$ContextualLayerHideOnScrollOverHeader7=function(){this.$ContextualLayerHideOnScrollOverHeader3&&this.$ContextualLayerHideOnScrollOverHeader3.remove();this.$ContextualLayerHideOnScrollOverHeader3=null;};i.prototype.$ContextualLayerHideOnScrollOverHeader8=function(){var j=this.$ContextualLayerHideOnScrollOverHeader2.getContent().getBoundingClientRect().top;if(j<=this.$ContextualLayerHideOnScrollOverHeader1)this.$ContextualLayerHideOnScrollOverHeader2.hide();};i.prototype.$ContextualLayerHideOnScrollOverHeader5=function(){this.$ContextualLayerHideOnScrollOverHeader7();if(this.$ContextualLayerHideOnScrollOverHeader2.isShown())this.$ContextualLayerHideOnScrollOverHeader6();};f.exports=i;},null);
__d('HighlightedText.atlas',['cx','PureRenderComponent.atlas','React','joinClasses'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){return (c('React').createElement('span',{className:c('joinClasses')(this.props.className,"_pi")},this.props.children));};function k(){i.apply(this,arguments);}f.exports=c('PureRenderComponent.atlas').create(k);},null);
__d('TextSearchUtil',['TokenizeUtil'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={isMatch:function(i,j){if(!j)return false;return this._getNonMatchingTokens(i,j).length>1;},getTokens:function(i,j){j=j.trim();var k=this._getNonMatchingTokens(i,j);i=i.replace(/\s+/g,' ');j=j.replace(/\s+/g,' ');var l=[];k.forEach(function(o,p){l.push(o);if(p!==k.length-1)l.push(j);});var m=[],n=0;l.forEach(function(o,p){if(!o)return;var q=p%2===1,r=o.length,s=i.substr(n,r);m.push({text:s,isHighlighted:q});n+=r;});return m;},_getNonMatchingTokens:function(i,j){var k=c('TokenizeUtil').flatten(i),l=c('TokenizeUtil').flatten(j);return l?k.split(l):[k];}};f.exports=h;},null);
__d('TextWithHighlights.atlas',['HighlightedText.atlas','PureRenderComponent.atlas','React','Text.atlas','TextSearchUtil'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=babelHelpers['extends']({},c('Text.atlas').defaultProps,{highlight:''});h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;l.defaultProps=k;l.propTypes=babelHelpers['extends']({},c('Text.atlas').propTypes,{highlight:j.string.isRequired,text:j.string.isRequired});l.prototype.render=function(){var m=this.props,n=undefined;if(!m.highlight){n=m.text;}else{var o=c('TextSearchUtil').getTokens(m.text,m.highlight);n=o.map(function(p,q){if(p.isHighlighted)return (c('React').createElement(c('HighlightedText.atlas'),{key:q},p.text));return p.text;});}return (c('React').createElement(c('Text.atlas'),this.props,n));};function l(){h.apply(this,arguments);}f.exports=c('PureRenderComponent.atlas').create(l);},null);
__d('SearchableListPrompt.contrib',['cx','AbstractSearchSource','AbstractTypeahead.react','Layout.react','React','ReactDOM','ReactComponentWithPureRenderMixin','Scroll','SearchableEntry','Set','Text.atlas','TextWithHighlights.atlas','TypeaheadViewItem','joinClasses'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('Layout.react').Column,j=c('Layout.react').FillColumn,k=c('React').PropTypes,l=c('React').createClass({displayName:'SearchableListPrompt',propTypes:{maxEntries:k.number.isRequired,onSelect:k.func.isRequired,resetQueryStringOnSelect:k.bool.isRequired,searchSource:k.instanceOf(c('AbstractSearchSource')).isRequired,disabledEntryIDs:k.instanceOf(c('Set')),emptySearchResultsText:k.node,excludedEntries:k.object,header:k.node,placeholder:k.node,searchSourceOptions:k.object,selectedEntry:k.instanceOf(c('SearchableEntry')),showEntriesBeforeSearch:k.bool},mixins:[c('ReactComponentWithPureRenderMixin')],getDefaultProps:function(){return {maxEntries:100,resetQueryStringOnSelect:false};},getInitialState:function(){return {queryString:''};},_onChange:function(event){var p=event.target;this.setState({queryString:p.value});},_onSelect:function(p){this.props.onSelect(p);if(this.props.resetQueryStringOnSelect)this.setState({queryString:''});},focusInput:function(){this.refs&&this.refs.typeahead.focusInput();},render:function(){return (c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_4ktx")},c('React').createElement(m,{disabledEntryIDs:this.props.disabledEntryIDs,emptySearchResultsText:this.props.emptySearchResultsText,excludedEntries:this.props.excludedEntries,header:this.props.header,maxEntries:this.props.maxEntries,onChange:this._onChange,onSelectAttempt:this._onSelect,placeholder:this.props.placeholder,queryString:this.state.queryString,ref:'typeahead',searchSource:this.props.searchSource,searchSourceOptions:this.props.searchSourceOptions,selectedEntry:this.props.selectedEntry,showEntriesBeforeSearch:this.props.showEntriesBeforeSearch})));}}),m=c('React').createClass({displayName:'InlineTypeahead',propTypes:{onChange:k.func.isRequired,onSelectAttempt:k.func.isRequired,searchSource:k.object.isRequired,disabledEntryIDs:k.instanceOf(c('Set')),emptySearchResultsText:k.string,excludedEntries:k.object,header:k.node,maxEntries:k.number,onBlur:k.func,onFocus:k.func,placeholder:k.string,queryString:k.string,searchSourceOptions:k.object,selectedEntry:k.instanceOf(c('SearchableEntry')),showEntriesBeforeSearch:k.bool},mixins:[c('ReactComponentWithPureRenderMixin')],getInitialState:function(){return {isFocused:false};},_onFocus:function(){this.setState({isFocused:true});this.props.onFocus&&this.props.onFocus();},_onBlur:function(){this.setState({isFocused:false});this.props.onBlur&&this.props.onBlur();},focusInput:function(){this.refs.typeahead.focusInput();},render:function(){var p="_4kty"+(this.state.isFocused?' '+"_4ktz":'')+(!!this.props.header?' '+"_5lly":'');return (c('React').createElement('div',{className:this.props.className,'data-testid':'SearchableListPrompt-contrib/root'},this.props.header?c('React').createElement(c('Text.atlas'),{className:"_2pi3 _2pi9",color:'dark',display:'block',size:'s'},this.props.header):null,c('React').createElement(c('AbstractTypeahead.react'),{autoHighlight:true,excludedEntries:this.props.excludedEntries,hideViewWithEntries:false,inputClassName:p,onBlur:this._onBlur,onChange:this.props.onChange,onFocus:this._onFocus,onSelectAttempt:this.props.onSelectAttempt,placeholder:this.props.placeholder,presenter:{ViewRenderer:n,alwaysVisibleOnFocus:!!this.props.emptySearchResultsText,extraRendererProps:{disabledEntryIDs:this.props.disabledEntryIDs,emptySearchResultsText:this.props.emptySearchResultsText,showEntriesBeforeSearch:this.props.showEntriesBeforeSearch},maxEntries:this.props.maxEntries,useLayer:false},queryString:this.props.queryString,ref:'typeahead',searchSource:this.props.searchSource,searchSourceOptions:this.props.searchSourceOptions,selectedEntry:this.props.selectedEntry,selectOnBlur:false,showEntriesOnFocus:true})));}}),n=c('React').createClass({displayName:'InlineTypeaheadView',propTypes:{entries:k.array.isRequired,onSelect:k.func.isRequired,disabledEntryIDs:k.instanceOf(c('Set')),emptySearchResultsText:k.string,highlightedEntry:k.object,onHighlight:k.func,onRenderHighlight:k.func,queryString:k.string,selectedEntry:k.object,showEntriesBeforeSearch:k.bool},getDefaultProps:function(){return {showEntriesBeforeSearch:true};},mixins:[c('ReactComponentWithPureRenderMixin')],_renderItem:function(p){var q=p.getUniqueID(),r=this.props.highlightedEntry?this.props.highlightedEntry.getUniqueID():null,s=this.props.selectedEntry?this.props.selectedEntry.getUniqueID():null,t=q===r,u=q===s,v=this.props.disabledEntryIDs&&this.props.disabledEntryIDs.has(q);return (c('React').createElement(o,{disabled:v,entry:p,highlighted:t,key:p.getUniqueID(),selected:u,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight,queryString:this.props.queryString}));},_onMouseLeave:function(event){if(this.props.onHighlight)this.props.onHighlight(null,event);},render:function(){var p=null,q=this.props.entries.length&&(this.props.showEntriesBeforeSearch||this.props.queryString);if(q){p=this.props.entries.map(this._renderItem);}else if(this.props.queryString)p=c('React').createElement('li',null,c('React').createElement(c('Text.atlas'),{className:"_4kt-",color:'light',size:'s'},this.props.emptySearchResultsText));return (c('React').createElement('ul',{className:c('joinClasses')(this.props.className,"_4kt_"),'data-testid':'SearchableListPrompt/itemList',onMouseLeave:this._onMouseLeave},p));}}),o=c('React').createClass({displayName:'InlineTypeaheadViewItem',mixins:[babelHelpers['extends']({},c('TypeaheadViewItem').Mixin,c('ReactComponentWithPureRenderMixin'))],propTypes:babelHelpers['extends']({},c('TypeaheadViewItem').propTypes,{disabled:k.bool}),componentDidUpdate:function(){var p=c('ReactDOM').findDOMNode(this);if(this.props.highlighted){var q=p.offsetParent,r=q&&p.offsetTop<c('Scroll').getTop(q)+q.offsetHeight&&p.offsetTop+p.offsetHeight>c('Scroll').getTop(q);if(!r)p.scrollIntoView(false);}},render:function(){var p=this.props.entry.getSubtitle(),q=c('React').createElement('div',null,c('React').createElement(c('TextWithHighlights.atlas'),{className:"_4ku0",highlight:this.props.queryString,text:this.props.entry.getTitle(),size:'s',color:this.props.disabled?'light':'dark',display:'block'}),p?c('React').createElement(c('TextWithHighlights.atlas'),{className:"_4ku1",color:'light',display:'block',highlight:this.props.queryString,size:'s',text:p}):null),r=this.props.disabled?c('React').createElement(c('Layout.react'),null,c('React').createElement(j,null,q),c('React').createElement(i,null,c('React').createElement(c('Text.atlas'),{size:'s',color:'light',display:'block'},' ? '))):q,s="_4ku2"+(this.props.highlighted?' '+"_4ku3":'')+(this.props.selected?' '+"_4ku4":'')+(!p?' '+"_4ku5":'');return (c('React').createElement('li',{className:s,'data-testid':'SearchableListPrompt/item',onMouseDown:this.props.disabled?null:this._onSelect,onMouseEnter:this._onHighlight},r));}});f.exports=l;},null);
__d('SearchableDropdownInput.contrib',['cx','AbstractSearchSource','Card.atlas','ContextualLayer.react','ContextualLayerAutoFlip','ContextualLayerHideOnScrollOverHeader.atlas','ContextualLayerUpdateOnScroll','Keys','LayerAutoFocus','LayerHideOnBlur','LayerHideOnEscape','React','ReactDOM','ReactComponentWithPureRenderMixin','ReactLayeredComponentMixin','SearchableListPrompt.contrib','Set','Text.atlas','XUIPopoverButton.react','joinClasses'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'SearchableDropdownInput',propTypes:{onSelect:i.func.isRequired,resetQueryStringOnSelect:i.bool.isRequired,searchSource:i.instanceOf(c('AbstractSearchSource')).isRequired,showSelectedSubtitle:i.bool.isRequired,'data-testid':i.string,customHeader:i.element,chevron:i.element,disabled:i.bool,disabledEntryIDs:i.instanceOf(c('Set')),dropdownWidth:i.number,emptySearchResultsText:i.string,excludedEntries:i.object,header:i.node,maxEntries:i.number,placeholder:i.string,searchSourceOptions:i.object,showEntriesBeforeSearch:i.bool,skipAutoWidth:i.bool,title:i.string},mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactLayeredComponentMixin')],getDefaultProps:function(){return {resetQueryStringOnSelect:false,showSelectedSubtitle:true};},getInitialState:function(){return {isShowing:false};},_onLayerToggle:function(k){if(!k&&this.state.isShowing){this.setState({isShowing:false});this.focusInput();}},_toggleLayer:function(){if(!this.props.disabled)this.setState({isShowing:!this.state.isShowing});},_onKeyDown:function(event){switch(event.keyCode){case c('Keys').DOWN:case c('Keys').UP:case c('Keys').SPACE:this.setState({isShowing:true});break;}},open:function(){this.setState({isShowing:true});},close:function(){this.setState({isShowing:false});},focusInput:function(){this.refs&&c('ReactDOM').findDOMNode(this.refs.button).focus();},_onSelect:function(k){this.setState({isShowing:false});this.focusInput();this.props.onSelect(k);},renderLayers:function(){var k;if(!this.props.skipAutoWidth)k=c('ReactDOM').findDOMNode(this.refs.button).offsetWidth;k=this.props.dropdownWidth||k||null;return {prompt:c('React').createElement(c('ContextualLayer.react'),{behaviors:{ContextualLayerAutoFlip:c('ContextualLayerAutoFlip'),ContextualLayerUpdateOnScroll:c('ContextualLayerUpdateOnScroll'),ContextualLayerHideOnScrollOverHeader:c('ContextualLayerHideOnScrollOverHeader.atlas'),LayerAutoFocus:c('LayerAutoFocus'),LayerHideOnBlur:c('LayerHideOnBlur'),LayerHideOnEscape:c('LayerHideOnEscape')},contextRef:function(){return this.refs.button;}.bind(this),position:'below',alignment:'left',offsetY:4,shown:this.state.isShowing,autofocus:true,onToggle:this._onLayerToggle},c('React').createElement('div',{style:{width:k},className:this.props.divClassName,onFocus:this.props.onFocus},c('React').createElement(c('Card.atlas'),{className:this.props.listClassName,contentPadding:'none'},this.props.customHeader,c('React').createElement(c('SearchableListPrompt.contrib'),{disabledEntryIDs:this.props.disabledEntryIDs,emptySearchResultsText:this.props.emptySearchResultsText,excludedEntries:this.props.excludedEntries,header:this.props.header,maxEntries:this.props.maxEntries,onSelect:this._onSelect,resetQueryStringOnSelect:this.props.resetQueryStringOnSelect,searchSource:this.props.searchSource,searchSourceOptions:this.props.searchSourceOptions,selectedEntry:this.props.value,showEntriesBeforeSearch:this.props.showEntriesBeforeSearch}))))};},render:function(){var k=this.props.placeholder,l=this.props.value;if(l){var m=this.props.title||l.getTitle(),n=this.props.showSelectedSubtitle&&l.getSubtitle()?c('React').createElement(c('Text.atlas'),{color:'light',size:'s'},' ',l.getSubtitle()):null;k=c('React').createElement('span',null,m,n);}return (c('React').createElement(c('XUIPopoverButton.react'),{className:c('joinClasses')(this.props.className,"__yl"),chevron:this.props.chevron,'data-testid':this.props['data-testid'],disabled:this.props.disabled,ref:'button',label:k,onClick:this._toggleLayer,onKeyDown:this._onKeyDown,size:'large',maxwidth:null}));}});f.exports=j;},null);
__d('RichMediaProductCatalogSelectorContainer.react',['fbt','AdsAccountStoreWrapper_DEPRECATED','AdsFluxMixinLegacy','AdsLoadStateUtils','AdsProductCatalogListStore','AdsProductCatalogSearchSource','AdsProductCatalogStore','AdsRichSelector.react','Link.react','React','ReactComponentWithPureRenderMixin','SearchableDropdownInput.contrib','SearchableEntry','URI','XUINotice.react','XUISpinner.react','XUIText.react'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('AdsRichSelector.react').Option,k=c('React').createClass({displayName:'RichMediaProductCatalogSelectorContainer',_isMounted:false,propTypes:{businessID:i.string,className:i.string,disabled:i.bool,selectedProductCatalogID:i.oneOfType([i.string,i.oneOf([null])]),onProductCatalogChanged:i.func.isRequired,onProductCatalogErrorChange:i.func.isRequired},mixins:[c('ReactComponentWithPureRenderMixin'),c('AdsFluxMixinLegacy')([c('AdsAccountStoreWrapper_DEPRECATED').getFluxStore(),c('AdsProductCatalogListStore'),c('AdsProductCatalogStore')],{withProps:true})],statics:{calculateState:function(l,m){var n=m.businessID,o=c('AdsProductCatalogListStore').getFor(n),p=o.list,q=c('AdsProductCatalogStore').getAll(p),r=c('AdsLoadStateUtils').isLoading(o)||c('AdsLoadStateUtils').anyLoading(q),s=c('AdsLoadStateUtils').getLoadedValues(q),t=c('AdsProductCatalogSearchSource').getSearchSource(s);return {isLoading:r,businessID:n,productCatalogs:s,productCatalogSearchSource:t};}},componentDidMount:function(){this._isMounted=true;this._propagateStatus();},componentWillUnmount:function(){this._isMounted=false;},componentDidUpdate:function(){this._propagateStatus();},_propagateStatus:function(){if(!this._isMounted)return;if(!this.state.businessID||this.state.isLoading||this.state.productCatalogs.length===0){this.props.onProductCatalogErrorChange({value:true});return;}if(!this.props.selectedProductCatalogID)this.props.onProductCatalogChanged(this.state.productCatalogs[0].id);},render:function(){if(!this.state.businessID)return (c('React').createElement('div',{className:this.props.className},c('React').createElement('b',null,c('React').createElement(c('XUINotice.react'),{size:'small',use:'warn'},h._("To add a product catalog, this ad account must first be associated with a business in {link to business manager}.",[h.param('link to business manager',c('React').createElement(c('Link.react'),{href:new (c('URI'))('/').setSubdomain('business')},'Business Manager'))])))));if(this.state.isLoading)return c('React').createElement(c('XUISpinner.react'),null);if(this.state.productCatalogs.length===0)return (c('React').createElement('div',{className:this.props.className},c('React').createElement('b',null,c('React').createElement(c('XUINotice.react'),{size:'small',use:'warn'},h._("Your business needs to create a product catalog or connect to the catalog of another business. {link to help center for product catalogs}",[h.param('link to help center for product catalogs',c('React').createElement(c('Link.react'),{href:new (c('URI'))('/help/1397294963910848')},'Learn More'))])))));var l=this.state.productCatalogs.map(function(n){return n.id;});if(this.props.selectedProductCatalogID&&l.indexOf(this.props.selectedProductCatalogID)===-1)return (c('React').createElement('div',{className:this.props.className},c('React').createElement('b',null,h._("Product Catalog not found."))));var m=h._("Select a Product Catalog");return (c('React').createElement('div',{className:this.props.className},c('React').createElement(c('SearchableDropdownInput.contrib'),{disabled:this.props.disabled,dropdownWidth:280,placeholder:m,resetQueryStringOnSelect:true,searchSource:this.state.productCatalogSearchSource,showSelectedSubtitle:false,value:c('AdsProductCatalogSearchSource').getProductCatalogEntry(this.props.selectedProductCatalogID),onSelect:this._onProductCatalogChanged})));},_renderProductCatalogOptions:function(){return this.state.productCatalogs.map(this._renderProductCatalogOption);},_renderProductCatalogOption:function(l){return (c('React').createElement(j,{key:l.id,label:l.name,value:l.id},c('React').createElement('div',{className:'pvm'},c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{className:'prl',size:'medium',weight:'normal'},l.name)),c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{className:'prl',size:'small',weight:'normal'},l.id)))));},_onProductCatalogChanged:function(l){this.props.onProductCatalogChanged(l?l.getUniqueID():null);}});f.exports=k;},null);
__d('AdsBusinessActionTypes',['keyMirrorRecursive'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('keyMirrorRecursive')({BATCH_LOADED:null,BATCH_LOAD_ERROR:null},'AdsBusiness');f.exports=h;},null);
__d('AdsBusinessActions',['AdsBusinessActionTypes','AdsDispatcher'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={batchLoaded:function(i){c('AdsDispatcher').handleUpdateFromServerResponse({specs:i,type:c('AdsBusinessActionTypes').BATCH_LOADED});},batchLoadError:function(i){c('AdsDispatcher').handleUpdateFromServerResponse({errors:i,type:c('AdsBusinessActionTypes').BATCH_LOAD_ERROR});}};f.exports=h;},null);
__d('AdsBusinessStore',['AdsBaseDataStore','AdsBusinessActionTypes','AdsBusinessDataManager','AdsLoadState'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('AdsBaseDataStore'));i=h&&h.prototype;j.prototype.getDataManager=function(){return c('AdsBusinessDataManager');};j.prototype.__onDispatch=function(k){var l=k.action;switch(l.type){case c('AdsBusinessActionTypes').BATCH_LOADED:this.__handleData(l.specs,c('AdsLoadState').LOADED);break;case c('AdsBusinessActionTypes').BATCH_LOAD_ERROR:this.__handleData(l.errors,c('AdsLoadState').ERROR);break;}};function j(){h.apply(this,arguments);}f.exports=new j();},null);
__d('AdsCurrencySingleSelector.react',['fbt','CurrencyConfig','React','ReactFragment','XUISingleSelector.react','mapObject'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('XUISingleSelector.react').Option,k=c('React').createClass({displayName:'AdsCurrencySingleSelector',propTypes:{className:i.string,maxHeight:i.number,onChange:i.func,value:i.string},getDefaultProps:function(){return {maxHeight:300};},statics:{getButtonSize:function(l){return l.size||'medium';}},render:function(){var l=c('ReactFragment').create(c('mapObject')(c('CurrencyConfig').adsCurrenciesByCode,function(m,n){return (c('React').createElement(j,{key:m.iso,value:m.iso},h._("{currency code} - {currency name}",[h.param('currency code',m.iso),h.param('currency name',m.name)])));}));return (c('React').createElement(c('XUISingleSelector.react'),{className:this.props.className,maxheight:this.props.maxHeight,value:this.props.value,onChange:this.props.onChange},l));}});f.exports=k;},null);
__d('AdsProductSetFilterInputType',['keyMirror'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('keyMirror')({NUMERIC_TEXT_INPUT:null,TOKENIZED_TEXT_INPUT:null});f.exports=h;},null);
__d('AdsProductSetFilterOperatorConfig',['fbt','AdsGenericFilterOperator','AdsGenericFilterOperatorConfig'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=babelHelpers['extends']({},c('AdsGenericFilterOperatorConfig'),{IS_ANY_OF_THESE:{shortText:h._("="),text:h._("is any of these"),operator:c('AdsGenericFilterOperator').EQUAL},LESS_THAN:{shortText:h._("\u003C"),text:h._("is less than"),operator:c('AdsGenericFilterOperator').LESS_THAN}});f.exports=i;},null);
__d('AdsProductSetFilterFieldConfig',['fbt','ProductItemAvailabilities','ProductItemFilterFieldsExternal','AdsGenericFilterField','AdsGenericFilterFieldType','AdsGenericFilterOperator','AdsProductSetFilterOperatorConfig','AdsProductSetFilterInputType','AdsCreationConfig','intlList'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={};i[c('ProductItemFilterFieldsExternal').AVAILABILITY]={text:h._("Availability"),placeholder:h._("Add availability"),field:new (c('AdsGenericFilterField'))(c('ProductItemFilterFieldsExternal').AVAILABILITY,c('AdsGenericFilterFieldType').STRING),inputType:c('AdsProductSetFilterInputType').TOKENIZED_TEXT_INPUT,operators:[c('AdsProductSetFilterOperatorConfig').EQUAL,c('AdsProductSetFilterOperatorConfig').NOT_EQUAL],defaultOperator:c('AdsGenericFilterOperator').EQUAL,invalidMessage:h._("Availability must be one of: {field list}",[h.param('field list',c('intlList')(Object.keys(c('ProductItemAvailabilities')).map(function(m){return '\''+c('ProductItemAvailabilities')[m]+'\'';}),c('intlList').CONJUNCTIONS.OR))])};i[c('ProductItemFilterFieldsExternal').BRAND]={text:h._("Brand"),placeholder:h._("Add brand"),field:new (c('AdsGenericFilterField'))(c('ProductItemFilterFieldsExternal').BRAND,c('AdsGenericFilterFieldType').STRING),inputType:c('AdsProductSetFilterInputType').TOKENIZED_TEXT_INPUT,operators:[c('AdsProductSetFilterOperatorConfig').IS_ANY_OF_THESE,c('AdsProductSetFilterOperatorConfig').NOT_EQUAL,c('AdsProductSetFilterOperatorConfig').CONTAIN,c('AdsProductSetFilterOperatorConfig').NOT_CONTAIN],defaultOperator:c('AdsGenericFilterOperator').EQUAL,invalidMessage:h._("Brand must be a string")};i[c('ProductItemFilterFieldsExternal').CATEGORY]={text:h._("Category"),placeholder:h._("Enter a category"),field:new (c('AdsGenericFilterField'))(c('ProductItemFilterFieldsExternal').CATEGORY,c('AdsGenericFilterFieldType').STRING),inputType:c('AdsProductSetFilterInputType').TOKENIZED_TEXT_INPUT,operators:[c('AdsProductSetFilterOperatorConfig').IS_ANY_OF_THESE,c('AdsProductSetFilterOperatorConfig').NOT_EQUAL,c('AdsProductSetFilterOperatorConfig').CONTAIN,c('AdsProductSetFilterOperatorConfig').NOT_CONTAIN],defaultOperator:c('AdsGenericFilterOperator').CONTAIN,invalidMessage:h._("Category must be a string")};function j(m,n){return {text:h._("Custom Label {index}",[h.param('index',m)]),placeholder:h._({"*":"Enter Custom Label {index}'s value"},[h.param('index',m,[0])]),field:new (c('AdsGenericFilterField'))(n,c('AdsGenericFilterFieldType').STRING),inputType:c('AdsProductSetFilterInputType').TOKENIZED_TEXT_INPUT,operators:[c('AdsProductSetFilterOperatorConfig').IS_ANY_OF_THESE,c('AdsProductSetFilterOperatorConfig').NOT_EQUAL,c('AdsProductSetFilterOperatorConfig').CONTAIN,c('AdsProductSetFilterOperatorConfig').NOT_CONTAIN],defaultOperator:c('AdsGenericFilterOperator').CONTAIN,invalidMessage:h._({"*":"Custom Label {index} must be a string"},[h.param('index',m,[0])])};}if(c('AdsCreationConfig').gk.ads_pe_custom_labels_in_dpa_template_ui){var k=[c('ProductItemFilterFieldsExternal').CUSTOM_LABEL_0,c('ProductItemFilterFieldsExternal').CUSTOM_LABEL_1,c('ProductItemFilterFieldsExternal').CUSTOM_LABEL_2,c('ProductItemFilterFieldsExternal').CUSTOM_LABEL_3,c('ProductItemFilterFieldsExternal').CUSTOM_LABEL_4];for(var l=0;l<k.length;l++)i[k[l]]=j(l,k[l]);}i[c('ProductItemFilterFieldsExternal').PRODUCT_TYPE]={text:h._("Product Type"),placeholder:h._("Enter a product type"),field:new (c('AdsGenericFilterField'))(c('ProductItemFilterFieldsExternal').PRODUCT_TYPE,c('AdsGenericFilterFieldType').STRING),inputType:c('AdsProductSetFilterInputType').TOKENIZED_TEXT_INPUT,operators:[c('AdsProductSetFilterOperatorConfig').IS_ANY_OF_THESE,c('AdsProductSetFilterOperatorConfig').NOT_EQUAL,c('AdsProductSetFilterOperatorConfig').CONTAIN,c('AdsProductSetFilterOperatorConfig').NOT_CONTAIN],defaultOperator:c('AdsGenericFilterOperator').EQUAL,invalidMessage:h._("Product type must be a string")};i[c('ProductItemFilterFieldsExternal').PRICE_AMOUNT]={text:h._("Price"),placeholder:h._("Add value in cents"),field:new (c('AdsGenericFilterField'))(c('ProductItemFilterFieldsExternal').PRICE_AMOUNT,c('AdsGenericFilterFieldType').CURRENCY),inputType:c('AdsProductSetFilterInputType').NUMERIC_TEXT_INPUT,operators:[c('AdsProductSetFilterOperatorConfig').GREATER_THAN,c('AdsProductSetFilterOperatorConfig').LESS_THAN],defaultOperator:c('AdsGenericFilterOperator').GREATER_THAN,invalidMessage:h._("Price must be an integer indicating the number of cents")};f.exports=i;},null);
__d('AdsProductItemPropertySearchSource',['AbstractSearchSource','AdsGraphAPI','Map','SearchableEntry','TokenizeUtil','adsGKCheck'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=new (c('Map'))();function k(m,n){var o=m.getOrder(),p=n.getOrder();if(o===p)return m.getTitle()>n.getTitle()?1:-1;return o>p?1:-1;}h=babelHelpers.inherits(l,c('AbstractSearchSource'));i=h&&h.prototype;l.getInstance=function(m,n,o){var p=l.getInstanceID(m,n,o);if(!j.has(p))j.set(p,new l(m,n,o));return j.get(p);};l.getInstanceID=function(m,n,o){var p=m+'_'+n;if(o)p+='_includeQueryString';return p;};function l(m,n,o){i.constructor.call(this);this.productCatalogID=m;this.property=n;this.includeQueryString=o;}l.prototype.bootstrapImpl=function(m){this.search('',m);};l.prototype.searchImpl=function(m,n,o){if(!m){n([],m);return;}var p=this.property,q={};q[p]={i_contains:m};c('AdsGraphAPI').getWithGeneralMigration().object('product_catalog_id',this.productCatalogID).edge('products').batched().get({fields:[p],filter:q}).done(function(r){var s=[],t=r.data;if(this.includeQueryString&&t.length>0){var u={};u.id=Math.random();u[p]=m;t.push(u);}var v=m.toLowerCase(),w={};for(var x=0;x<t.length;x++){if(w[t[x][p]])continue;var y=t[x][p],z,aa=y.toLowerCase().indexOf(v);if(aa<0)return;if(c('TokenizeUtil').isExactMatch(m,y)&&aa===0){z=1;}else if(c('TokenizeUtil').isExactMatch(m,y)){z=2;}else if(aa===0){z=3;}else if(c('TokenizeUtil').isQueryMatch(m,y)){z=4;}else if(aa>0)z=5;var ba=new (c('SearchableEntry'))({uniqueID:t[x].id,title:t[x][p],order:z});s.push(ba);w[t[x][p]]=true;}s.sort(k);n(s,m);}.bind(this));};f.exports=l;},null);
__d('AdsProductSetUtils',['AbstractSearchSource','AdsGenericFilterOperator','AdsProductItemPropertySearchSource','ProductItemAvailabilities','ProductItemFilterFieldsExternal','RegexMatchSearchSource','SearchableEntry','StaticSearchSource'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={getProductSetDataSpec:function(i,j){var k=this.convertFilterSpec(j);return babelHelpers['extends']({},k,{name:i});},convertFilterSpec:function(i){var j=i.map(function(k){var l=k.value.map(function(m){var n={};switch(k.operator){case c('AdsGenericFilterOperator').CONTAIN:n.i_contains=m;break;case c('AdsGenericFilterOperator').NOT_CONTAIN:n.i_not_contains=m;break;case c('AdsGenericFilterOperator').EQUAL:n.eq=m;break;case c('AdsGenericFilterOperator').NOT_EQUAL:n.neq=m;break;case c('AdsGenericFilterOperator').GREATER_THAN:n.gt=m;break;case c('AdsGenericFilterOperator').LESS_THAN:n.lt=m;break;}var o={};o[k.property]=n;return o;});return {or:l};});if(j.length===0)return {filter:{}};return {filter:{and:j}};},getSearchSource:function(i,j,k){c('AbstractSearchSource');switch(j){case c('ProductItemFilterFieldsExternal').AVAILABILITY:return new (c('StaticSearchSource'))(Object.keys(c('ProductItemAvailabilities')).map(function(l){return new (c('SearchableEntry'))({uniqueID:l,title:c('ProductItemAvailabilities')[l]});}));case c('ProductItemFilterFieldsExternal').BRAND:case c('ProductItemFilterFieldsExternal').CATEGORY:case c('ProductItemFilterFieldsExternal').PRODUCT_TYPE:case c('ProductItemFilterFieldsExternal').CUSTOM_LABEL_0:case c('ProductItemFilterFieldsExternal').CUSTOM_LABEL_1:case c('ProductItemFilterFieldsExternal').CUSTOM_LABEL_2:case c('ProductItemFilterFieldsExternal').CUSTOM_LABEL_3:case c('ProductItemFilterFieldsExternal').CUSTOM_LABEL_4:return c('AdsProductItemPropertySearchSource').getInstance(i,j,k);case c('ProductItemFilterFieldsExternal').PRICE_AMOUNT:return new (c('RegexMatchSearchSource'))('[0-9]+');}return new (c('RegexMatchSearchSource'))('.+');},shouldIncludeQueryString:function(i){if(i===c('AdsGenericFilterOperator').CONTAIN||i===c('AdsGenericFilterOperator').NOT_CONTAIN)return true;return false;}};f.exports=h;},null);
__d('AdsProductSetFilterTokenizer.react',['AdsProductSetFilterFieldConfig','AdsProductSetUtils','React','SearchableEntry','XUITokenizer.react','removeFromArray'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'AdsProductSetFilterTokenizer',propTypes:{className:h.string.isRequired,entries:h.arrayOf(h.instanceOf(c('SearchableEntry'))).isRequired,filterOperator:h.string.isRequired,filterProperty:h.string.isRequired,onChange:h.func.isRequired,onQueryStringChange:h.func.isRequired,productCatalogID:h.string.isRequired,error:h.string},getInitialState:function(){return {entries:[]};},render:function(){var j=c('AdsProductSetUtils').shouldIncludeQueryString(this.props.filterOperator);return (c('React').createElement(c('XUITokenizer.react'),{className:this.props.className,entries:this.props.entries,focusedOnInit:true,placeholder:c('AdsProductSetFilterFieldConfig')[this.props.filterProperty].placeholder,searchSource:c('AdsProductSetUtils').getSearchSource(this.props.productCatalogID,this.props.filterProperty,j),showEntriesOnFocus:true,xuiError:this.props.error,onAddEntryAttempt:this._handleAddEntryAttempt,onQueryStringChange:this.props.onQueryStringChange,onRemoveEntryAttempt:this._handleRemoveEntryAttempt}));},_handleAddEntryAttempt:function(j){if(!this._hasEntry(j))this.props.onChange(this.props.entries.concat(j));},_handleRemoveEntryAttempt:function(j){if(this._hasEntry(j)){var k=this.props.entries;c('removeFromArray')(k,j);this.props.onChange(k.slice());}},_hasEntry:function(j){var k=j.getUniqueID();return this.props.entries.some(function(l){return l.getUniqueID()===k;});}});f.exports=i;},null);
__d('AdsProductSetFilter.react',['cx','fbt','AdsCurrencyInput.react','AdsCurrencySingleSelector.react','AdsProductSetFilterInputType','AdsProductSetFilterTokenizer.react','AdsProductSetFilterFieldConfig','ads-lib-formatters','ProductItemFilterFieldsExternal','React','ReactFragment','XUIButtonGroup.react','XUICloseButton.react','XUISelector.react','mapObject'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('XUISelector.react').Option,l=c('React').createClass({displayName:'AdsProductSetFilter',propTypes:{productCatalogID:j.string.isRequired,filter:j.object.isRequired,onChange:j.func.isRequired,onRemove:j.func.isRequired,onQueryStringChange:j.func.isRequired,onSelectedCurrencyChange:j.func.isRequired,selectedCurrency:j.string.isRequired},render:function(){return (c('React').createElement('div',{className:"_5grb"},c('React').createElement('div',null,c('React').createElement(c('XUIButtonGroup.react'),{className:"_3-96"},this._renderProductItemPropertySelector(),this._renderPriceFilterCurrencySelector(),this._renderFilterOperatorSelector()),c('React').createElement(c('XUICloseButton.react'),{className:"_5grc",size:'small',onClick:this.props.onRemove})),c('React').createElement('div',{className:"_3-96"},this._renderFilterInput())));},_renderProductItemPropertySelector:function(){var m=c('mapObject')(c('AdsProductSetFilterFieldConfig'),function(n,o){return (c('React').createElement(k,{key:o,value:o},n.text));});return (c('React').createElement(c('XUISelector.react'),{value:this.props.filter.property,onChange:this._onProductItemPropertyChange},c('ReactFragment').create(m)));},_renderPriceFilterCurrencySelector:function(){if(this.props.filter.property!==c('ProductItemFilterFieldsExternal').PRICE_AMOUNT)return null;return (c('React').createElement(c('AdsCurrencySingleSelector.react'),{value:this.props.selectedCurrency,onChange:this._onSelectedCurrencyChange}));},_renderFilterOperatorSelector:function(){var m=c('AdsProductSetFilterFieldConfig')[this.props.filter.property].operators,n=m.map(function(o){var p=o.operator;return (c('React').createElement(k,{key:p,value:p},o.text));});return (c('React').createElement(c('XUISelector.react'),{value:this.props.filter.operator,onChange:this._onProductItemFilterOperatorChange},n));},_renderFilterInput:function(){var m=c('AdsProductSetFilterFieldConfig')[this.props.filter.property],n=m.inputType;if(n===c('AdsProductSetFilterInputType').TOKENIZED_TEXT_INPUT){return (c('React').createElement(c('AdsProductSetFilterTokenizer.react'),{className:"_5gre",entries:this.props.filter.value,error:this.props.filter.error,filterOperator:this.props.filter.operator,filterProperty:this.props.filter.property,productCatalogID:this.props.productCatalogID,onChange:this._onProductItemFilterTokenizedValueChange,onQueryStringChange:this.props.onQueryStringChange}));}else return (c('React').createElement(c('AdsCurrencyInput.react'),{className:"_5grp",currency:this.props.selectedCurrency,eventType:'change',height:'tall',placeholder:i._("Amount in {currency type}",[i.param('currency type',this.props.selectedCurrency)]),value:this.props.filter.value[0],withNumberDelimiters:true,xuiError:this.props.filter.error,onDataUpdate:this._onProductItemFilterNumericValueChange}));},_onProductItemPropertyChange:function(m){var n={property:m.value,operator:c('AdsProductSetFilterFieldConfig')[m.value].defaultOperator,value:[],plainText:''};this.props.onChange(n);},_onProductItemFilterOperatorChange:function(m){var n=Object.assign({},this.props.filter,{operator:m.value,value:[],plainText:''});this.props.onChange(n);},_onSelectedCurrencyChange:function(m){this.props.onSelectedCurrencyChange(m.value);},_onProductItemFilterNumericValueChange:function(m){var n=Object.assign({},this.props.filter,{value:[c('ads-lib-formatters').parseNumber(m)],plainText:'',error:null});this.props.onChange(n);},_onProductItemFilterTokenizedValueChange:function(m){var n=Object.assign({},this.props.filter,{value:m,plainText:'',error:null});this.props.onChange(n);}});f.exports=l;},null);
__d('AdsProductSetPaneStore',['AdsActionTypes','AdsDispatcher','AdsNewIDs','FluxStore','adsBaseStoreMixin'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('AdsDispatcher'));c('adsBaseStoreMixin')(this);this.$AdsProductSetPaneStoreClass1=this.getNewCreationID();}j.prototype.getNewCreationID=function(){return ''+c('AdsNewIDs').newNegativeID();};j.prototype.__onDispatch=function(l){var m=l.action;switch(m.actionType){case c('AdsActionTypes').PRODUCT_SET.CREATE_BATCH:this.$AdsProductSetPaneStoreClass1=m.objectsData[0].tempID;break;}};j.prototype.getCurrentCreationID=function(){return this.$AdsProductSetPaneStoreClass1;};var k=new j();f.exports=k;},null);
__d('AdsNewProductSetDialogView.react',['cx','fbt','AdsGenericFilterOperator','AdsGraphAPI','AdsLoadState','AdsProductCatalogStore','AdsProductSetActions','AdsProductSetFilter.react','AdsProductSetFilterFieldConfig','AdsProductSetFilterInputType','AdsProductSetPaneStore','AdsProductSetUtils','FluxMixinLegacy','LayerFadeOnShow','LayerHideOnEscape','Link.react','NumberFormat','ProductItemFilterFieldsExternal','React','ReactComponentWithPureRenderMixin','XUIButton.react','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogCancelButton.react','XUIDialogFooter.react','XUIDialogTitle.react','XUINotice.react','XUISpinner.react','XUIText.react','XUITextInput.react','debounce','emptyFunction','URI'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'AdsNewProductSetDialogView',mixins:[c('ReactComponentWithPureRenderMixin'),c('FluxMixinLegacy')([c('AdsProductCatalogStore')],{withProps:true})],propTypes:{defaultCurrency:j.string,productCatalogID:j.string.isRequired,source:j.shape({campaignIDs:j.arrayOf(j.string).isRequired,spec:j.string.isRequired}),onClose:j.func.isRequired,onConfirm:j.func},statics:{calculateState:function(l,m){return {productCatalog:c('AdsProductCatalogStore').get(m.productCatalogID)};}},componentWillMount:function(){this._updateProductCountDebounced=c('debounce')(this._updateProductCount,1000);},componentWillUnmount:function(){this._updateProductCountDebounced.reset();delete this._updateProductCountDebounced;},getInitialState:function(){return {name:'',nameError:null,filters:[this._getNewFilter()],selectedCurrency:this.props.defaultCurrency||'USD',productCount:null,productCountLoading:false};},render:function(){return (c('React').createElement(c('XUIDialog.react'),{behaviors:{LayerHideOnEscape:c('LayerHideOnEscape'),LayerFadeOnShow:c('LayerFadeOnShow')},fixedTopPosition:240,ref:'dialog',shown:true,width:600,onToggle:this._onToggle},c('React').createElement(c('XUIDialogTitle.react'),null,i._("Create Product Set")),c('React').createElement(c('XUIDialogBody.react'),null,this._renderDialogContent()),c('React').createElement(c('XUIDialogFooter.react'),{leftContent:this._renderProductCountText()},c('React').createElement(c('XUIDialogCancelButton.react'),null),c('React').createElement(c('XUIDialogButton.react'),{action:'confirm',label:i._("Create"),use:'confirm',onClick:this._onConfirm}))));},_renderDialogContent:function(){var l=i._("Filter Catalog"),m=c('React').createElement('div',{className:"_2kyl"});if(this.state.filters.length!==0)l=i._("Add Filter");return (c('React').createElement('div',null,this._renderErrorMessage(),this._renderNameInputRow(),m,this._renderProductCatalogNameContent(),this._renderFilters(),c('React').createElement('div',{className:"_4fki"},c('React').createElement(c('XUIButton.react'),{className:"_2kym",label:l,onClick:this._addFilter}))));},_renderErrorMessage:function(){if(this.state.productCount===0)return (c('React').createElement(c('XUINotice.react'),null,i._("You're creating a product set with 0 products.")));return null;},_renderProductCatalogNameContent:function(){var l=new (c('URI'))('https://developers.facebook.com/docs/marketing-api/'+'dynamic-product-ads/product-catalog#productset'),m=this.state.productCatalog.loadState===c('AdsLoadState').LOADING;return m?c('React').createElement(c('XUISpinner.react'),null):c('React').createElement('div',{className:"_4fkj"},c('React').createElement(c('XUIText.react'),{size:'small'},i._("Filter from {catalog_name} catalog to create a product set. {learn_more_link}.",[i.param('catalog_name',c('React').createElement(c('XUIText.react'),{size:'small',weight:'bold'},this.state.productCatalog.name)),i.param('learn_more_link',c('React').createElement(c('Link.react'),{href:l,target:'_blank'},'Learn more'))])));},_renderProductCountText:function(){var l=this.state.productCatalog.loadState===c('AdsLoadState').LOADING;if(l)return (c('React').createElement(c('XUISpinner.react'),null));var m=this.state.productCount;if(m===null)m=this.state.productCatalog.product_count;var n=this.state.productCountLoading?c('React').createElement(c('XUISpinner.react'),null):c('React').createElement(c('XUIText.react'),{weight:'bold'},c('NumberFormat').formatInteger(m));return (c('React').createElement('div',{className:"_4fkk"},c('React').createElement(c('XUIText.react'),{size:'small'},i._("You are creating a product set with {product_count} of {total_product_count} products.",[i.param('product_count',n),i.param('total_product_count',c('NumberFormat').formatInteger(this.state.productCatalog.product_count))]))));},_renderFilters:function(){if(this.state.filters.length===0)return null;var l=this.state.filters.slice().map(function(m,n){var o=n===0?null:c('React').createElement('label',{className:"_5dr1"},'And');return (c('React').createElement('div',{key:n},o,c('React').createElement(c('AdsProductSetFilter.react'),{filter:m,key:n,productCatalogID:this.props.productCatalogID,selectedCurrency:this.state.selectedCurrency,onChange:this._onFilterChange.bind(this,n),onQueryStringChange:this._onFilterQueryStringChange.bind(this,n),onRemove:this._onRemoveFilter.bind(this,n),onSelectedCurrencyChange:this._onSelectedCurrencyChange})));}.bind(this));return (c('React').createElement('div',{className:"_4fkl"},c('React').createElement('div',{className:"_2kyo"},l)));},_renderNameInputRow:function(){return (c('React').createElement('div',{className:"_2kyp"},c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{className:"_2kyq",size:'medium'},i._("Name of Product Set"))),c('React').createElement('div',{className:"_2kyo"},c('React').createElement(c('XUITextInput.react'),{className:"_2kyr",height:'tall',placeholder:i._("Name new product set"),value:this.state.name,xuiError:this.state.nameError,onChange:this._onProductSetNameChange}))));},_updateProductCountDebounced:c('emptyFunction'),_updateProductCount:function(){c('AdsGraphAPI').getWithGeneralMigration().object('product_catalog_id',this.props.productCatalogID).edge('products').batched().get({filter:c('AdsProductSetUtils').convertFilterSpec(this._getFiltersForAPI()).filter,summary:true}).done(function(l){if(this.isMounted())this.setState({productCountLoading:false,productCount:l.summary.total_count});}.bind(this));},_getNameInvalidMessage:function(){return i._("Name is required and cannot be empty");},_onProductSetNameChange:function(event){if(this.isMounted())this.setState({name:event.target.value,nameError:event.target.value.trim().length>0?null:this._getNameInvalidMessage()});},_getFilterInvalidMessage:function(l){if(c('AdsProductSetFilterFieldConfig')[l.property].inputType===c('AdsProductSetFilterInputType').TOKENIZED_TEXT_INPUT)return i._("Filter must be in token format");return c('AdsProductSetFilterFieldConfig')[l.property].invalidMessage;},_addFilter:function(){var l=this.state.filters.slice();l.push(this._getNewFilter());if(this.isMounted())this.setState({filters:l});},_getNewFilter:function(){return {property:c('ProductItemFilterFieldsExternal').CATEGORY,operator:c('AdsGenericFilterOperator').CONTAIN,value:[],plainText:''};},_onFilterChange:function(l,m){var n=this.state.filters.slice();n[l]=m;if(this.isMounted()){this.setState({filters:n});this.setState({productCountLoading:true},this._updateProductCountDebounced);}},_onSelectedCurrencyChange:function(l){this.setState({productCountLoading:true,selectedCurrency:l},this._updateProductCountDebounced);},_onFilterQueryStringChange:function(l,event){var m=this.state.filters.slice(),n=m[l];n.plainText=event.target.value;if(!n.plainText)n.error=null;m[l]=n;if(this.isMounted())this.setState({filters:m});},_onRemoveFilter:function(l){var m=this.state.filters.slice();m.splice(l,1);if(this.isMounted())this.setState({filters:m,productCountLoading:true},this._updateProductCountDebounced);},_validateFilters:function(){var l=true,m=this.state.filters.slice();m.forEach(function(n){if(n.plainText){l=false;n.error=this._getFilterInvalidMessage(n);}}.bind(this));if(this.isMounted()&&!l)this.setState({filters:m});return l;},_getFiltersForAPI:function(){var l=[],m=false;this.state.filters.slice().forEach(function(n){if(n.value.length===0)return;if(n.property===c('ProductItemFilterFieldsExternal').PRICE_AMOUNT)m=true;l.push(babelHelpers['extends']({},n,{value:n.value.map(function(o){return (c('AdsProductSetFilterFieldConfig')[n.property].inputType===c('AdsProductSetFilterInputType').TOKENIZED_TEXT_INPUT?o.getTitle():o);})}));});if(m)l.push({property:c('ProductItemFilterFieldsExternal').CURRENCY,operator:c('AdsGenericFilterOperator').EQUAL,value:[this.state.selectedCurrency],plainText:'',error:null});return l;},_validateForm:function(){var l=true;if(this.isMounted()&&this.state.name.trim().length===0){this.setState({nameError:this._getNameInvalidMessage()});l=false;}if(!this._validateFilters())l=false;return l;},_onProductSetCreationConfirmed:function(l){var m=c('AdsProductSetUtils').getProductSetDataSpec(l.name,l.filters),n=babelHelpers['extends']({},m);n.tempID=c('AdsProductSetPaneStore').getNewCreationID();c('AdsProductSetActions').createProductSet(this.props.productCatalogID,n,this.props.source);},_onConfirm:function(){if(!this._validateForm())return;var l=this._getFiltersForAPI();this._onProductSetCreationConfirmed({name:this.state.name,filters:l});if(this.isMounted())this.setState(this.getInitialState());if(this.props.onConfirm)this.props.onConfirm();this.props.onClose();},_onToggle:function(l){if(!l){if(this.isMounted())this.setState(this.getInitialState());this.props.onClose();}}});f.exports=k;},null);
__d('AdsNewProductSetDialog.react',['AdsNewProductSetDialogView.react','React','ReactLayeredComponentMixin'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'AdsNewProductSetDialog',mixins:[c('ReactLayeredComponentMixin')],propTypes:{defaultCurrency:h.string,productCatalogID:h.string.isRequired,shown:h.bool.isRequired,source:h.shape({campaignIDs:h.arrayOf(h.string).isRequired,spec:h.string.isRequired}),onClose:h.func.isRequired},renderLayers:function(){if(!this.props.shown)return {};return {dialog:c('React').createElement(c('AdsNewProductSetDialogView.react'),{defaultCurrency:this.props.defaultCurrency,productCatalogID:this.props.productCatalogID,source:this.props.source,onClose:this.props.onClose})};},render:function(){return null;}});f.exports=i;},null);
__d('AdsProductSetListActions',['AdsDispatcher','AdsActionTypes'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={productSetListPartialLoad:function(i,j){c('AdsDispatcher').handleUpdateFromServerResponse({productCatalogID:i,productSets:j,type:c('AdsActionTypes').PRODUCT_SET.LIST.PARTIAL_LOAD});},productSetListLoaded:function(i,j){c('AdsDispatcher').handleUpdateFromServerResponse({productCatalogID:i,productSets:j,type:c('AdsActionTypes').PRODUCT_SET.LIST.LOADED});},productSetListLoadError:function(i){c('AdsDispatcher').handleUpdateFromServerResponse({productCatalogID:i,type:c('AdsActionTypes').PRODUCT_SET.LIST.LOAD_ERROR});}};f.exports=h;},null);
__d('AdsProductSetListDataManager',['fbt','AdsBaseListDataManager','AdsGraphAPI','AdsProductSetListActions','GraphAPIPaging','Map'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=['created_time','id'];i=babelHelpers.inherits(l,c('AdsBaseListDataManager'));j=i&&i.prototype;l.prototype.loadFor=function(n){c('AdsGraphAPI').getWithGeneralMigration().object('product_catalog',n).edge('product_sets').batched().get({fields:k,parent_id:0}).then(c('GraphAPIPaging').eachPage(function(o){return this.$AdsProductSetListDataManagerClass1(n,o.data);}.bind(this))).done(this.__handleSuccess.bind(this,['load'],n,null),this.__handleError.bind(this,['load'],n,null));};l.prototype.$AdsProductSetListDataManagerClass1=function(n,o){c('AdsProductSetListActions').productSetListPartialLoad(n,o);};l.prototype.__onBatchLoaded=function(n){n.forEach(function(o,p){c('AdsProductSetListActions').productSetListLoaded(p,o.data);});};l.prototype.__onBatchLoadError=function(n){n.forEach(function(o,p){c('AdsProductSetListActions').productSetListLoadError(p);});};l.prototype.__getObjectTypeLabel=function(){return h._("Product Catalog");};function l(){i.apply(this,arguments);}var m=new l();f.exports=m;},null);
__d('AdsProductSetListStore',['AdsLoadState','AdsBaseListStore','AdsActionTypes','AdsProductSetListDataManager'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('AdsBaseListStore'));i=h&&h.prototype;j.prototype.getDataManager=function(){return c('AdsProductSetListDataManager');};j.prototype.__onDispatch=function(l){var m=l.action;switch(m.actionType){case c('AdsActionTypes').PRODUCT_SET.LIST.LOADED:this.__handleDataFor(m.productCatalogID,m.productSets,c('AdsLoadState').LOADED);break;case c('AdsActionTypes').PRODUCT_SET.LIST.LOAD_ERROR:this.__handleDataFor(m.productCatalogID,null,c('AdsLoadState').ERROR);break;case c('AdsActionTypes').PRODUCT_SET.LIST.PARTIAL_LOAD:this.__handleDataFor(m.productCatalogID,m.productSets,c('AdsLoadState').LOADING);break;case c('AdsActionTypes').PRODUCT_SET.BATCH_CREATED:this.$AdsProductSetListStoreClass1(m.productCatalogID);break;case c('AdsActionTypes').PRODUCT_SET.BATCH_DELETED:this.$AdsProductSetListStoreClass1(m.productCatalogID);break;}};j.prototype.$AdsProductSetListStoreClass1=function(l){if(this.__invalidate(l))this.__emitChange();};function j(){h.apply(this,arguments);}var k=new j();f.exports=k;},null);
__d('AdsProductSetSearchSource',['fbt','SearchableEntry','StaticSearchSource'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(){this.init();}i.prototype.init=function(){this.$AdsProductSetSearchSource1=null;this.$AdsProductSetSearchSource2=null;};i.prototype.getProductSetSearchSource=function(j){if(j.length===0)return null;if(this.$AdsProductSetSearchSource1&&this.$AdsProductSetSearchSource2.length===j.length)return this.$AdsProductSetSearchSource1;this.$AdsProductSetSearchSource2=j.map(function(k){return new (c('SearchableEntry'))({uniqueID:k.id,keywordString:k.id,title:k.name,subtitle:this.getSubtitle(k)});}.bind(this));this.$AdsProductSetSearchSource1=new (c('StaticSearchSource'))(this.$AdsProductSetSearchSource2);if(this.$AdsProductSetSearchSource1)this.$AdsProductSetSearchSource1.bootstrap();return this.$AdsProductSetSearchSource1;};i.prototype.getSelectedProductSetEntry=function(j){if(!this.$AdsProductSetSearchSource1||!j||!this.$AdsProductSetSearchSource2)return null;for(var k=0;k<this.$AdsProductSetSearchSource2.length;k++)if(this.$AdsProductSetSearchSource2[k]&&this.$AdsProductSetSearchSource2[k].getUniqueID()===j)return this.$AdsProductSetSearchSource2[k];return null;};i.prototype.getSubtitle=function(j){return h._("ID: {Product Set ID} Size: {Product Count}",[h.param('Product Set ID',j.id),h.param('Product Count',j.product_count||'Unavailable')]);};f.exports=new i();},null);
__d('RichMediaProductSetSelectorContainer.react',['cx','fbt','ix','AdsBusinessStore','AdsHelpLink.react','AdsLoadStateUtils','AdsMixedValue','AdsNewProductSetDialog.react','AdsProductCatalogStore','AdsProductSetListStore','AdsProductSetPaneStore','AdsProductSetSearchSource','AdsProductSetStore','AdsRichSelector.react','AdsStrings','FluxMixinLegacy','Image.react','LeftRight.react','Link.react','NumberFormat','React','ReactComponentWithPureRenderMixin','SearchableDropdownInput.contrib','SearchableEntry','StaticSearchSource','XUIButton.react','XUINotice.react','XUISpinner.react','XUIText.react','getByPath','naturalComparator'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('AdsRichSelector.react').Option,m=c('React').createClass({displayName:'RichMediaProductSetSelectorContainer',propTypes:{businessID:k.string.isRequired,disabled:k.bool,productCatalogID:k.string.isRequired,selectedProductSetID:k.string,sourceSpec:k.string.isRequired,onProductSetChange:k.func.isRequired},mixins:[c('ReactComponentWithPureRenderMixin'),c('FluxMixinLegacy')([c('AdsProductSetListStore'),c('AdsProductSetStore'),c('AdsProductCatalogStore')],{withProps:true})],getInitialState:function(){return {isProductSetCreationDialogShown:false};},statics:{calculateState:function(n,o){var p=o.selectedProductSetID,q=c('AdsProductSetListStore').getFor(o.productCatalogID),r=q.list;if(p&&r.indexOf(p)===-1){r=r.slice();r.push(p);}var s=c('AdsProductSetStore').getAll(r),t=c('AdsProductCatalogStore').get(o.productCatalogID),u=c('AdsBusinessStore').get(o.businessID),v=c('AdsLoadStateUtils').isLoading(q)||c('AdsLoadStateUtils').anyLoading(s)||c('AdsLoadStateUtils').isLoading(t)||c('AdsLoadStateUtils').isLoading(u),w=c('AdsProductSetStore').getCached(c('AdsProductSetPaneStore').getCurrentCreationID()),x=c('AdsLoadStateUtils').isError(w),y=c('AdsLoadStateUtils').getLoadedValues(s).sort(function(fa,ga){return c('naturalComparator')(fa.name,ga.name);}),z=c('AdsProductSetSearchSource').getProductSetSearchSource(y),aa=c('AdsProductSetSearchSource').getSelectedProductSetEntry(p),ba=['userpermissions','data','0','role'],ca=c('getByPath')(t,ba)==='ADMIN',da=c('getByPath')(u,ba)==='ADMIN',ea=ca||da;return {isLoading:v,canCreateProductSet:ea,productSets:y,productSetSearchSource:z,hasCreationError:x,selectedProductSetEntry:aa};}},render:function(){if(this.state.isLoading)return c('React').createElement(c('XUISpinner.react'),null);var n=null;if(this.state.hasCreationError)n=c('React').createElement(c('XUINotice.react'),{className:"_3-8x",size:'small',use:'warn'},i._("Product Set creation failed. Please try again."));if(this.props.isEnabled instanceof c('AdsMixedValue')||this.props.selectedProductSetID instanceof c('AdsMixedValue'))return this._renderMixedValues();var o=null;o=this._renderProductSetTypeAhead();var p=this.state.selectedProductSetEntry,q=this.state.productSets.find(function(s){if(p===null)return false;return (p&&p.getUniqueID()===s.id);}),r=null;if(q&&q.product_count)r=c('React').createElement('div',{className:"_47jg"},c('React').createElement('label',{className:"_47jh"},i._("This Product Set contains {count of products in product set} products.",[i.param('count of products in product set',c('React').createElement('span',{className:"_47ji"},q.product_count))])));return (c('React').createElement('div',null,c('React').createElement('div',null,o,this._renderAddProductSetComponents(),n),c('React').createElement('div',null,r)));},_onProductSetEntrySelect:function(n){this.setState({selectedProductSetEntry:n});var o=n?n.getUniqueID():'';this.props.onProductSetChange(o);},_renderProductSetTypeAhead:function(){if(this.state.productSets.length===0)return (c('React').createElement('strong',null,i._("No existing product sets")));var n=i._("Select a Product Set"),o=null,p=this.state.selectedProductSetEntry;if(p&&p instanceof c('SearchableEntry')){var q=p.getTitle();if(q.length>50)q=q.substring(0,50)+'...';var r={uniqueID:p.getUniqueID(),title:q,subtitle:p.getSubtitle()};o=new (c('SearchableEntry'))(r);}return (c('React').createElement(c('SearchableDropdownInput.contrib'),{disabled:this.props.disabled,dropdownWidth:306,placeholder:n,resetQueryStringOnSelect:true,searchSource:this.state.productSetSearchSource,showSelectedSubtitle:false,value:o,onSelect:this._onProductSetEntrySelect}));},_renderMixedValues:function(){return (c('React').createElement('strong',null,c('AdsStrings').MixedValuePlaceholder));},_renderHelpLinkForDisabledProductSetCreation:function(){return (c('React').createElement(c('AdsHelpLink.react'),{width:300},i._("Only product catalog admins can create product sets. Contact your business admin to access this feature. {learn more}",[i.param('learn more',c('React').createElement(c('Link.react'),{href:'/business/help/415284191986438',target:'_blank'},i._("Learn More.")))])));},_renderAddProductSetComponents:function(){var n=c('React').createElement('span',null,c('React').createElement(c('XUIButton.react'),{className:"_47jj",disabled:!this.state.canCreateProductSet||this.props.disabled,image:c('React').createElement(c('Image.react'),{src:j('/images/ads/powereditor/icons/create_new.png')}),key:'create',size:'large',onClick:this._onCreateProductSetClick}),this.state.canCreateProductSet?null:this._renderHelpLinkForDisabledProductSetCreation());return [c('React').createElement('div',{className:"_47jk"},n),c('React').createElement(c('AdsNewProductSetDialog.react'),{defaultCurrency:this.state.defaultCurrency,disabled:this.props.disabled,key:'new_product_set_dialog',productCatalogID:this.props.productCatalogID,shown:!!this.state.isProductSetCreationDialogShown,source:this.state.source,onClose:this._onProductSetCreationClosed})];},_renderProductSetOption:function(n){return (c('React').createElement(l,{key:n.id,label:c('React').createElement(c('LeftRight.react'),{className:"_3-8r"},c('React').createElement(c('XUIText.react'),null,n.name),c('React').createElement(c('XUIText.react'),{className:"_3-9a _47jl",size:'small',weight:'normal'},c('NumberFormat').formatInteger(n.product_count))),value:n.id},c('React').createElement('div',{className:"_2pi2"},c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),null,n.name),c('React').createElement(c('XUIText.react'),{className:"_3-9a _47jl",size:'small',weight:'normal'},c('NumberFormat').formatInteger(n.product_count))),c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{className:"_2pij _47jl",size:'small',weight:'normal'},i._("ID {product_count}",[i.param('product_count',n.id)]))))));},_onCreateProductSetClick:function(){this.setState({isProductSetCreationDialogShown:true});},_onProductSetCreationClosed:function(){this.setState({isProductSetCreationDialogShown:false});}});f.exports=m;},null);
__d('RichMediaEditorProductSetElementEditPanel.react',['cx','fbt','FBNumberInput.react','React','RichMediaProductCatalogSelectorContainer.react','RichMediaProductSetSelectorContainer.react','RichMediaProductSetElement','XUITextInput.react','AdsCanvasAPISetup'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'RichMediaEditorProductSetElementEditPanel',propTypes:{businessID:j.string,disabled:j.bool,pageID:j.string.isRequired,productSetElement:j.instanceOf(c('RichMediaProductSetElement')).isRequired,onEditDocumentElement:j.func.isRequired},getInitialState:function(){return {catalogID:this.props.productSetElement.catalogID,productSetID:this.props.productSetElement.setID,limit:this.props.productSetElement.limit};},render:function(){c('AdsCanvasAPISetup').setupGraph();return (c('React').createElement('div',{className:"_48pm"},c('React').createElement('div',{className:"_48pn"},i._("Choose a set of products from your catalog to show in Canvas.")),this._renderSingleOptionRow(c('React').createElement(c('RichMediaProductCatalogSelectorContainer.react'),{businessID:this.props.businessID,disabled:this.props.disabled,onProductCatalogChanged:this._onProductCatalogChanged,onProductCatalogErrorChange:function(){},selectedProductCatalogID:this.state.catalogID}),i._("Product Catalog")),this._renderSingleOptionRow(this._renderProductSetSelector(),i._("Product Set")),this._renderSingleOptionRow(c('React').createElement(c('FBNumberInput.react'),{defaultValue:40,disabled:this.props.disabled,minValue:1,nonnegative:true,onlyIntegers:true,value:this.state.limit,onValueChange:this._onLimitChanged,maxValue:40}),i._("Display up to"))));},_onLimitChanged:function(l){this.setState({limit:l});this.props.onEditDocumentElement(this.props.productSetElement.set('limit',l));},_onProductCatalogChanged:function(l){this.setState({catalogID:l,productSetID:null});this.props.onEditDocumentElement(this.props.productSetElement.set('catalogID',l).set('setID',null));},_onProductSetChanged:function(l){this.setState({productSetID:l});this.props.onEditDocumentElement(this.props.productSetElement.set('setID',l));},_renderProductSetSelector:function(){if(this.state.catalogID==null)return c('React').createElement('div',null);return (c('React').createElement(c('RichMediaProductSetSelectorContainer.react'),{businessID:this.props.businessID,disabled:this.props.disabled,productCatalogID:this.state.catalogID,selectedProductSetID:this.state.productSetID,sourceSpec:"CanvasBuilder",onProductSetChange:this._onProductSetChanged}));},_renderSingleOptionRow:function(l,m){return (c('React').createElement('div',{className:"_48pg"},c('React').createElement('div',{className:"_48pj"},m),c('React').createElement('div',{className:"_48pk"},l)));}});f.exports=k;},null);
__d('RichMediaEditorTextElementEditPanel.react',['cx','fbt','React','RichMediaEditorTextEditor.react','RichMediaRichFormatText','RichMediaTextElement'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'RichMediaEditorTextElementEditPanel',propTypes:{disabled:j.bool,textElement:j.instanceOf(c('RichMediaTextElement')).isRequired,onEditDocumentElement:j.func.isRequired},render:function(){return (c('React').createElement('div',{className:"_48pm"},c('React').createElement('div',{className:"_48pn"},i._("Add context to your ad. Tell people more about your product or brand.")),c('React').createElement('div',{className:"_44h6"},c('React').createElement(c('RichMediaEditorTextEditor.react'),{hideTextAlignment:false,disabled:this.props.disabled,richFormatText:this.props.textElement.richFormatText,onChange:this._onChange}))));},_onChange:function(l){this.props.onEditDocumentElement(this.props.textElement.set('richFormatText',l));}});f.exports=k;},null);
__d("XCanvasVideoUploadController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/video\/canvas_upload\/",{target_id:{type:"String",required:true}});},null);
__d('CanvasVideoUploader',['ActorURI','AdsVideoEncodingAsyncNotifier','AsyncRequest','CanvasCreationEvent','CanvasCreationWaterfallTypedLogger','VideoContainerType','VideoUploader','VideoUploadFile','XCanvasVideoUploadController','mixInEventEmitter'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){this.$CanvasVideoUploader1=i;var j=c('XCanvasVideoUploadController').getURIBuilder().setString('target_id',this.$CanvasVideoUploader1).getURI();this.$CanvasVideoUploader2=c('ActorURI').create(j,this.$CanvasVideoUploader1);this.$CanvasVideoUploader3=this.$CanvasVideoUploader3.bind(this);this.$CanvasVideoUploader4=this.$CanvasVideoUploader4.bind(this);this.$CanvasVideoUploader5=this.$CanvasVideoUploader5.bind(this);this.$CanvasVideoUploader6=this.$CanvasVideoUploader6.bind(this);this.$CanvasVideoUploader7=this.$CanvasVideoUploader7.bind(this);}h.prototype.upload=function(i){new (c('AsyncRequest'))(this.$CanvasVideoUploader2).setHandler(function(j){var k=j.payload.video_uploader[0];k.composer_entry_point_ref='page_content_tab_canvas';this.$CanvasVideoUploader8=new (c('VideoUploader'))(k);this.$CanvasVideoUploader8.subscribe('upload-progressed',this.$CanvasVideoUploader5);this.$CanvasVideoUploader8.subscribe('upload-finished',this.$CanvasVideoUploader3);this.$CanvasVideoUploader8.subscribe('upload-failed',this.$CanvasVideoUploader4);this.$CanvasVideoUploader8.subscribe('post-failed',this.$CanvasVideoUploader6);this.$CanvasVideoUploader8.subscribe('post-finished',this.$CanvasVideoUploader7);this.$CanvasVideoUploader8.upload(i);}.bind(this)).send();};h.prototype.$CanvasVideoUploader5=function(event,i){var j=Math.min(i.start_offset+i.sent_bytes,i.file_size),k=100*j/i.file_size;this.emit('upload-progressed',{percentage:k});};h.prototype.$CanvasVideoUploader3=function(event,i){new (c('CanvasCreationWaterfallTypedLogger'))().setEventName(c('CanvasCreationEvent').VIDEO_UPLOAD_SUCCESS).setPageID(this.$CanvasVideoUploader1).log();this.emit('upload-done',i);i.source='canvas';i.video_container=c('VideoContainerType').CANVAS;this.$CanvasVideoUploader8.post(i);};h.prototype.$CanvasVideoUploader4=function(event,i){new (c('CanvasCreationWaterfallTypedLogger'))().setEventName(c('CanvasCreationEvent').VIDEO_UPLOAD_ERROR).setPageID(this.$CanvasVideoUploader1).log();this.emit('upload-error',i);};h.prototype.$CanvasVideoUploader6=function(event,i){new (c('CanvasCreationWaterfallTypedLogger'))().setEventName(c('CanvasCreationEvent').VIDEO_POST_ERROR).setPageID(this.$CanvasVideoUploader1).log();};h.prototype.$CanvasVideoUploader7=function(event,i){new (c('CanvasCreationWaterfallTypedLogger'))().setEventName(c('CanvasCreationEvent').VIDEO_POST_SUCCESS).setPageID(this.$CanvasVideoUploader1).setVideoID(i.video_id).log();var j=new (c('AdsVideoEncodingAsyncNotifier'))(i.video_id);j.setOnStatusUpdateListener(function(k){});j.setOnFailedListener(function(k){new (c('CanvasCreationWaterfallTypedLogger'))().setEventName(c('CanvasCreationEvent').VIDEO_ENCODE_ERROR).setPageID(this.$CanvasVideoUploader1).setVideoID(i.video_id).log();this.emit('encoding-fail');}.bind(this));j.setOnSuccessListener(function(k){new (c('CanvasCreationWaterfallTypedLogger'))().setEventName(c('CanvasCreationEvent').VIDEO_ENCODE_SUCCESS).setPageID(this.$CanvasVideoUploader1).setVideoID(i.video_id).log();this.emit('encoding-success',k);}.bind(this));j.start();};c('mixInEventEmitter')(h,{'upload-progressed':true,'upload-done':true,'upload-fail':true,'encoding-success':true,'encoding-fail':true});f.exports=h;},null);
__d('RichMediaEditorVideoUploader.react',['cx','fbt','AdsCanvasAPISetup','AdsVideoPlayer.react','AdsXUIProgressBar.react','BackgroundImage.react','CanvasVideoUploader','FileInput.react','React','VideoUploadFile','XUIButton.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=144,l=c('React').createClass({displayName:'RichMediaEditorVideoUploader',propTypes:{disabled:j.bool,pageID:j.string.isRequired,previewVideo:j.shape({height:j.number.isRequired,width:j.number.isRequired}),uploadStatus:j.shape({isEncoding:j.bool,isUploading:j.bool,percentage:j.number}),onUploadStatusChanged:j.func.isRequired,onVideoUploaded:j.func.isRequired},render:function(){return (c('React').createElement('div',{className:"_1km8"},this._renderVideoPreview(),this._renderVideoUploadButton()));},_renderVideoPreview:function(){if(this.props.previewVideo){var m=this.props.previewVideo,n=m.preferredThumbnail,o=k/m.height;return (c('React').createElement('div',{className:"_1km9"},c('React').createElement(c('AdsVideoPlayer.react'),{playerHeight:m.height*o,playerWidth:m.width*o,ref:'videoPlayer',videoID:m.id},c('React').createElement(c('BackgroundImage.react'),{backgroundSize:'contain',height:m.height*o,src:n?n.uri:null,width:m.width*o}))));}return (c('React').createElement('div',{className:"_1kma"},c('React').createElement('img',{className:"_1kmb",src:'/images/ads/rich_media/video_placeholder.png'})));},_renderVideoUploadButton:function(){var m=this.props.uploadStatus;if(m&&(m.isUploading||m.isEncoding)){var n=m.isUploading?i._("Uploading"):i._("Encoding");return (c('React').createElement('div',{className:"_1kmc"},c('React').createElement(c('AdsXUIProgressBar.react'),{className:"_1kmd",max:100,min:0,striped:true,value:m.percentage}),c('React').createElement('div',{className:"_1kme"},n)));}else{var o=this.props.previewVideo?i._("Replace video"):i._("Upload video");return (c('React').createElement('div',{className:"_1kmc"},c('React').createElement(c('FileInput.react'),{accept:'video/*',disabled:this.props.disabled,name:'uploadVideo',ref:'fileInputVideo',onChange:this._onVideoUpload},c('React').createElement(c('XUIButton.react'),{className:"_1kmf",disabled:this.props.disabled,href:'#',label:o}))));}},_onVideoUpload:function(event){if(event.target.files.length<=0)return;c('AdsCanvasAPISetup').setupGraph();var m=event.target,n=c('VideoUploadFile').fromFileInput(m),o=new (c('CanvasVideoUploader'))(this.props.pageID);o.addListener('upload-progressed',this._onUploadProgress);o.addListener('upload-done',this._onUploadDone);o.addListener('upload-fail',this._onUploadError);o.addListener('encoding-success',this._onEncodingSuccess);o.addListener('encoding-fail',this._onEncodingFail);o.upload(n);event.target.value=null;this.props.onUploadStatusChanged({isUploading:true,isEncoding:false,percentage:0});},_onUploadSuccess:function(m){this.props.onUploadStatusChanged({isUploading:false});this.props.onPhotoUploaded(m.response.payload.photo);},_onUploadDone:function(m){this.props.onUploadStatusChanged({isUploading:false,isEncoding:true,percentage:100});},_onUploadError:function(m){this.props.onUploadStatusChanged({isUploading:false,isEncoding:false});},_onEncodingFail:function(m){this.props.onUploadStatusChanged({isUploading:false,isEncoding:false});},_onUploadProgress:function(m){this.props.onUploadStatusChanged({isUploading:true,percentage:m.percentage});},_onEncodingSuccess:function(m){this.props.onUploadStatusChanged({isUploading:false,isEncoding:false});this.props.onVideoUploaded(m);}});f.exports=l;},null);
__d('RichMediaEditorVideoElementEditPanel.react',['cx','fbt','React','RichMediaEditorLayoutSelector.react','RichMediaEditorVideoUploader.react','RichMediaVideoElement'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'RichMediaEditorVideoElementEditPanel',propTypes:{disabled:j.bool,pageID:j.string.isRequired,videoElement:j.instanceOf(c('RichMediaVideoElement')).isRequired,onEditDocumentElement:j.func.isRequired},getInitialState:function(){return {isUploading:false,isEncoding:false,percentage:0};},render:function(){return (c('React').createElement('div',{className:"_48pm"},c('React').createElement('div',{className:"_48pn"},i._("Recommended: Keep your videos under 2 minutes and use captions so that people can still engage without audio.")),c('React').createElement('div',{className:"_48po"},c('React').createElement(c('RichMediaEditorVideoUploader.react'),{disabled:this.props.disabled,pageID:this.props.pageID,previewVideo:this.props.videoElement.video,uploadStatus:this.props.videoElement.uploadStatus,onUploadStatusChanged:this._onUploadStatusChanged,onVideoUploaded:this._onVideoUploaded})),c('React').createElement('div',{className:"_48pg"},c('React').createElement('div',{className:"_48pj"},i._("Video Scaling")),c('React').createElement('div',{className:"_48pk"},c('React').createElement(c('RichMediaEditorLayoutSelector.react'),{disabled:this.props.disabled,layout:this.props.videoElement.layout,layoutOptions:['fit_to_width','fit_to_height'],onLayoutChanged:this._onChangeLayout,contentType:'video'})))));},_onVideoUploaded:function(l){this.props.onEditDocumentElement(this.props.videoElement.set('video',l));},_onUploadStatusChanged:function(l){this.props.onEditDocumentElement(this.props.videoElement.set('uploadStatus',l));},_onChangeLayout:function(l){this.props.onEditDocumentElement(this.props.videoElement.set('layout',l));}});f.exports=k;},null);
__d('RichMediaEditorElementsEditor.react',['cx','fbt','Animation','Ease','InstantShoppingDocumentElementType','React','RichMediaEditorAddComponentDialogContainer.react','RichMediaEditorDesignFormatEditPanelContainer.react','RichMediaEditorExpandableItemEditor.react','RichMediaElementUtil','RichMediaEditorButtonElementEditPanel.react','RichMediaEditorCarouselElementEditPanel.react','RichMediaEditorHeaderElementEditPanel.react','RichMediaEditorPhotoElementEditPanel.react','RichMediaEditorProductSetElementEditPanel.react','RichMediaEditorTextElementEditPanel.react','RichMediaEditorVideoElementEditPanel.react','RichMediaButtonElement','RichMediaCarouselElement','RichMediaHeaderElement','RichMediaPhotoElement','RichMediaProductSetElement','RichMediaTextElement','RichMediaVideoElement','ge','RichMediaEditorConstants'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('RichMediaEditorConstants').EDITOR_HEIGHT,l=c('RichMediaEditorConstants').EDITOR_ELEMENT_ID_PREFIX,m=c('RichMediaEditorConstants').EDITOR_ELEMENT_CONTAINER_ID,n=c('React').createClass({displayName:'RichMediaEditorElementsEditor',propTypes:{businessID:j.string,canAddProductSet:j.bool,currentEditingElementIndex:j.number,disabled:j.bool,documentElements:j.arrayOf(j.object).isRequired,documentTheme:j.string.isRequired,pageID:j.string.isRequired,onAddDocumentElement:j.func.isRequired,onAddFilesToDocumentElement:j.func.isRequired,onDeleteElement:j.func.isRequired,onEditDocumentElement:j.func.isRequired,onMoveElementDown:j.func.isRequired,onMoveElementUp:j.func.isRequired,onReplaceFileInDocumentElement:j.func,onSetDocumentTheme:j.func.isRequired,onToggleAddComponentDialog:j.func.isRequired},render:function(){var o=c('RichMediaElementUtil').getFixToBottomButtonElement(this.props.documentElements),p=o!==null,q=false;for(var r=0;r<this.props.documentElements.length;r++){var s=this.props.documentElements[r];if(c('RichMediaElementUtil').isContentUploadingInElement(s)){q=true;break;}}return (c('React').createElement('div',{className:"_3-r7",id:m},c('React').createElement(c('RichMediaEditorAddComponentDialogContainer.react'),{canAddProductSet:this._canAddProductSet(),onToggle:this.props.onToggleAddComponentDialog}),c('React').createElement(c('RichMediaEditorExpandableItemEditor.react'),{canEditTitle:false,expanded:false,title:i._("Select a theme"),onDeleteElement:this.props.onDeleteElement,onEditDocumentElement:this.props.onEditDocumentElement,onMoveElementDown:this.props.onMoveElementDown,onMoveElementUp:this.props.onMoveElementUp},c('React').createElement(c('RichMediaEditorDesignFormatEditPanelContainer.react'),{disabled:this.props.disabled})),this.props.documentElements.map(function(t){return this._renderElementEditor(t,p,q);}.bind(this))));},componentDidUpdate:function(o){if(o.currentEditingElementIndex!=this.props.currentEditingElementIndex)this._scrollToEditingElement();},_renderElementEditor:function(o,p,q){var r=null;switch(o.type){case c('InstantShoppingDocumentElementType').RICH_TEXT:r=this._renderTextElementEditor(o);break;case c('InstantShoppingDocumentElementType').PHOTO:r=this._renderPhotoElementEditor(o);break;case c('InstantShoppingDocumentElementType').VIDEO:r=this._renderVideoElementEditor(o);break;case c('InstantShoppingDocumentElementType').BUTTON:r=this._renderButtonElementEditor(o,p);break;case c('InstantShoppingDocumentElementType').SLIDESHOW:r=this._renderCarouselElementEditor(o);break;case c('InstantShoppingDocumentElementType').HEADER:r=this._renderHeaderElementEditor(o);break;case c('InstantShoppingDocumentElementType').ELEMENT_GROUP:r=this._renderProductSetElementEditor(o);break;}if(r){var s=o.index,t,u,v;if(q||this.props.disabled){u=false;t=false;v=false;}else{t=s>0&&this.props.documentElements[s-1].type!==c('InstantShoppingDocumentElementType').HEADER;u=s<this.props.documentElements.length-1&&o.type!==c('InstantShoppingDocumentElementType').HEADER;v=true;}return (c('React').createElement(c('RichMediaEditorExpandableItemEditor.react'),{canEditTitle:!this.props.disabled,element:o,expanded:o.expanded,key:o.index+o.expanded.toString(),moveElementDownEnabled:u,moveElementUpEnabled:t,title:o.name,trashButtonEnabled:v,validationInfo:c('RichMediaElementUtil').validateElement(o),onDeleteElement:this.props.onDeleteElement,onEditDocumentElement:this.props.onEditDocumentElement,onMoveElementDown:this.props.onMoveElementDown,onMoveElementUp:this.props.onMoveElementUp},r));}else return null;},_renderTextElementEditor:function(o){return (c('React').createElement(c('RichMediaEditorTextElementEditPanel.react'),{disabled:this.props.disabled,textElement:o,onEditDocumentElement:this.props.onEditDocumentElement}));},_renderPhotoElementEditor:function(o){return (c('React').createElement(c('RichMediaEditorPhotoElementEditPanel.react'),{disabled:this.props.disabled,pageID:this.props.pageID,photoElement:o,onEditDocumentElement:this.props.onEditDocumentElement}));},_renderVideoElementEditor:function(o){return (c('React').createElement(c('RichMediaEditorVideoElementEditPanel.react'),{disabled:this.props.disabled,pageID:this.props.pageID,videoElement:o,onEditDocumentElement:this.props.onEditDocumentElement}));},_canAddProductSet:function(){if(!this.props.canAddProductSet||!this.props.businessID)return false;if(isNaN(parseInt(this.props.businessID,10)))return false;if(this.props.businessID&&parseInt(this.props.businessID,10)<=0)return false;return true;},_renderProductSetElementEditor:function(o){return (c('React').createElement(c('RichMediaEditorProductSetElementEditPanel.react'),{businessID:this.props.businessID,disabled:this.props.disabled,pageID:this.props.pageID,productSetElement:o,onEditDocumentElement:this.props.onEditDocumentElement}));},_renderButtonElementEditor:function(o,p){return (c('React').createElement(c('RichMediaEditorButtonElementEditPanel.react'),{buttonElement:o,disabled:this.props.disabled,disabledReason:this.props.disabled?i._("A finished Canvas cannot be edited anymore"):null,hasFixToBottomButton:p,onEditDocumentElement:this.props.onEditDocumentElement}));},_renderCarouselElementEditor:function(o){return (c('React').createElement(c('RichMediaEditorCarouselElementEditPanel.react'),{carouselElement:o,disabled:this.props.disabled,pageID:this.props.pageID,onAddFilesToDocumentElement:this.props.onAddFilesToDocumentElement,onEditDocumentElement:this.props.onEditDocumentElement,onReplaceFileInDocumentElement:this.props.onReplaceFileInDocumentElement}));},_renderHeaderElementEditor:function(o){return (c('React').createElement(c('RichMediaEditorHeaderElementEditPanel.react'),{disabled:this.props.disabled,headerElement:o,pageID:this.props.pageID,onEditDocumentElement:this.props.onEditDocumentElement}));},_scrollToEditingElement:function(){var o=this.props.currentEditingElementIndex;if(o===undefined||o<0||o>=this.props.documentElements.length)return;var p=c('ge')(m),q=c('ge')(l+o);new (c('Animation'))(p).to('scrollTop',q.offsetTop-k/2+q.scrollHeight/2-100).ease(c('Ease').makePowerIn(3)).duration(300).go();}});f.exports=n;},null);
__d('RichMediaEditorCreator.react',['cx','fbt','React','RichMediaEditorElementsEditor.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'RichMediaEditorCreator',propTypes:{businessID:j.string,canAddProductSet:j.bool,currentEditingElementIndex:j.number,documentElements:j.arrayOf(j.object).isRequired,documentTheme:j.string.isRequired,isPublished:j.bool.isRequired,pageID:j.string.isRequired,onAddDocumentElement:j.func.isRequired,onAddFilesToDocumentElement:j.func,onDeleteElement:j.func.isRequired,onDuplicateDocument:j.func,onEditDocumentElement:j.func.isRequired,onMoveElementDown:j.func.isRequired,onMoveElementUp:j.func.isRequired,onReplaceFileInDocumentElement:j.func,onSetDocumentTheme:j.func.isRequired,onToggleAddComponentDialog:j.func.isRequired},render:function(){var l=this.props.isPublished?this.props.onDuplicateDocument?c('React').createElement('div',{className:"_5u1g _5u1h"},c('React').createElement('span',{onClick:this.props.onDuplicateDocument},i._("Duplicate to edit"))):null:c('React').createElement('div',{className:"_5u1g _5u1i"},c('React').createElement('span',{onClick:this._addComponent},i._("+ Add Component")));return (c('React').createElement('div',{className:"_5j5a"},c('React').createElement(c('RichMediaEditorElementsEditor.react'),babelHelpers['extends']({disabled:this.props.isPublished},this.props)),l));},_addComponent:function(){this.props.onToggleAddComponentDialog(true);}});f.exports=k;},null);
__d('RichMediaDocumentPublishDialog.react',['cx','LayerFadeOnHide','React','ReactLayeredComponentMixin','XUIDialog.react','XUIDialogBody.react','XUIDialogTitle.react','XUITextInput.react'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=600,k=c('React').createClass({displayName:'RichMediaDocumentPublishDialog',mixins:[c('ReactLayeredComponentMixin')],propTypes:{dialogShown:i.bool.isRequired,documentURL:i.string,isPublished:i.bool.isRequired,onToggle:i.func.isRequired},renderLayers:function(){var l=this.props.isPublished?'Finished Canvas':'This canvas has not been published',m=this.props.isPublished?c('React').createElement('div',null,c('React').createElement('span',{className:"_4dkc"},'Copy the URL below to attach this Canvas to your ad'),c('React').createElement(c('XUITextInput.react'),{className:"_4dkd",height:'tall',value:this.props.documentURL})):c('React').createElement('div',null,'Canvas needs to be published before generating a URL');return {dialog:c('React').createElement(c('XUIDialog.react'),{behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},shown:this.props.dialogShown,width:j,onToggle:this.props.onToggle},c('React').createElement(c('XUIDialogTitle.react'),null,l),c('React').createElement(c('XUIDialogBody.react'),null,m))};},render:function(){return null;}});f.exports=k;},null);
__d('RichMediaDocumentPublishDialogContainer.react',['FluxContainer','FluxStore','React','RichMediaDocumentPublishDialog.react','RichMediaEditorActions','RichMediaEditorStore'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.getStores=function(){return [c('RichMediaEditorStore')];};j.calculateState=function(){return {dialogShown:c('RichMediaEditorStore').getDocumentURLDialogShown()};};j.prototype.render=function(){return (c('React').createElement(c('RichMediaDocumentPublishDialog.react'),{dialogShown:this.state.dialogShown,documentURL:this.props.documentURL,isPublished:this.props.isPublished,onToggle:this.$RichMediaDocumentPublishDialogContainer1}));};j.prototype.$RichMediaDocumentPublishDialogContainer1=function(k){c('RichMediaEditorActions').setDocumentURLDialogShown(k);};function j(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(j);},null);
__d('RichMediaFinishConfirmDialog.react',['cx','fbt','LayerFadeOnHide','LayerHideOnEscape','Layout.react','React','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('Layout.react').Column,k=c('Layout.react').FillColumn,l=c('React').PropTypes,m=c('React').createClass({displayName:'RichMediaFinishConfirmDialog',propTypes:{onCancel:l.func.isRequired,onFinish:l.func.isRequired},render:function(){return (c('React').createElement(c('XUIDialog.react'),{behaviors:{LayerHideOnEscape:c('LayerHideOnEscape'),LayerFadeOnHide:c('LayerFadeOnHide')},shown:true,width:450},c('React').createElement(c('XUIDialogBody.react'),{className:"_1kg2"},c('React').createElement(c('Layout.react'),null,c('React').createElement(j,{className:'mrm'},c('React').createElement('img',{className:"_1kg3",src:'/images/ads/rich_media/finish_confirmation_illustration.png'})),c('React').createElement(k,{className:"_1kg4"},c('React').createElement('div',{className:"_1kg5"},c('React').createElement('div',{className:"_1kg6"},i._("Are you sure you are done?")),c('React').createElement('div',{className:"_1kg7"},i._("This will generate a URL that you can attach to your ad. You won't be able to make any changes to your Canvas once you've clicked Finish.")))))),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',label:i._("Cancel"),onClick:this.props.onCancel}),c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',className:"_4jy1",label:i._("Finish"),onClick:this.props.onFinish}))));}});f.exports=m;},null);
__d('RichMediaEditorToolbar.react',['cx','fbt','DOM','LoadingIndicator.react','React','ReactDOM','RichMediaDocumentPublishDialogContainer.react','RichMediaFinishConfirmDialog.react','Tooltip','emptyFunction','AdsCanvasEditorEnums'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('AdsCanvasEditorEnums').SaveStateEnum,k=c('React').PropTypes,l=c('React').createClass({displayName:'RichMediaEditorToolbar',propTypes:{createPostEnabled:k.bool,documentElements:k.arrayOf(k.object).isRequired,documentHasError:k.bool.isRequired,documentName:k.string.isRequired,documentTheme:k.string.isRequired,documentURL:k.string.isRequired,editState:k.any.isRequired,isPublished:k.bool.isRequired,saveFailed:k.bool.isRequired,onCreatePost:k.func,onPublishDocument:k.func.isRequired,onSaveDocument:k.func.isRequired,onSetDocumentName:k.func.isRequired,onShownDocumentURLDialog:k.func.isRequired},getDefaultProps:function(){return {createPostEnabled:false};},render:function(){return this.props.isPublished?this._renderButtonsForPublishedCanvas():this._renderButtonsForDraftCanvas();},_renderButtonsForPublishedCanvas:function(){return (c('React').createElement('div',{className:"__e-"},c('React').createElement(c('RichMediaDocumentPublishDialogContainer.react'),{documentURL:this.props.documentURL,isPublished:this.props.isPublished}),c('React').createElement('button',{className:"_50lg"+(this.props.createPostEnabled?' '+"_50li":'')+(!this.props.createPostEnabled?' '+"_50lk":''),label:null,onClick:this.props.createPostEnabled?this.props.onCreatePost:null},i._("Create Post")),c('React').createElement('button',{className:"_50lg"+(' '+"_50li")+(' '+"_50lj")+(' '+"_50lm"),label:null,onClick:this._showDocumentURL},i._("Get URL"))));},_renderButtonsForDraftCanvas:function(){var m=this.props.editState===j.SAVING?c('React').createElement('div',{className:"_4y8"},c('React').createElement(c('LoadingIndicator.react'),{color:'white',size:'medium'})):null,n=this.props.editState!==j.SAVED,o=this.props.editState!==j.UNSAVED||this.props.documentHasError;return (c('React').createElement('div',{className:"__e-"},c('React').createElement('button',{className:"_50lg"+(!n?' '+"_50li":'')+(n?' '+"_50lk":''),disabled:n,label:null,onClick:this._onPublishDocument},c('React').createElement('span',c('Tooltip').propsFor(n?i._("Save canvas first then publish it"):null),i._("Finish"))),c('React').createElement('div',{className:"_50ll"},c('React').createElement('button',{className:"_50lg"+(!o?' '+"_387o":'')+(o?' '+"_387p":'')+(!o?' '+"_50li":'')+(o?' '+"_50lk":'')+(' '+"_50lm"),disabled:o,label:null,onClick:this._onSaveDocument},c('React').createElement('span',c('Tooltip').propsFor(this.props.documentHasError?i._("Fix validation error before saving"):null),i._("Save Draft"))),c('React').createElement('div',{className:"_50ln"},m,this.props.saveFailed?c('React').createElement('span',{className:"_50lo"},i._("Failed to save")):null))));},_showDocumentURL:function(){this.props.onShownDocumentURLDialog();},_onPublishDocument:function(){c('ReactDOM').render(c('React').createElement(c('RichMediaFinishConfirmDialog.react'),{onCancel:c('emptyFunction'),onFinish:this.props.onPublishDocument}),c('DOM').create('div'));},_onSaveDocument:function(){this.props.onSaveDocument(this.props.documentName,this.props.documentTheme,this.props.documentElements);}});f.exports=l;},null);
__d('RichMediaButtonElementPreview.react',['cx','React','RichMediaEditorTextEditor.react','RichMediaButtonElement','emptyFunction'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'RichMediaButtonElementPreview',PropTypes:{buttonElement:i.instanceOf(c('RichMediaButtonElement')).isRequired},render:function(){var k=this.props.buttonElement.isFilled?{background:this.props.buttonElement.buttonColor}:{border:'solid 2px '+this.props.buttonElement.buttonColor};return (c('React').createElement('div',{className:"_6w5",style:k},c('React').createElement(c('RichMediaEditorTextEditor.react'),{buttonPreview:true,disabled:true,richFormatText:this.props.buttonElement.richFormatText,onChange:c('emptyFunction')})));}});f.exports=j;},null);
__d('RichMediaPreviewConstants',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports={DEVICE_HEIGHT:682,DEVICE_WIDTH:375,BUTTON_HEIGHT:90,HEADER_HEIGHT:44,PREVIEW_ELEMENT_ID_PREFIX:'preview_element',PREVIEW_ELEMENTS_ID:'preview_elements'};},null);
__d('RichMediaCarouselItemPreview.react',['cx','Image.react','React','RichMediaCarouselItem','RichMediaPreviewConstants'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('RichMediaPreviewConstants').DEVICE_WIDTH,j=c('React').PropTypes,k=c('React').createClass({displayName:'RichMediaCarouselItemPreview',PropTypes:{carouselItem:j.instanceOf(c('RichMediaCarouselItem')).isRequired,layout:j.string.isRequired,slideHeight:j.number.isRequired},render:function(){var l=this.props.carouselItem.photo;if(l&&l.src){var m=this._calculateImageDimension(l);return (c('React').createElement('div',{className:"_1sce",style:{overflow:'hidden',height:m.height,width:Math.min(m.width,i)}},c('React').createElement('div',{className:"_5a4c"}),c('React').createElement(c('Image.react'),{height:m.height,src:l.src,style:{transform:'translateX(-'+m.translateX+'px)'},width:m.width})));}else return (c('React').createElement('div',{className:"_1sce",style:{height:this.props.slideHeight,width:i,background:'url(\'/images/ads/rich_media/photo_placeholder.png\')'+' no-repeat center center'}}));},_calculateImageDimension:function(l){var m=0,n=0,o=0;if(this.props.layout=='fit_to_height'){m=this.props.slideHeight;n=Math.min(i,l.width*this.props.slideHeight/l.height);n=l.width*this.props.slideHeight/l.height;if(n>i)o=(n-i)/2;}else{n=i;m=Math.min(l.height*i/l.width,this.props.slideHeight);}return {height:m,translateX:o,width:n};}});f.exports=k;},null);
__d('RichMediaCarouselElementPreview.react',['cx','React','RichMediaCarouselElement','RichMediaCarouselItemPreview.react','RichMediaPreviewConstants'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('RichMediaPreviewConstants').DEVICE_WIDTH,k=c('React').createClass({displayName:'Track',PropTypes:{currentSlide:i.number.isRequired,slideHeight:i.number.isRequired,slideWidth:i.number.isRequired,swipeOffset:i.number},render:function(){var o=500,p=c('React').Children.count(this.props.children),q=-this.props.slideWidth*this.props.currentSlide;if(this.props.swipeOffset)q+=this.props.swipeOffset;var r={height:this.props.slideHeight,width:(p+2)*this.props.slideWidth,WebkitTransform:'translate3d('+q+'px, 0px, 0px)',transform:'translate3d('+q+'px, 0px, 0px)',msTransform:'translateX('+q+'px)',WebkitTransition:'-webkit-transform '+o+'ms ease',transition:'transform '+o+'ms ease'};return (c('React').createElement('div',{style:r},c('React').Children.map(this.props.children,function(s,t){return (c('React').createElement('div',{key:t,style:{display:'inline-block',width:this.props.slideWidth,height:this.props.slideHeight,position:'relative'}},s));}.bind(this))));}}),l=c('React').createClass({displayName:'Indicator',PropTypes:{currentSlide:i.number.isRequired,changeSlideHandler:i.func.isRequired},render:function(){return (c('React').createElement('ul',{className:"_5p-t"},this.props.children.map(function(o,p){return (c('React').createElement('li',{key:p},c('React').createElement('div',{className:"_5p-w"+(p===this.props.currentSlide?' '+"_5p-x":'')+(p!==this.props.currentSlide?' '+"_5p-y":''),onClick:function(q){return this.props.changeSlideHandler(p);}.bind(this)})));}.bind(this))));}}),m=c('React').createClass({displayName:'Slider',PropTypes:{currentItemIndex:i.number.isRequired,slideHeight:i.number.isRequired,slideWidth:i.number.isRequired},getInitialState:function(){return {currentSlide:this.props.currentItemIndex,dragging:false,touchObject:null,swipeOffset:0};},componentWillReceiveProps:function(o){this.setState({currentSlide:o.currentItemIndex});},render:function(){return (c('React').createElement('div',{onMouseDown:this._swipeStart,onMouseLeave:this.state.dragging?this._swipeEnd:null,onMouseMove:this.state.dragging?this._swipeMove:null,onMouseUp:this._swipeEnd},c('React').createElement(k,{currentSlide:this.state.currentSlide,slideHeight:this.props.slideHeight,slideWidth:this.props.slideWidth,swipeOffset:this.state.swipeOffset},this.props.children),c('React').createElement(l,{changeSlideHandler:this._changeSlideHandler,currentSlide:this.state.currentSlide},this.props.children)));},_changeSlideHandler:function(o){if(o>=0&&o<this.props.children.length)this.setState({currentSlide:o});},_swipeStart:function(event){var o=event.touches!==undefined?event.touches[0].pageX:event.clientX,p=event.touches!==undefined?event.touches[0].pageY:event.clientY;this.setState({dragging:true,touchObject:{startX:o,startY:p,curX:o,curY:p}});},_swipeMove:function(event){if(!this.state.dragging)return;var o=this.state.touchObject;o.curX=event.touches?event.touches[0].pageX:event.clientX;o.curY=event.touches?event.touches[0].pageY:event.clientY;this.setState({touchObject:o,swipeOffset:o.curX-o.startX});event.preventDefault();},_swipeEnd:function(event){var o=50;if(!this.state.dragging)return;var p=this.state.currentSlide,q=this.state.touchObject;if(q.curX-q.startX>o){p--;}else if(q.curX-q.startX<-o)p++;if(p<0){p=0;}else if(p>=this.props.children.length)p=this.props.children.length-1;this.setState({currentSlide:p,dragging:false,swipeOffset:0,touchObject:{}});}}),n=c('React').createClass({displayName:'RichMediaCarouselElementPreview',PropTypes:{carouselElement:i.instanceOf(c('RichMediaCarouselElement')).isRequired,fullHeight:i.number.isRequired},render:function(){if(this.props.carouselElement.items.length>0){var o=this._calculateSlideHeight();return (c('React').createElement('div',{className:"_5p-z"},c('React').createElement(m,{currentItemIndex:this.props.carouselElement.selectedItemIndex,slideHeight:o,slideWidth:j},this.props.carouselElement.items.map(function(p){return (c('React').createElement(c('RichMediaCarouselItemPreview.react'),{carouselItem:p,key:this.props.carouselElement.index+'-'+p.index,layout:this.props.carouselElement.layout,slideHeight:o}));}.bind(this)))));}return (c('React').createElement('div',null,c('React').createElement('div',{className:"_49qc",style:{height:this._calculateSlideHeight()}},c('React').createElement('img',{src:'/images/ads/rich_media/photo_placeholder.png'}))));},_calculateSlideHeight:function(){var o=this.props.fullHeight;if(this.props.carouselElement.layout==='fit_to_width'){var p=0;this.props.carouselElement.items.forEach(function(q){if(q.photo&&q.photo.src){var r=q.photo.height*j/q.photo.width;if(r>p)p=r;}});if(p!=0)o=p;}return o;}});f.exports=n;},null);
__d('RichMediaHeaderElementPreview.react',['cx','CanvasColorUtils','Image.react','React','RichMediaHeaderElement','RichMediaRichFormatText'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'RichMediaHeaderElementPreview',PropTypes:{headerElement:i.instanceOf(c('RichMediaHeaderElement')).isRequired},render:function(){var k=324,l=44;if(this.props.headerElement.photo){var m=this.props.headerElement.photo,n=Math.min(l/m.height,k/m.width);return (c('React').createElement('div',{className:"_5o5u",style:this._getBackgroundStyle()},c('React').createElement(c('Image.react'),{className:"_5o5y",height:m.height*n,src:m.src,width:m.width*n})));}else if(this.props.headerElement.composedText){var o=c('RichMediaRichFormatText').getPlainTextFromComposedText(this.props.headerElement.composedText);return (c('React').createElement('div',{className:"_5o5u"},c('React').createElement('div',{className:"_5o5y"},c('React').createElement('span',{className:"_5o5z"},o))));}return (c('React').createElement('div',{className:"_5o5u",style:this._getBackgroundStyle()}));},_getBackgroundStyle:function(){var k={};if(this.props.headerElement.backgroundColor){var l=c('CanvasColorUtils').convertARGBToColorWithOpacity(this.props.headerElement.backgroundColor),m=c('CanvasColorUtils').convertRGBtoCSSColorWithOpacity(l.color,l.opacity/100);k.background=m;}else k.background='rgba(255, 255, 255, 1.0)';if(this.props.headerElement.isOpaque())k.position='static';return k;}});f.exports=j;},null);
__d('RichMediaPhotoElementPreview.react',['cx','Image.react','React','RichMediaPhotoElement','RichMediaPreviewConstants'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('RichMediaPreviewConstants').DEVICE_WIDTH,k=c('React').createClass({displayName:'RichMediaPhotoElementPreview',PropTypes:{photoElement:i.instanceOf(c('RichMediaPhotoElement')).isRequired,fullHeight:i.number.isRequired},render:function(){var l=this.props.photoElement;if(l.photo){var m=l.photo,n=m.src;if(n){var o=0,p=0;if(l.layout=='fit_to_height'){o=this.props.fullHeight;p=m.width*this.props.fullHeight/m.height;}else{p=j;o=m.height*j/m.width;}var q=o>this.props.fullHeight?this.props.fullHeight:o,r=p>j?j:p,s=(r-p)/2,t={height:q,width:r,overflow:'hidden'},u={position:'relative',left:s};return (c('React').createElement('div',{style:t},c('React').createElement(c('Image.react'),{height:o,src:n,style:u,width:p})));}}return (c('React').createElement('div',null,c('React').createElement('div',{className:"_49qc",style:{height:this.props.fullHeight}},c('React').createElement(c('Image.react'),{src:'/images/ads/rich_media/photo_placeholder.png'}))));}});f.exports=k;},null);
__d('RichMediaPreviewUtil',['RichMediaElementUtil','RichMediaPreviewConstants'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('RichMediaPreviewConstants').BUTTON_HEIGHT,i=c('RichMediaPreviewConstants').DEVICE_HEIGHT,j=c('RichMediaPreviewConstants').HEADER_HEIGHT,k={getScrollableAreaFullHeight:function(l){var m=c('RichMediaElementUtil').getFixToBottomButtonElement(l),n=c('RichMediaElementUtil').hasFixToTopHeaderElement(l);return i-(m?h:0)-(n?j:0);}};f.exports=k;},null);
__d('RichMediaProductSetElementPreview.react',['areEqual','DOM','React','ReactDOM','RichMediaProductSetElement','UIPagelet','XUISpinner.react'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'RichMediaProductSetElementPreview',PropTypes:{productSetElement:h.instanceOf(c('RichMediaProductSetElement')).isRequired},render:function(){return (c('React').createElement('span',{ref:'productSetPreview'},c('React').createElement(c('XUISpinner.react'),{size:'large'})));},componentDidMount:function(){this._loadProductSetPreview();},shouldComponentUpdate:function(j){return !c('areEqual')(this.props.productSetElement.setID,j.productSetElement.setID)||!c('areEqual')(this.props.productSetElement.limit,j.productSetElement.limit);},componentDidUpdate:function(){this._loadProductSetPreview();},_loadProductSetPreview:function(){if(isNaN(parseInt(this.props.productSetElement.setID,10))){c('DOM').setContent(c('ReactDOM').findDOMNode(this.refs.productSetPreview),'');return;}c('UIPagelet').loadFromEndpoint('RichMediaProductSetPreviewPageletController',c('ReactDOM').findDOMNode(this.refs.productSetPreview),{limit:this.props.productSetElement.limit,productSetID:this.props.productSetElement.setID});}});f.exports=i;},null);
__d('RichMediaTextElementPreview.react',['React','RichMediaEditorTextEditor.react','RichMediaTextElement'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'RichMediaTextElementPreview',PropTypes:{textElement:h.instanceOf(c('RichMediaTextElement')).isRequired},render:function(){return (c('React').createElement(c('RichMediaEditorTextEditor.react'),{disabled:true,richFormatText:this.props.textElement.richFormatText,textPreview:true,onChange:function(j){return j;}}));}});f.exports=i;},null);
__d('RichMediaVideoElementPreview.react',['cx','AdsVideoPlayer.react','BackgroundImage.react','React','RichMediaVideoElement','RichMediaPreviewConstants'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('RichMediaPreviewConstants').DEVICE_WIDTH,k=c('React').createClass({displayName:'RichMediaVideoElementPreview',PropTypes:{fullHeight:i.number.isRequired,videoElement:i.instanceOf(c('RichMediaVideoElement')).isRequired},render:function(){var l=this.props.videoElement;if(l.video){var m=l.video,n=m.preferredThumbnail,o=0,p=0;if(l.layout=='fit_to_height'){p=this.props.fullHeight;o=Math.round(m.width*this.props.fullHeight/m.height);}else{o=j;p=Math.round(m.height*j/m.width);}var q=(j-o)/2,r={height:p,width:o,overflow:'hidden',position:'relative',left:q};return (c('React').createElement('div',{style:r},c('React').createElement(c('AdsVideoPlayer.react'),{autoPlay:false,forceHD:true,hideCloseButton:true,playerHeight:p,playerWidth:o,ref:'videoPlayer',showControls:false,videoID:m.id},c('React').createElement(c('BackgroundImage.react'),{backgroundSize:'contain',height:p,src:n?n.uri:null,width:o}))));}return (c('React').createElement('div',null,c('React').createElement('div',{className:"_49qc",style:{height:this.props.fullHeight}},c('React').createElement('img',{src:'/images/ads/rich_media/video_placeholder.png'}))));}});f.exports=k;},null);
__d('RichMediaPreviewCanvas.react',['cx','Animation','DOM','Ease','InstantShoppingDocumentElementType','React','RichMediaButtonElement','RichMediaButtonElementPreview.react','RichMediaCarouselElement','RichMediaCarouselElementPreview.react','RichMediaElementUtil','RichMediaHeaderElement','RichMediaHeaderElementPreview.react','RichMediaPhotoElement','RichMediaPhotoElementPreview.react','RichMediaPreviewUtil','RichMediaProductSetElement','RichMediaProductSetElementPreview.react','RichMediaTextElement','RichMediaTextElementPreview.react','RichMediaVideoElement','RichMediaVideoElementPreview.react','RichMediaPreviewConstants'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('RichMediaPreviewConstants').BUTTON_HEIGHT,k=c('RichMediaPreviewConstants').DEVICE_HEIGHT,l='preview_element',m='preview_elements',n=c('React').createClass({displayName:'RichMediaPreviewCanvas',propTypes:{currentEditingElementIndex:i.number.isRequired,documentElements:i.arrayOf(i.object).isRequired,documentTheme:i.string.isRequired},componentDidUpdate:function(o){this._maybeScrollToEditingElement();},render:function(){var o=c('RichMediaPreviewUtil').getScrollableAreaFullHeight(this.props.documentElements),p={background:'#'+this.props.documentTheme.substr(2)},q={height:o+'px'};return (c('React').createElement('div',{className:"_48ci",style:p},this._renderHeaderPreview(),c('React').createElement('div',{className:"_26os",id:m,style:q},this.props.documentElements.map(function(r){return this._renderElementPreview(r,o);}.bind(this))),this._renderBottomButtonPreview()));},_renderBottomButtonPreview:function(){var o=c('RichMediaElementUtil').getFixToBottomButtonElement(this.props.documentElements);if(o)return (c('React').createElement('div',{className:"_26om",ref:'bottomButton'},this._renderButtonElementPreview(o)));return null;},_renderHeaderPreview:function(){var o=c('RichMediaElementUtil').getHeaderElement(this.props.documentElements);if(o)return this._renderHeaderElementPreview(o);return null;},_renderElementPreview:function(o,p){var q=null;switch(o.type){case c('InstantShoppingDocumentElementType').BUTTON:if(!o.isFixedToBottom)q=this._renderButtonElementPreview(c('RichMediaButtonElement').createFromObject(o));break;case c('InstantShoppingDocumentElementType').SLIDESHOW:q=this._renderCaourselElementPreview(c('RichMediaCarouselElement').createFromObject(o),p);break;case c('InstantShoppingDocumentElementType').HEADER:break;case c('InstantShoppingDocumentElementType').PHOTO:q=this._renderPhotoElementPreview(c('RichMediaPhotoElement').createFromObject(o),p);break;case c('InstantShoppingDocumentElementType').VIDEO:q=this._renderVideoElementPreview(c('RichMediaVideoElement').createFromObject(o),p);break;case c('InstantShoppingDocumentElementType').RICH_TEXT:q=this._renderTextElementPreview(c('RichMediaTextElement').createFromObject(o));break;case c('InstantShoppingDocumentElementType').ELEMENT_GROUP:q=this._renderProductGroupElementPreview(c('RichMediaProductSetElement').createFromObject(o));break;}var r=o.index;return (c('React').createElement('div',{id:l+r,key:r},q));},_renderButtonElementPreview:function(o){return (c('React').createElement(c('RichMediaButtonElementPreview.react'),{buttonElement:o,key:o.index}));},_renderProductGroupElementPreview:function(o){return (c('React').createElement(c('RichMediaProductSetElementPreview.react'),{productSetElement:o}));},_renderCaourselElementPreview:function(o,p){return (c('React').createElement(c('RichMediaCarouselElementPreview.react'),{carouselElement:o,fullHeight:p,key:o.index}));},_renderHeaderElementPreview:function(o){return (c('React').createElement(c('RichMediaHeaderElementPreview.react'),{headerElement:o,key:o.index}));},_renderPhotoElementPreview:function(o,p){return (c('React').createElement(c('RichMediaPhotoElementPreview.react'),{fullHeight:p,key:o.index,photoElement:o}));},_renderVideoElementPreview:function(o,p){return (c('React').createElement(c('RichMediaVideoElementPreview.react'),{fullHeight:p,key:o.index,videoElement:o}));},_renderTextElementPreview:function(o){return (c('React').createElement(c('RichMediaTextElementPreview.react'),{key:o.index,textElement:o}));},_maybeScrollToEditingElement:function(){var o=this.props.currentEditingElementIndex;if(o<0||o>=this.props.documentElements.length)return;var p=this.props.documentElements[o];if(!p.expanded||p.type===c('InstantShoppingDocumentElementType').HEADER)return;if(p.uploadStatus&&p.uploadStatus.isUploading)return;var q=c('RichMediaElementUtil').getFixToBottomButtonElement(this.props.documentElements),r=q?k-j:k,s=c('DOM').find(document,'#'+l+o),t=c('DOM').find(document,'#'+m);new (c('Animation'))(t).to('scrollTop',s.offsetTop-r/2+s.scrollHeight/2).ease(c('Ease').makePowerIn(3)).duration(300).go();}});f.exports=n;},null);
__d('RichMediaPreviewToolbar.react',['ix','cx','fbt','AdsCanvasEditorFeature','Image.react','React','Tooltip','LoadingIndicator.react','fbglyph','AdsCanvasEditorEnums'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('AdsCanvasEditorEnums').SaveStateEnum,l=c('React').PropTypes,m=c('React').createClass({displayName:'RichMediaPreviewToolbar',propTypes:{editState:l.any.isRequired,previewFailed:l.bool.isRequired,sendingPreview:l.bool.isRequired,onMobilePreview:l.func.isRequired,onSharePreview:l.func.isRequired},render:function(){var n=this.props.editState!==k.SAVED||this.props.sendingPreview;return (c('React').createElement('div',{className:"_2sso"},c('React').createElement('div',{className:"_2ssp"},c('React').createElement('span',{className:"_2ssq"},j._("Quick Preview")),c('React').createElement('div',{className:"_2ssr"},c('React').createElement(c('Image.react'),babelHelpers['extends']({src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/info-solid_16_bluegray-40.png")},c('Tooltip').propsFor(j._("Quickly preview the canvas as it's being composed. For pixel-perfect rendering, preview on a mobile device.")))))),c('React').createElement('div',{className:"_4yg8"},this.props.sendingPreview?c('React').createElement('div',{className:"_4yg9"},c('React').createElement(c('LoadingIndicator.react'),{color:'white',size:'medium'})):null),c('AdsCanvasEditorFeature').preview_share_enabled?this._renderPreviewButton(n?'/images/ads/rich_media/group_preview_share_disabled.png':'/images/ads/rich_media/group_preview_share.png',this.props.editState!==k.SAVED?j._("Save canvas first to share preview with others"):j._("Send a preview of this Canvas to people associated with the page"),n?null:this.props.onSharePreview):null,this._renderPreviewButton(n?'/images/ads/rich_media/self_preview_share_disabled.png':'/images/ads/rich_media/self_preview_share.png',this.props.editState!==k.SAVED?j._("Save canvas first to preview on mobile"):j._("Send a preview of this Canvas to your phone or mobile device"),n?null:this.props.onMobilePreview)));},_renderPreviewButton:function(n,o,p){return (c('React').createElement('div',{className:"_2sss"},c('React').createElement(c('Image.react'),babelHelpers['extends']({src:n},c('Tooltip').propsFor(o),{onClick:p}))));}});f.exports=m;},null);
__d('RichMediaPreview.react',['cx','React','RichMediaPreviewCanvas.react','RichMediaPreviewToolbar.react'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'RichMediaPreview',propTypes:{currentEditingElementIndex:i.number.isRequired,documentElements:i.arrayOf(i.object).isRequired,documentTheme:i.string.isRequired,editState:i.any.isRequired,previewFailed:i.bool.isRequired,sendingPreview:i.bool.isRequired,onMobilePreview:i.func.isRequired,onSharePreview:i.func.isRequired},render:function(){return (c('React').createElement('div',{className:"_2bua"},c('React').createElement(c('RichMediaPreviewToolbar.react'),this.props),c('React').createElement(c('RichMediaPreviewCanvas.react'),this.props)));}});f.exports=j;},null);
__d('AdsCanvasEditor.react',['Layout.react','React','RichMediaEditorCreator.react','RichMediaEditorTopNavigator.react','RichMediaElementUtil','RichMediaPreview.react','getObjectValues','AdsCanvasEditorEnums'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('Layout.react').Column,i=c('Layout.react').FillColumn,j=c('AdsCanvasEditorEnums').SaveStateEnum,k=c('React').PropTypes,l=c('React').createClass({displayName:'AdsCanvasEditor',propTypes:{businessID:k.string,canAddProductSet:k.bool,createPostEnabled:k.bool,currentEditingElementIndex:k.number.isRequired,documentElements:k.arrayOf(k.object).isRequired,documentName:k.string.isRequired,documentTheme:k.string.isRequired,documentURL:k.string.isRequired,editState:k.oneOf(c('getObjectValues')(j)),isPublished:k.bool.isRequired,pageID:k.string.isRequired,previewFailed:k.bool.isRequired,renderPreviewOnly:k.bool.isRequired,saveFailed:k.bool.isRequired,sendingPreview:k.bool.isRequired,onAddDocumentElement:k.func.isRequired,onAddFilesToDocumentElement:k.func.isRequired,onCreatePost:k.func,onDeleteElement:k.func.isRequired,onDuplicateDocument:k.func,onEditDocumentElement:k.func.isRequired,onMobilePreview:k.func.isRequired,onMoveElementDown:k.func.isRequired,onMoveElementUp:k.func.isRequired,onPublishDocument:k.func.isRequired,onReplaceFileInDocumentElement:k.func.isRequired,onSaveDocument:k.func.isRequired,onSetDocumentName:k.func.isRequired,onSetDocumentTheme:k.func.isRequired,onSharePreview:k.func.isRequired,onShownDocumentURLDialog:k.func.isRequired,onToggleAddComponentDialog:k.func.isRequired},render:function(){if(this.props.renderPreviewOnly)return (c('React').createElement(c('RichMediaPreview.react'),{currentEditingElementIndex:this.props.currentEditingElementIndex,documentElements:this.props.documentElements,documentTheme:this.props.documentTheme,editState:this.props.editState,isPublished:this.props.isPublished,previewFailed:this.props.previewFailed,sendingPreview:this.props.sendingPreview,onMobilePreview:this.props.onMobilePreview,onSharePreview:this.props.onSharePreview}));return (c('React').createElement('div',null,c('React').createElement(c('RichMediaEditorTopNavigator.react'),{createPostEnabled:this.props.createPostEnabled,documentElements:this.props.documentElements,documentHasError:this._documentHasError(),documentName:this.props.documentName,documentTheme:this.props.documentTheme,documentURL:this.props.documentURL,editState:this.props.editState,isPublished:this.props.isPublished,saveFailed:this.props.saveFailed,onCreatePost:this.props.onCreatePost,onPublishDocument:this.props.onPublishDocument,onSaveDocument:this.props.onSaveDocument,onSetDocumentName:this.props.onSetDocumentName,onShownDocumentURLDialog:this.props.onShownDocumentURLDialog}),c('React').createElement(c('Layout.react'),null,c('React').createElement(i,null,c('React').createElement(c('RichMediaEditorCreator.react'),{businessID:this.props.businessID,canAddProductSet:this.props.canAddProductSet,currentEditingElementIndex:this.props.currentEditingElementIndex,documentElements:this.props.documentElements,documentTheme:this.props.documentTheme,isPublished:this.props.isPublished,pageID:this.props.pageID,onAddDocumentElement:this.props.onAddDocumentElement,onAddFilesToDocumentElement:this.props.onAddFilesToDocumentElement,onDeleteElement:this.props.onDeleteElement,onDuplicateDocument:this.props.onDuplicateDocument,onEditDocumentElement:this.props.onEditDocumentElement,onMoveElementDown:this.props.onMoveElementDown,onMoveElementUp:this.props.onMoveElementUp,onReplaceFileInDocumentElement:this.props.onReplaceFileInDocumentElement,onSetDocumentTheme:this.props.onSetDocumentTheme,onToggleAddComponentDialog:this.props.onToggleAddComponentDialog})),c('React').createElement(h,null,c('React').createElement(c('RichMediaPreview.react'),{currentEditingElementIndex:this.props.currentEditingElementIndex,documentElements:this.props.documentElements,documentTheme:this.props.documentTheme,editState:this.props.editState,isPublished:this.props.isPublished,previewFailed:this.props.previewFailed,sendingPreview:this.props.sendingPreview,onMobilePreview:this.props.onMobilePreview,onSharePreview:this.props.onSharePreview})))));},_documentHasError:function(){var m=this.props.documentElements;for(var n=0;n<m.length;++n){var o=c('RichMediaElementUtil').validateElement(m[n]);if(!o.isValid)return true;}return false;}});f.exports=l;},null);
__d("XCanvasMobilePreviewPageRoleTypeaheadController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ads\/canvas_preview\/typeahead\/",{page_id:{type:"String",required:true},value:{type:"String",defaultValue:""}});},null);
__d("XMobileCanvasAdPreviewController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ads\/canvas_preview\/",{node_id:{type:"String",required:true},page_id:{type:"String",required:true},user_ids:{type:"IntVector"},is_id_encoded:{type:"Bool",defaultValue:false},__asyncDialog:{type:"Int"}});},null);
__d('RichMediaMobilePreviewDialog.react',['cx','fbt','AsyncRequest','LayerFadeOnHide','LayerHideOnEscape','React','RichMediaEditorActions','SearchableEntry','XCanvasMobilePreviewPageRoleTypeaheadController','XMobileCanvasAdPreviewController','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialogTitle.react','XUITokenizer.react','WebAsyncSearchSource','emptyFunction'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'RichMediaMobilePreviewDialog',propTypes:{canvasID:j.string.isRequired,pageID:j.string.isRequired},getInitialState:function(){return {searchSource:this._createSearchSource(),shareUserID:0,entries:[]};},_createSearchSource:function(){var l=c('XCanvasMobilePreviewPageRoleTypeaheadController').getURIBuilder().setString('page_id',this.props.pageID);return new (c('WebAsyncSearchSource'))({queryRequests:[{uri:l.getURI()}]});},render:function(){return (c('React').createElement(c('XUIDialog.react'),{behaviors:{LayerHideOnEscape:c('LayerHideOnEscape'),LayerFadeOnHide:c('LayerFadeOnHide')},shown:true,width:450},c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:true},i._("Preview on device")),c('React').createElement(c('XUIDialogBody.react'),null,c('React').createElement('div',{style:{marginBottom:'10px'}},i._("Send canvas preview to device of:")),c('React').createElement(c('XUITokenizer.react'),{entries:this.state.entries,focusedOnInit:true,placeholder:'Search for Page Admins',searchSource:this.state.searchSource,onAddEntryAttempt:this._onAddEntryAttempt,onRemoveEntryAttempt:this._onRemoveEntryAttempt})),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',label:i._("Cancel"),onClick:c('emptyFunction')}),c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',className:"_4jy1",disabled:this.state.entries.length===0,label:i._("Send"),onClick:this._onSend}))));},_onAddEntryAttempt:function(l){this.setState({entries:this.state.entries.concat(l)});},_onRemoveEntryAttempt:function(l){var m=this.state.entries.indexOf(l),n=Array.from(this.state.entries);n.splice(m,1);this.setState({entries:n});},_onSend:function(){var l=this.state.entries.map(function(o){return parseInt(o.getUniqueID(),10);}),m=c('XMobileCanvasAdPreviewController').getURIBuilder().setString('node_id',this.props.canvasID).setString('page_id',this.props.pageID).setIntVector('user_ids',l).setBool('is_id_encoded',false).getURI();c('RichMediaEditorActions').setSendingPreview(true);var n=new (c('AsyncRequest'))().setURI(m).setHandler(function(o){return c('RichMediaEditorActions').setSendingPreview(false);});n.send();}});f.exports=k;},null);
__d('AdsCanvasEditorContainer.react',['AdsCanvasEditor.react','AsyncRequest','FluxContainer','FluxStore','React','RichMediaEditorActions','RichMediaEditorStore','RichMediaMobilePreviewDialog.react','XMobileCanvasAdPreviewController','ReactDOM','DOM','AdsCanvasEditorEnums','emptyFunction'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('AdsCanvasEditorEnums').SaveStateEnum;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.$AdsCanvasEditorContainer1=this.$AdsCanvasEditorContainer1.bind(this);this.$AdsCanvasEditorContainer2=this.$AdsCanvasEditorContainer2.bind(this);this.$AdsCanvasEditorContainer3=this.$AdsCanvasEditorContainer3.bind(this);this.$AdsCanvasEditorContainer4=this.$AdsCanvasEditorContainer4.bind(this);this.$AdsCanvasEditorContainer5=this.$AdsCanvasEditorContainer5.bind(this);this.$AdsCanvasEditorContainer6=this.$AdsCanvasEditorContainer6.bind(this);this.$AdsCanvasEditorContainer7=this.$AdsCanvasEditorContainer7.bind(this);this.$AdsCanvasEditorContainer8=this.$AdsCanvasEditorContainer8.bind(this);this.$AdsCanvasEditorContainer9=this.$AdsCanvasEditorContainer9.bind(this);this.$AdsCanvasEditorContainer10=this.$AdsCanvasEditorContainer10.bind(this);this.$AdsCanvasEditorContainer11=this.$AdsCanvasEditorContainer11.bind(this);this.$AdsCanvasEditorContainer12=this.$AdsCanvasEditorContainer12.bind(this);if(l.adsCanvasID){c('RichMediaEditorActions').loadDocument(l.adsCanvasName,l.adsCanvasBackgroundColor,l.adsCanvasElementPayload);}else c('RichMediaEditorActions').createDefaultDocument();}k.getStores=function(){return [c('RichMediaEditorStore')];};k.calculateState=function(){return {currentEditingElementIndex:c('RichMediaEditorStore').getCurrentEditingElementIndex(),documentName:c('RichMediaEditorStore').getDocumentName(),documentTheme:c('RichMediaEditorStore').getDocumentTheme(),documentEditState:c('RichMediaEditorStore').getDocumentEditState(),documentElements:c('RichMediaEditorStore').getDocumentElements(),previewFailed:c('RichMediaEditorStore').getPreviewFailed(),saveFailed:c('RichMediaEditorStore').getSaveFailed(),sendingPreview:c('RichMediaEditorStore').getSendingPreview()};};k.prototype.render=function(){return (c('React').createElement(c('AdsCanvasEditor.react'),{businessID:this.props.businessID,canAddProductSet:this.props.canAddProductSet,createPostEnabled:this.props.createPostEnabled,currentEditingElementIndex:this.state.currentEditingElementIndex,documentElements:this.state.documentElements,documentName:this.state.documentName,documentTheme:this.state.documentTheme,documentURL:this.props.adsCanvasURL,editState:this.state.documentEditState,isPublished:this.props.adsCanvasIsPublished,pageID:this.props.pageID,previewFailed:this.state.previewFailed,renderPreviewOnly:this.props.renderPreviewOnly,saveFailed:this.state.saveFailed,sendingPreview:this.state.sendingPreview,onAddDocumentElement:this.$AdsCanvasEditorContainer8,onAddFilesToDocumentElement:this.$AdsCanvasEditorContainer13,onCreatePost:this.props.onCreatePost,onDeleteElement:this.$AdsCanvasEditorContainer12,onDuplicateDocument:this.$AdsCanvasEditorContainer1,onEditDocumentElement:this.$AdsCanvasEditorContainer9,onMobilePreview:this.$AdsCanvasEditorContainer4,onSharePreview:this.$AdsCanvasEditorContainer5,onMoveElementDown:this.$AdsCanvasEditorContainer11,onMoveElementUp:this.$AdsCanvasEditorContainer10,onPublishDocument:this.$AdsCanvasEditorContainer3,onReplaceFileInDocumentElement:this.$AdsCanvasEditorContainer14,onSaveDocument:this.$AdsCanvasEditorContainer2,onSetDocumentName:this.$AdsCanvasEditorContainer6,onSetDocumentTheme:this.$AdsCanvasEditorContainer7,onShownDocumentURLDialog:this.$AdsCanvasEditorContainer15,onToggleAddComponentDialog:this.$AdsCanvasEditorContainer16}));};k.prototype.$AdsCanvasEditorContainer1=function(){this.props.onSaveCanvas(null,this.state.documentName+' Copy',false,this.state.documentTheme,this.props.adsCanvasElementPayload,c('emptyFunction'),function(){},function(l){if(this.props.onDuplicateReload)this.props.onDuplicateReload(this.props.dialogID,l);}.bind(this));};k.prototype.$AdsCanvasEditorContainer2=function(l,m,n){c('RichMediaEditorActions').setDocumentEditState(j.SAVING);this.props.onSaveCanvas(this.props.adsCanvasID,l,false,m,JSON.stringify(n),function(){c('RichMediaEditorActions').setSaveFailed(false);},function(){c('RichMediaEditorActions').setSaveFailed(true);c('RichMediaEditorActions').setDocumentEditState(j.UNSAVED);},function(){c('RichMediaEditorActions').setDocumentEditState(j.SAVED);});};k.prototype.$AdsCanvasEditorContainer3=function(){c('RichMediaEditorActions').setDocumentEditState(j.SAVING);this.props.onPublishCanvas(this.props.adsCanvasID,function(){c('RichMediaEditorActions').setSaveFailed(false);},function(){c('RichMediaEditorActions').setSaveFailed(true);c('RichMediaEditorActions').setDocumentEditState(j.UNSAVED);},function(){c('RichMediaEditorActions').setDocumentEditState(j.SAVED);});};k.prototype.$AdsCanvasEditorContainer4=function(){if(!this.props.adsCanvasID){c('RichMediaEditorActions').setPreviewFailed(true);return;}var l=c('XMobileCanvasAdPreviewController').getURIBuilder().setString('node_id',this.props.adsCanvasID).setString('page_id',this.props.pageID).setBool('is_id_encoded',false).getURI();c('RichMediaEditorActions').setSendingPreview(true);var m=new (c('AsyncRequest'))().setURI(l).setHandler(function(n){return c('RichMediaEditorActions').setSendingPreview(false);});m.send();};k.prototype.$AdsCanvasEditorContainer5=function(){if(!this.props.adsCanvasID){c('RichMediaEditorActions').setPreviewFailed(true);return;}c('ReactDOM').render(c('React').createElement(c('RichMediaMobilePreviewDialog.react'),{canvasID:this.props.adsCanvasID,pageID:this.props.pageID}),c('DOM').create('div'));};k.prototype.$AdsCanvasEditorContainer6=function(l){c('RichMediaEditorActions').setDocumentName(l);};k.prototype.$AdsCanvasEditorContainer7=function(l){c('RichMediaEditorActions').setDocumentTheme(l);};k.prototype.$AdsCanvasEditorContainer8=function(l){c('RichMediaEditorActions').addDocumentElement(l);};k.prototype.$AdsCanvasEditorContainer13=function(l,m,n){c('RichMediaEditorActions').addFilesToDocumentElement(l,m,n);};k.prototype.$AdsCanvasEditorContainer14=function(l,m,n,o){c('RichMediaEditorActions').replaceFileInDocumentElement(l,m,n,o);};k.prototype.$AdsCanvasEditorContainer9=function(l){c('RichMediaEditorActions').editDocumentElement(l);};k.prototype.$AdsCanvasEditorContainer10=function(l){c('RichMediaEditorActions').moveElementUp(l);};k.prototype.$AdsCanvasEditorContainer11=function(l){c('RichMediaEditorActions').moveElementDown(l);};k.prototype.$AdsCanvasEditorContainer12=function(l){c('RichMediaEditorActions').deleteElement(l);};k.prototype.$AdsCanvasEditorContainer15=function(){c('RichMediaEditorActions').setDocumentURLDialogShown(true);};k.prototype.$AdsCanvasEditorContainer16=function(l){c('RichMediaEditorActions').setAddComponentDialogShown(l);};f.exports=c('FluxContainer').create(k);},null);
__d('AdsCanvasBuilderDispatcher',['ReactDispatcher_DEPRECATED'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=new (c('ReactDispatcher_DEPRECATED'))();},null);
__d('AdsCanvasButtons.react',['cx','ix','xuiglyph','Image.react','React','XUIButton.react','XUIButtonGroup.react'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('React').createClass({displayName:'AdsCanvasButtons',propTypes:{canvas:k.object,disabled:k.bool,onClick:k.func.isRequired,onClickCreate:k.func,onClickPreview:k.func},render:function(){var m=c('React').createElement(c('XUIButton.react'),{className:"_44jg",disabled:this.props.disabled,image:c('React').createElement(c('Image.react'),{src:j({name:'plus',shade:'dark',size:'small'})}),onClick:this._onClickCreateButton}),n=null;if(this.props.canvas)n=c('React').createElement(c('XUIButton.react'),{className:"_44jg",disabled:this.props.disabled,image:c('React').createElement(c('Image.react'),{src:i('/images/ads/campaign_manager/overviews/previeweye.png')}),onClick:this._onClickEditButton});return (c('React').createElement(c('XUIButtonGroup.react'),{className:"_44jh"},n,m));},_onClickCreateButton:function(event){event.stopPropagation();this.props.onClickCreate&&this.props.onClickCreate();this.props.onClick('newCanvasDialog');},_onClickEditButton:function(event){event.stopPropagation();this.props.onClickPreview&&this.props.onClickPreview();if(this.props.canvas)this.props.onClick(this.props.canvas.id);}});f.exports=l;},null);
__d('AdsCanvasCloseConfirmDialog.react',['cx','fbt','LayerFadeOnHide','LayerHideOnEscape','React','XUIDialog.react','XUIDialogBody.react','XUIDialogFooter.react','XUIDialogButton.react','XUIDialogTitle.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'AdsCanvasCloseConfirmDialog',propTypes:{dialogID:j.string,onCancel:j.func.isRequired,onConfirm:j.func.isRequired},render:function(){return (c('React').createElement(c('XUIDialog.react'),{behaviors:{LayerHideOnEscape:c('LayerHideOnEscape'),LayerFadeOnHide:c('LayerFadeOnHide')},shown:true,width:450},c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:true},i._("Unsaved Changes")),c('React').createElement(c('XUIDialogBody.react'),null,i._("Do you want to discard unsaved changes?")),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',label:i._("Cancel"),onClick:this.props.onCancel}),c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',className:"_4jy1",label:i._("Confirm"),onClick:this._onConfirm}))));},_onConfirm:function(){this.props.onConfirm(this.props.dialogID);}});f.exports=k;},null);
__d('CanvasDataUtils',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={getFieldsForPagesCanvasList:function(){return ['id','name','background_color','is_published','update_time','element_payload','canvas_link','last_editor'];}};f.exports=h;},null);
__d("XPagesComposerDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/composer\/dialog\/",{page_id:{type:"Int",required:true},entry_point:{type:"String",required:true},open_composer:{type:"Enum",enumType:1},preview_url:{type:"String"},__asyncDialog:{type:"Int"}});},null);
__d('RichMediaCreatePostUtil',['ActorURI','AsyncRequest','ComposerEntryPointRef','PageContentTabLoadingDialog','XPagesComposerDialogController'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={popupPageComposerDialogWithPreview:function(i,j){c('PageContentTabLoadingDialog').show();var k=c('XPagesComposerDialogController').getURIBuilder().setInt('page_id',i).setString('entry_point',c('ComposerEntryPointRef').PAGE_CONTENT_TAB_CANVAS).setString('preview_url',j).getURI(),l=c('ActorURI').create(k,i);new (c('AsyncRequest'))().setURI(l).setHandler(function(){c('PageContentTabLoadingDialog').hide();}).send();}};f.exports=h;},null);
__d('AdsCanvasComposerDialog.react',['fbt','AdsCanvasEditorContainer.react','CanvasCreationEvent','CanvasCreationWaterfallTypedLogger','CanvasDataUtils','GraphAPI','LayerFadeOnHide','React','XUIDialog.react','XUIDialogTitle.react','RichMediaCreatePostUtil'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'AdsCanvasComposerDialog',propTypes:{accessToken:i.string.isRequired,canAddProductSet:i.bool,canvas:i.shape({background_color:i.string,canvas_link:i.string,element_payload:i.string,id:i.string.isRequired,is_published:i.bool.isRequired,name:i.string}),createPostEnabled:i.bool,dialogID:i.string.isRequired,dialogShown:i.bool.isRequired,editState:i.number.isRequired,pageID:i.string.isRequired,source:i.string.isRequired,businessID:i.string,onBeforeHideDialog:i.func.isRequired,onCloseReset:i.func,onConfirmClose:i.func.isRequired,onDuplicateReload:i.func,onReloadCanvas:i.func.isRequired,onSaveCanvasSuccess:i.func.isRequired,onToggle:i.func.isRequired},componentDidUpdate:function(){if(this.refs.dialog)this.refs.dialog.layer.subscribe('beforehide',this._onBeforeHide);},render:function(){if(!this.props.dialogShown)return null;var k=null;if(this.props.canvas){k=c('React').createElement(c('AdsCanvasEditorContainer.react'),{accessToken:this.props.accessToken,adsCanvasBackgroundColor:this.props.canvas.background_color,adsCanvasID:this.props.canvas.id,adsCanvasName:this.props.canvas.name,adsCanvasElementPayload:this.props.canvas.element_payload,adsCanvasIsPublished:this.props.canvas.is_published,adsCanvasURL:this.props.canvas.canvas_link,businessID:this.props.businessID,canAddProductSet:this.props.canAddProductSet,createPostEnabled:this.props.createPostEnabled,dialogID:this.props.dialogID,pageID:this.props.pageID,onCreatePost:this._onClickCreatePost,onDuplicateReload:this.props.onDuplicateReload,onSaveCanvas:this._saveCanvas,onPublishCanvas:this._publishCanvas,renderPreviewOnly:false});}else k=c('React').createElement(c('AdsCanvasEditorContainer.react'),{adsCanvasIsPublished:false,adsCanvasURL:'',businessID:this.props.businessID,dialogID:this.props.dialogID,canAddProductSet:this.props.canAddProductSet,pageID:this.props.pageID,onSaveCanvas:this._saveCanvas,onPublishCanvas:this._publishCanvas,renderPreviewOnly:false});return (c('React').createElement(c('XUIDialog.react'),{behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},causalElementRef:function(){return this.refs.button;}.bind(this),hideOnEscape:false,layerHideOnBlur:false,onToggle:this._onToggle,shown:this.props.dialogShown,width:1080,ref:'dialog'},c('React').createElement(c('XUIDialogTitle.react'),null,h._("Canvas Builder")),k));},_onToggle:function(k){return this.props.onToggle(this.props.dialogID,k);},_onBeforeHide:function(){return this.props.onBeforeHideDialog(this.props.dialogID,this.props.canvas,this.props.editState,this.props.onCloseReset,this.props.onConfirmClose);},_saveCanvas:function(k,l,m,n,o,p,q,r){if(k){c('GraphAPI')('2.5').object('rich_media_document',k).post({access_token:this.props.accessToken,name:l,background_color:n,is_published:m,elements:o,source:this.props.source}).done(function(s){if(k)this._onSaveSuccess(k,r,false);if(p)p(s);}.bind(this),function(s){if(q){q(s);new (c('CanvasCreationWaterfallTypedLogger'))().setEventName(c('CanvasCreationEvent').SAVE_FAILURE).setPageID(this.props.pageID).setErrorCode(s.code).setElementPayload(o).setCanvasID(k).log();}}.bind(this));}else c('GraphAPI')('2.5').object('page',this.props.pageID).edge('rich_media_documents').post({access_token:this.props.accessToken,owner_id:this.props.pageID,name:l,background_color:n,is_published:m,elements:o,source:this.props.source}).done(function(s){if(s.id)this._onSaveSuccess(s.id,r,false);if(p)p(s);}.bind(this),function(s){if(q){q(s);new (c('CanvasCreationWaterfallTypedLogger'))().setEventName(c('CanvasCreationEvent').SAVE_FAILURE).setPageID(this.props.pageID).setErrorCode(s.code).setElementPayload(o).log();}}.bind(this));},_onSaveSuccess:function(k,l,m){c('GraphAPI')('2.5').object('rich_media_document',k).get({access_token:this.props.accessToken,fields:c('CanvasDataUtils').getFieldsForPagesCanvasList()}).done(function(n){this.props.onSaveCanvasSuccess(this.props.canvas,this.props.pageID,n,m);if(l)l(n);this.props.onReloadCanvas(this.props.dialogID,n);}.bind(this));},_publishCanvas:function(k,l,m,n){if(k)c('GraphAPI')('2.5').object('rich_media_document',k).post({access_token:this.props.accessToken,is_published:true,source:this.props.source}).done(function(o){if(k)this._onSaveSuccess(k,n,true);if(l)l(o);}.bind(this),function(o){if(m){m(o);new (c('CanvasCreationWaterfallTypedLogger'))().setEventName(c('CanvasCreationEvent').PUBLISH_FAILURE).setPageID(this.props.pageID).setErrorCode(o.code).setCanvasID(k).log();}}.bind(this));},_onClickCreatePost:function(){if(this.props.canvas&&this.props.canvas.canvas_link)c('RichMediaCreatePostUtil').popupPageComposerDialogWithPreview(this.props.pageID,this.props.canvas.canvas_link);}});f.exports=j;},null);
__d('AdsCanvasComposerDialogStore',['FluxStore','RichMediaEditorActionTypes','RichMediaEditorDispatcher'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('RichMediaEditorDispatcher'));this.$AdsCanvasComposerDialogStore1={};this.$AdsCanvasComposerDialogStore2={};}j.prototype.__onDispatch=function(k){var l=k.data;switch(k.type){case c('RichMediaEditorActionTypes').SET_UNPUBLISHED_CANVAS:this.$AdsCanvasComposerDialogStore4=l.unpublishedCanvas;this.__emitChange();break;case c('RichMediaEditorActionTypes').RESET_UNPUBLISHED_CANVAS:this.$AdsCanvasComposerDialogStore4=null;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_DIALOG_SHOWN:this.$AdsCanvasComposerDialogStore1[l.dialogID]=l.dialogShown;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_DIALOG_CANVAS:this.$AdsCanvasComposerDialogStore2[l.dialogID]=l.canvas;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_SELECTED_CANVAS:this.$AdsCanvasComposerDialogStore3=l.selectedCanvas;this.__emitChange();break;}};j.prototype.getDialogShown=function(k){if(k in this.$AdsCanvasComposerDialogStore1){return this.$AdsCanvasComposerDialogStore1[k];}else return false;};j.prototype.getDialogCanvas=function(k){if(k in this.$AdsCanvasComposerDialogStore2){return this.$AdsCanvasComposerDialogStore2[k];}else return null;};j.prototype.getSelectedCanvas=function(){return this.$AdsCanvasComposerDialogStore3;};j.prototype.getUnpublishedCanvas=function(){return this.$AdsCanvasComposerDialogStore4;};f.exports=new j(c('RichMediaEditorDispatcher'));},null);
__d('AdsUnpublishedCanvasCloseConfirmDialog.react',['cx','fbt','LayerFadeOnHide','LayerHideOnEscape','React','XUIDialog.react','XUIDialogBody.react','XUIDialogFooter.react','XUIDialogButton.react','XUIDialogTitle.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'AdsUnpublishedCanvasCloseConfirmDialog',propTypes:{dialogID:j.string.isRequired,onCancel:j.func.isRequired,onCloseReset:j.func.isRequired,onConfirm:j.func.isRequired},render:function(){return (c('React').createElement(c('XUIDialog.react'),{behaviors:{LayerHideOnEscape:c('LayerHideOnEscape'),LayerFadeOnHide:c('LayerFadeOnHide')},shown:true,width:450},c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:true},i._("Unpublished Canvas")),c('React').createElement(c('XUIDialogBody.react'),null,i._("You won't be able to use this Canvas in an ad until you publish it. You can still access a saved draft in Pages -> Publishing Tools -> Canvas. Do you want to close this draft without publishing it?")),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',label:i._("Cancel"),onClick:this.props.onCancel}),c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',className:"_4jy1",label:i._("Confirm"),onClick:this._onConfirm}))));},_onConfirm:function(){this.props.onCloseReset();this.props.onConfirm(this.props.dialogID);}});f.exports=k;},null);
__d('AdsCanvasButtonsContainer.react',['AdsCanvasButtons.react','AdsCanvasCloseConfirmDialog.react','AdsCanvasComposerDialog.react','AdsCanvasComposerDialogStore','AdsUnpublishedCanvasCloseConfirmDialog.react','DOM','FluxContainer','FluxStore','React','ReactDOM','RichMediaEditorActions','RichMediaEditorStore','emptyFunction','AdsCanvasEditorEnums'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('AdsCanvasEditorEnums').SaveStateEnum;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.getStores=function(){return [c('AdsCanvasComposerDialogStore'),c('RichMediaEditorStore')];};k.calculateState=function(l,m){var n=c('AdsCanvasComposerDialogStore').getDialogShown('newCanvasDialog'),o=null,p=false;if(m.canvasID)p=c('AdsCanvasComposerDialogStore').getDialogShown(m.canvasID);if(m.canvasID)o=c('AdsCanvasComposerDialogStore').getDialogCanvas(m.canvasID);return {canvas:o,createDialogShown:n,editDialogShown:p,editState:c('RichMediaEditorStore').getDocumentEditState()};};k.prototype.render=function(){var l=this.state.canvas,m=l?c('React').createElement(c('AdsCanvasButtons.react'),{canvas:l,disabled:!!this.props.disabled,onClick:this.$AdsCanvasButtonsContainer1,onClickCreate:this.props.onClickCreate||c('emptyFunction'),onClickPreview:this.props.onClickPreview||c('emptyFunction')}):c('React').createElement(c('AdsCanvasButtons.react'),{disabled:!!this.props.disabled,onClick:this.$AdsCanvasButtonsContainer1,onClickCreate:this.props.onClickCreate||c('emptyFunction')}),n=c('React').createElement(c('AdsCanvasComposerDialog.react'),{accessToken:this.props.accessToken,businessID:this.props.businessID,canAddProductSet:this.props.canAddProductSet,createPostEnabled:false,dialogID:'newCanvasDialog',dialogShown:this.state.createDialogShown,editState:this.state.editState,pageID:this.props.pageID,source:this.props.source,onBeforeHideDialog:this.$AdsCanvasButtonsContainer2,onCloseReset:this.props.onCloseReset,onConfirmClose:this.$AdsCanvasButtonsContainer3,onDuplicateReload:this.props.onDuplicateReload,onReloadCanvas:this.$AdsCanvasButtonsContainer4,onSaveCanvasSuccess:this.props.onSaveCanvasSuccess,onToggle:this.$AdsCanvasButtonsContainer5}),o=null;if(l)o=c('React').createElement(c('AdsCanvasComposerDialog.react'),{accessToken:this.props.accessToken,businessID:this.props.businessID,canAddProductSet:this.props.canAddProductSet,canvas:l,createPostEnabled:false,dialogID:l.id,dialogShown:this.state.editDialogShown,editState:this.state.editState,pageID:this.props.pageID,source:this.props.source,onBeforeHideDialog:this.$AdsCanvasButtonsContainer2,onCloseReset:this.props.onCloseReset,onConfirmClose:this.$AdsCanvasButtonsContainer3,onDuplicateReload:this.props.onDuplicateReload,onReloadCanvas:this.$AdsCanvasButtonsContainer4,onSaveCanvasSuccess:this.props.onSaveCanvasSuccess,onToggle:this.$AdsCanvasButtonsContainer5});return (c('React').createElement('div',null,m,n,o));};k.prototype.$AdsCanvasButtonsContainer2=function(l,m,n,o,p){if(m&&m.is_published){return true;}else if(n===j.SAVED){c('ReactDOM').render(c('React').createElement(c('AdsUnpublishedCanvasCloseConfirmDialog.react'),{dialogID:l,onCancel:c('emptyFunction'),onCloseReset:o,onConfirm:p}),c('DOM').create('div'));return false;}else{c('ReactDOM').render(c('React').createElement(c('AdsCanvasCloseConfirmDialog.react'),{dialogID:l,onCancel:c('emptyFunction'),onConfirm:p}),c('DOM').create('div'));return false;}};k.prototype.$AdsCanvasButtonsContainer1=function(l){c('RichMediaEditorActions').setDialogShown(l,true);};k.prototype.$AdsCanvasButtonsContainer3=function(l){c('RichMediaEditorActions').setDialogShown(l,false);};k.prototype.$AdsCanvasButtonsContainer5=function(l,m){c('RichMediaEditorActions').setDialogShown(l,m);};k.prototype.$AdsCanvasButtonsContainer4=function(l,m){c('RichMediaEditorActions').setDialogCanvas(m.id,m);if(l!==m.id){c('RichMediaEditorActions').setDialogShown(l,false);c('RichMediaEditorActions').setDialogShown(m.id,true);}};function k(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(k,{withProps:true});},null);
__d('AdsCanvasTypeaheadActionTypes',['ImmutableObject','keyMirrorRecursive'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=new (c('ImmutableObject'))(c('keyMirrorRecursive')({DOC_NAME:{LOADED:'',LOAD_ERROR:''}},'AdsCanvasTypeahead'));f.exports=h;},null);
__d('AdsCanvasTypeaheadActions',['AdsCanvasBuilderDispatcher','AdsCanvasTypeaheadActionTypes'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={docNameResultsLoaded:function(i,j,k){k=k.filter(function(l){return l.is_published===true;});c('AdsCanvasBuilderDispatcher').dispatch({pageID:i,filter:j,results:k,type:c('AdsCanvasTypeaheadActionTypes').DOC_NAME.LOADED});},docNameLoadError:function(i,j,k){c('AdsCanvasBuilderDispatcher').dispatch({pageID:i,error:k,filter:j,type:c('AdsCanvasTypeaheadActionTypes').DOC_NAME.LOAD_ERROR});}};f.exports=h;},null);
__d('AdsCanvasTypeaheadDataManager',['AdsCanvasConstants','AdsCanvasTypeaheadActions','AdsGenericFilterSet','GraphAPI','CanvasDataUtils','GraphSort'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();h.prototype.searchCanvasDoc=function(i,j,k){c('GraphAPI')('2.5').object('page',j).edge('rich_media_documents').get({access_token:i,fields:c('CanvasDataUtils').getFieldsForPagesCanvasList(),filtering:k.toAPI(),limit:c('AdsCanvasConstants').TYPE_AHEAD_LIMIT,sort:'name'+c('GraphSort').DESC,summary:true}).done(function(l){return c('AdsCanvasTypeaheadActions').docNameResultsLoaded(j,k,l.data);},function(l){return c('AdsCanvasTypeaheadActions').docNameLoadError(j,k,l);});};function h(){}f.exports=new h();},null);
__d('AdsCanvasTypeaheadSearchableEntry',['SearchableEntry'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={createForCanvasDoc:function(i){var j='Canvas Doc',k={background_color:i.background_color,id:i.id,name:i.name,element_payload:i.element_payload,is_published:i.is_published,canvas_link:i.canvas_link};return new (c('SearchableEntry'))({auxiliaryData:k,subtitle:j,title:i.name,uniqueID:i.id});}};f.exports=h;},null);
__d('LFUCache',['Cache','DateConsts'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=15,k=1;h=babelHelpers.inherits(l,c('Cache'));i=h&&h.prototype;function l(m,n){i.constructor.call(this);this.$LFUCache2=m&&m>0?m:j;this.$LFUCache3=n&&n>0?n:k;this.$LFUCache4();}l.prototype.$LFUCache4=function(){clearTimeout(this.$LFUCache1);this.$LFUCache1=setTimeout(this.purge.bind(this),this.$LFUCache2*c('DateConsts').SEC_PER_MIN*c('DateConsts').MS_PER_SEC);};l.prototype.destroy=function(){clearTimeout(this.$LFUCache1);};l.prototype.get=function(m,n){if(this.has(m))this.$LFUCache5(m);return i.get.call(this,m,n);};l.prototype.set=function(m,n,o,p){var q=this.has(m),r=i.set.call(this,m,n,o,p);if(r)if(q){this.$LFUCache5(m);}else this.$LFUCache6(m,this.$LFUCache3);return r;};l.prototype.purge=function(){var m=Array.from(this.__keys());m.forEach(function(n){if(this.$LFUCache7(n)<this.$LFUCache3){this['delete'](n);}else this.$LFUCache6(n,0);}.bind(this));this.$LFUCache4();};l.prototype.$LFUCache5=function(m){var n=this.$LFUCache7(m)+1;this.$LFUCache6(m,n);return n;};l.prototype.$LFUCache7=function(m){var n=this.__getRaw(m);return n&&n.$LFUCache8?n.$LFUCache8:0;};l.prototype.$LFUCache6=function(m,n){var o=this.__getRaw(m);if(!o)o=this.__getNewRawObject();o.$LFUCache8=n;this.__setRaw(m,o);return true;};f.exports=l;},null);
__d('AdsCanvasTypeaheadStore',['AdsCanvasBuilderDispatcher','AdsCanvasTypeaheadActionTypes','AdsCanvasTypeaheadDataManager','AdsCanvasTypeaheadSearchableEntry','AdsGenericFilter','AdsGenericFilterField','AdsGenericFilterFieldType','AdsGenericFilterOperator','AdsGenericFilterSet','FluxStore','LoadObject','LFUCache','ReactDispatcher_DEPRECATED','SearchableEntry'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=new (c('AdsGenericFilterField'))('name',c('AdsGenericFilterFieldType').STRING);h=babelHelpers.inherits(k,c('FluxStore'));i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.$AdsCanvasTypeaheadStore1=new (c('LFUCache'))();}k.prototype.__onDispatch=function(l){switch(l.type){case c('AdsCanvasTypeaheadActionTypes').DOC_NAME.LOADED:return this.__handleResultsLoaded(l.pageID,l.filter,l.results,function(m){return c('AdsCanvasTypeaheadSearchableEntry').createForCanvasDoc(m);});case c('AdsCanvasTypeaheadActionTypes').DOC_NAME.LOAD_ERROR:return this.__handleError(l.pageID,l.filter,l.error);}};k.prototype.searchDocByName=function(l,m,n){var o=new (c('AdsGenericFilterSet'))([new (c('AdsGenericFilter'))(j,c('AdsGenericFilterOperator').CONTAIN,l||'')]),p=this.$AdsCanvasTypeaheadStore2(m,o),q=this.$AdsCanvasTypeaheadStore1.get(p);if(!q){q=c('LoadObject').loading();this.$AdsCanvasTypeaheadStore1.set(p,q);c('AdsCanvasTypeaheadDataManager').searchCanvasDoc(n,m,o);}return q;};k.prototype.__handleError=function(l,m,n){var o=this.$AdsCanvasTypeaheadStore2(l,m);this.$AdsCanvasTypeaheadStore1.set(o,c('LoadObject').empty().setError(n));};k.prototype.__handleResultsLoaded=function(l,m,n,o){var p=this.$AdsCanvasTypeaheadStore2(l,m),q=n.map(o,this);this.$AdsCanvasTypeaheadStore1.set(p,c('LoadObject').empty().setValue(q));this.__emitChange();};k.prototype.$AdsCanvasTypeaheadStore2=function(l,m){return l+'-'+m.toString();};f.exports=new k(c('AdsCanvasBuilderDispatcher'));},null);
__d('promiseStoreGet',['Promise','Map'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(j,k,l,m){var n=l||function(p){return p.isDone()&&p.hasValue();},o=m||function(p){return p.isDone()&&p.hasError();};return new (c('Promise'))(function(p,q){var r=j.addListener(s);s();function s(){var t=k();if(o(t)){q(t.error||t.value);r.remove();}else if(n(t)){p(t.value);r.remove();}}});}h.all=function(j,k,l,m){var n=l||function(p){return p.isDone()&&p.hasValue();},o=m||function(p){return p.isDone()&&p.hasError();};return new (c('Promise'))(function(p,q){var r=j.addListener(s);s();function s(){var t=true,u=k();for(var v=u,w=Array.isArray(v),x=0,v=w?v:v[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var y;if(w){if(x>=v.length)break;y=v[x++];}else{x=v.next();if(x.done)break;y=x.value;}var z=y,aa=z[1];if(o(aa)){q(aa.error||aa.value);r.remove();return;}t=t&&n(aa);}if(t){p(i(u));r.remove();}}});};function i(j){var k=new (c('Map'))();for(var l=j,m=Array.isArray(l),n=0,l=m?l:l[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var o;if(m){if(n>=l.length)break;o=l[n++];}else{n=l.next();if(n.done)break;o=n.value;}var p=o,q=p[0],r=p[1];k.set(q,r.value);}return k;}f.exports=h;},null);
__d('AdsFluxStoreSearchSource',['AbstractAsyncSearchSource','promiseStoreGet'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();function j(m,n,o,p){c('promiseStoreGet')(n.store,function(){return n.getData(m.value);}).done(function(q){return o(q||[]);},function(q){return p(q);});}function k(m){return m;}h=babelHelpers.inherits(l,c('AbstractAsyncSearchSource'));i=h&&h.prototype;function l(m){if(!m.bootstrapRequests)m.bootstrapRequests=m.queryRequests;i.constructor.call(this,m,j,k);}f.exports=l;},null);
__d('AdsCanvasSearchSource',['AdsCanvasTypeaheadStore','AdsFluxStoreSearchSource'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('AdsFluxStoreSearchSource'));i=h&&h.prototype;function j(k){var l=babelHelpers['extends']({getAllForEmptyQuery:true},k,{queryRequests:[{store:c('AdsCanvasTypeaheadStore'),getData:function(m){return c('AdsCanvasTypeaheadStore').searchDocByName(m,k.pageID,k.accessToken);}}]});i.constructor.call(this,l);}f.exports=j;},null);
__d('AdsCanvasTypeahead.react',['cx','fbt','AbstractSearchSource','AdsCanvasButtonsContainer.react','AdsLabeledField.react','ContextualLayerHideOnScrollOut','ContextualLayerUpdateOnScroll','Grid.react','Link.react','React','SearchableEntry','XUITypeahead.react','XUITypeaheadView.react','emptyFunction'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('Grid.react').GridItem;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n){k.constructor.call(this,n);this.$AdsCanvasTypeahead1=this.$AdsCanvasTypeahead1.bind(this);this.$AdsCanvasTypeahead2=this.$AdsCanvasTypeahead2.bind(this);this.$AdsCanvasTypeahead3=this.$AdsCanvasTypeahead3.bind(this);this.$AdsCanvasTypeahead4=this.$AdsCanvasTypeahead4.bind(this);this.$AdsCanvasTypeahead5=this.$AdsCanvasTypeahead5.bind(this);this.$AdsCanvasTypeahead6=this.$AdsCanvasTypeahead6.bind(this);this.$AdsCanvasTypeahead7=this.$AdsCanvasTypeahead7.bind(this);this.state={queryString:this.$AdsCanvasTypeahead3(n.selectedEntry)};}m.prototype.componentWillReceiveProps=function(n){if(n.selectedEntry!==this.props.selectedEntry)this.$AdsCanvasTypeahead4(n.selectedEntry);};m.prototype.render=function(){return (c('React').createElement('div',null,this.$AdsCanvasTypeahead8(),c('React').createElement(c('Grid.react'),{className:"_39gb",cols:2},c('React').createElement(l,{className:"_39gc"},c('React').createElement(c('XUITypeahead.react'),{autoHighlight:this.$AdsCanvasTypeahead1(),disabled:this.props.disabled,focusedOnInit:this.props.focusedOnInit,placeholder:this.props.placeholder,presenter:{ViewRenderer:c('XUITypeaheadView.react'),useLayer:true,layerBehaviors:{ContextualLayerHideOnScrollOut:c('ContextualLayerHideOnScrollOut'),ContextualLayerUpdateOnScroll:c('ContextualLayerUpdateOnScroll')}},queryString:this.state.queryString,ref:'typeahead',searchSource:this.props.searchSource,searchSourceOptions:this.props.searchSourceOptions,showEntriesOnFocus:true,tallInput:true,xuiError:this.props.error,xuiErrorPosition:'above',onBlur:this.$AdsCanvasTypeahead5,onChange:this.$AdsCanvasTypeahead2,onFocus:this.$AdsCanvasTypeahead6,onSelectAttempt:this.$AdsCanvasTypeahead7})),c('React').createElement(l,null,c('React').createElement(c('AdsCanvasButtonsContainer.react'),{accessToken:this.props.accessToken,businessID:this.props.businessID,canAddProductSet:this.props.canAddProductSet,canvasID:this.props.canvasID,disabled:this.props.disabled,pageID:this.props.pageID,source:this.props.source,onClickCreate:this.props.onClickCreate,onClickPreview:this.props.onClickPreview,onCloseReset:this.props.onCloseReset,onDuplicateReload:this.props.onDuplicateReload,onSaveCanvasSuccess:this.props.onSaveCanvasSuccess})))));};m.prototype.$AdsCanvasTypeahead8=function(){if(this.props.hideHelpText)return null;var n=i._("You can use a Canvas to open a full-screen experience in mobile when people click your ad. Select a Canvas or create a new one. {=Learn more}.",[i.param('=Learn more',c('React').createElement(c('Link.react'),{href:'https://canvas.facebook.com/',target:'_blank',onClick:this.props.onClickLearnMore||c('emptyFunction')},i._("Learn more")))]);return (c('React').createElement(c('AdsLabeledField.react'),{className:this.props.disabled?"_4i0b":'',helpText:n,label:'Canvas'}));};m.prototype.$AdsCanvasTypeahead1=function(){return !!this.state.queryString;};m.prototype.$AdsCanvasTypeahead2=function(event){this.props.onQueryChange&&this.props.onQueryChange();this.setState({queryString:event.target.value});};m.prototype.$AdsCanvasTypeahead3=function(n){return n?n.getTitle():'';};m.prototype.$AdsCanvasTypeahead4=function(n){this.setState({queryString:this.$AdsCanvasTypeahead3(n)});};m.prototype.$AdsCanvasTypeahead5=function(){this.$AdsCanvasTypeahead4(this.props.selectedEntry);};m.prototype.$AdsCanvasTypeahead6=function(){var n=this.props.selectedEntry;this.setState({queryString:n?n.getTitle():''});};m.prototype.$AdsCanvasTypeahead7=function(n){if(this.props.onEntrySelect)this.props.onEntrySelect(n);this.setState({queryString:n.getTitle()});};f.exports=m;},null);
__d('ReactComposerCanvasTypeaheadContainer.react',['cx','fbt','ReactComposerCanvasActions','ReactComposerContextMixin','ReactComposerScrapedAttachmentActions','AdsCanvasComposerDialogStore','AdsCanvasSearchSource','AdsCanvasTypeahead.react','CanvasSource','RichMediaEditorActions','SearchableEntry','StoreAndPropBasedStateMixin','XUICloseButton.react','React'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'ReactComposerCanvasTypeaheadContainer',mixins:[c('ReactComposerContextMixin'),c('StoreAndPropBasedStateMixin')(c('AdsCanvasComposerDialogStore'))],propTypes:{config:j.shape({accessToken:j.string.isRequired,businessID:j.string}).isRequired},statics:{calculateState:function(l){return {selectedCanvas:c('AdsCanvasComposerDialogStore').getSelectedCanvas(),unpublishedCanvas:c('AdsCanvasComposerDialogStore').getUnpublishedCanvas()};}},render:function(){var l=new (c('AdsCanvasSearchSource'))({pageID:this.context.targetID,accessToken:this.props.config.accessToken});l.bootstrap();var m=false,n=this.state.unpublishedCanvas||this.state.selectedCanvas,o=n?n.id:null,p=this.state.selectedCanvas?new (c('SearchableEntry'))({subtile:'',title:this.state.selectedCanvas.name,uniqueID:0}):null,q=i._("Select a Canvas"),r=i._("Close"),s={accessToken:this.props.config.accessToken,businessID:this.props.config.businessID,canAddProductSet:m,disabled:true,error:null,focusedOnInit:false,pageID:this.context.targetID,placeholder:q,searchSource:l,onCloseReset:this._onCloseReset,onDuplicateReload:this._onDuplicateReload,onEntrySelect:this._onEntrySelect,onSaveCanvasSuccess:this._onSaveCanvasSuccess};return (c('React').createElement('div',{className:"_3uyo"},c('React').createElement(c('XUICloseButton.react'),{className:"_3uyp",label:r,onClick:this._onClickCloseButton,size:'medium'}),c('React').createElement(c('AdsCanvasTypeahead.react'),babelHelpers['extends']({canvasID:o,selectedEntry:p,source:c('CanvasSource').PAGE_COMPOSER},s))));},_onClickCloseButton:function(){c('ReactComposerCanvasActions').hideCanvasSelector(this.context.composerID);},_onCloseReset:function(){c('RichMediaEditorActions').resetUnpublishedCanvas();},_onDuplicateReload:function(l,m){c('RichMediaEditorActions').setDialogShown(l,false);c('RichMediaEditorActions').setDialogCanvas(m.id,m);c('RichMediaEditorActions').setDialogShown(m.id,true);c('RichMediaEditorActions').setUnpublishedCanvas(m);},_onEntrySelect:function(l){var m=l.getUniqueID(),n=l.getAuxiliaryData();c('RichMediaEditorActions').setDialogCanvas(m,n);c('RichMediaEditorActions').setSelectedCanvas(n);this._scrapeURL(n.canvas_link);},_onSaveCanvasSuccess:function(l,m,n,o){if(o){c('RichMediaEditorActions').resetUnpublishedCanvas();c('RichMediaEditorActions').setDialogShown(n.id,false);c('RichMediaEditorActions').setSelectedCanvas(n);this._scrapeURL(n.canvas_link);}else{c('RichMediaEditorActions').setDialogCanvas(n.id,n);c('RichMediaEditorActions').setUnpublishedCanvas(n);}},_scrapeURL:function(l){c('ReactComposerScrapedAttachmentActions').scrapeAttachment(this.context.composerID,this.context.targetID,l,this.context.composerType,this.context.actorID);}});f.exports=k;},null);